import{u as Pn,a as ms,j as e,c as Ga,b as no,P as la,d as ro,R as kn,I as Rn,e as Ue,f as Ja,g as co,T as to,C as io,h as hs,i as lo,D as uo,k as mo,O as ho,l as po,m as Ea,W as Fn,n as xo,o as vo,p as Bn,A as An,q as Mn,r as $n,s as zn,t as On,v as Ln,S as _n,w as Vn,x as Un}from"./ui-BL0XK98a.js";import{r,u as qn,f as Gn}from"./router-jYBwsfRB.js";import{a as q,t as E,u as go}from"./index-CQGT0cvf.js";import{l as ue,m as me,n as jo,C as Z,a as ne,b as re,d as D,L as u,I as b,B as T,S as ge,g as je,h as fe,i as be,j as Q,o as Jn,k as Ve,e as _a,A as Hn,f as Yn,c as Kn}from"./auth.service-CJ0bslbb.js";import{a as Wn}from"./utils-CjxovF-h.js";import{R as Xn,L as Qn,C as Zn,X as Dn,Y as er,T as ar,a as sr,b as Js}from"./charts-BmwHlwat.js";import"./vendor-gH-7aFTg.js";/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],Na=ue("building-2",or);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],fo=ue("building",nr);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Hs=ue("calendar",rr);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],tr=ue("chart-column",cr);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Ra=ue("chevron-left",ir);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Fa=ue("chevron-right",lr);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Ha=ue("credit-card",dr);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],oa=ue("dollar-sign",ur);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Ys=ue("download",mr);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ks=ue("eye",hr);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],na=ue("file-text",pr);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],vr=ue("funnel",xr);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],qa=ue("house",gr);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],Ws=ue("list",jr);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ne=ue("loader-circle",fr);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],yr=ue("log-out",br);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=[["path",{d:"M5 12h14",key:"1ays0h"}]],Xs=ue("minus",Cr);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],bo=ue("percent",Nr);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],da=ue("plus",Ir);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],qe=ue("search",wr);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ta=ue("square-pen",Er);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ga=ue("trash-2",Sr);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Pr=ue("trending-down",Tr);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Va=ue("trending-up",kr);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Fr=ue("upload",Rr);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Oe=ue("user",Br);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Mr=ue("users",Ar);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ps=ue("x",$r);class zr{static async getContratosAtivos(){try{return await q("/contratos-ativos",{method:"GET"})}catch(a){throw console.error("Erro ao buscar contratos ativos:",a),a}}}class Or{static async getDashboard(){try{return await q("/dashboard",{method:"GET"})}catch(a){throw console.error("Erro ao buscar dados do dashboard:",a),a}}}class Lr{static async getReceitasDespesasAnual(){try{return await q("/receitas-despesas-anual",{method:"GET"})}catch(a){throw console.error("Erro ao buscar receitas e despesas anuais:",a),a}}}var Ya="Tabs",[_r,wt]=Ga(Ya,[ro]),yo=ro(),[Vr,xs]=_r(Ya),Co=r.forwardRef((s,a)=>{const{__scopeTabs:o,value:n,onValueChange:i,defaultValue:y,orientation:t="horizontal",dir:j,activationMode:N="automatic",...v}=s,B=Pn(j),[f,A]=ms({prop:n,onChange:i,defaultProp:y??"",caller:Ya});return e.jsx(Vr,{scope:o,baseId:no(),value:f,onValueChange:A,orientation:t,dir:B,activationMode:N,children:e.jsx(la.div,{dir:B,"data-orientation":t,...v,ref:a})})});Co.displayName=Ya;var No="TabsList",Io=r.forwardRef((s,a)=>{const{__scopeTabs:o,loop:n=!0,...i}=s,y=xs(No,o),t=yo(o);return e.jsx(kn,{asChild:!0,...t,orientation:y.orientation,dir:y.dir,loop:n,children:e.jsx(la.div,{role:"tablist","aria-orientation":y.orientation,...i,ref:a})})});Io.displayName=No;var wo="TabsTrigger",Eo=r.forwardRef((s,a)=>{const{__scopeTabs:o,value:n,disabled:i=!1,...y}=s,t=xs(wo,o),j=yo(o),N=Po(t.baseId,n),v=ko(t.baseId,n),B=n===t.value;return e.jsx(Rn,{asChild:!0,...j,focusable:!i,active:B,children:e.jsx(la.button,{type:"button",role:"tab","aria-selected":B,"aria-controls":v,"data-state":B?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:N,...y,ref:a,onMouseDown:Ue(s.onMouseDown,f=>{!i&&f.button===0&&f.ctrlKey===!1?t.onValueChange(n):f.preventDefault()}),onKeyDown:Ue(s.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&t.onValueChange(n)}),onFocus:Ue(s.onFocus,()=>{const f=t.activationMode!=="manual";!B&&!i&&f&&t.onValueChange(n)})})})});Eo.displayName=wo;var So="TabsContent",To=r.forwardRef((s,a)=>{const{__scopeTabs:o,value:n,forceMount:i,children:y,...t}=s,j=xs(So,o),N=Po(j.baseId,n),v=ko(j.baseId,n),B=n===j.value,f=r.useRef(B);return r.useEffect(()=>{const A=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(A)},[]),e.jsx(Ja,{present:i||B,children:({present:A})=>e.jsx(la.div,{"data-state":B?"active":"inactive","data-orientation":j.orientation,role:"tabpanel","aria-labelledby":N,hidden:!A,id:v,tabIndex:0,...t,ref:a,style:{...s.style,animationDuration:f.current?"0s":void 0},children:A&&y})})});To.displayName=So;function Po(s,a){return`${s}-trigger-${a}`}function ko(s,a){return`${s}-content-${a}`}var Ur=Co,qr=Io,Gr=Eo,Jr=To;function ua({className:s,...a}){return e.jsx(Ur,{"data-slot":"tabs",className:me("flex flex-col gap-2",s),...a})}function ma({className:s,...a}){return e.jsx(qr,{"data-slot":"tabs-list",className:me("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",s),...a})}function ee({className:s,...a}){return e.jsx(Gr,{"data-slot":"tabs-trigger",className:me("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...a})}function ae({className:s,...a}){return e.jsx(Jr,{"data-slot":"tabs-content",className:me("flex-1 outline-none",s),...a})}function Ie({...s}){return e.jsx(co,{"data-slot":"dialog",...s})}function Ro({...s}){return e.jsx(to,{"data-slot":"dialog-trigger",...s})}function Hr({...s}){return e.jsx(mo,{"data-slot":"dialog-portal",...s})}function Yr({className:s,...a}){return e.jsx(ho,{"data-slot":"dialog-overlay",className:me("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-blue-900/50",s),...a})}function we({className:s,children:a,...o}){return e.jsxs(Hr,{"data-slot":"dialog-portal",children:[e.jsx(Yr,{}),e.jsxs(io,{"data-slot":"dialog-content",className:me("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),...o,children:[a,e.jsxs(hs,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[e.jsx(ps,{}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Ee({className:s,...a}){return e.jsx("div",{"data-slot":"dialog-header",className:me("flex flex-col gap-2 text-center sm:text-left",s),...a})}function ze({className:s,...a}){return e.jsx("div",{"data-slot":"dialog-footer",className:me("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",s),...a})}function Se({className:s,...a}){return e.jsx(lo,{"data-slot":"dialog-title",className:me("text-lg leading-none font-semibold",s),...a})}function Te({className:s,...a}){return e.jsx(uo,{"data-slot":"dialog-description",className:me("text-muted-foreground text-sm",s),...a})}var Fo="AlertDialog",[Kr,Et]=Ga(Fo,[po]),ea=po(),Bo=s=>{const{__scopeAlertDialog:a,...o}=s,n=ea(a);return e.jsx(co,{...n,...o,modal:!0})};Bo.displayName=Fo;var Wr="AlertDialogTrigger",Ao=r.forwardRef((s,a)=>{const{__scopeAlertDialog:o,...n}=s,i=ea(o);return e.jsx(to,{...i,...n,ref:a})});Ao.displayName=Wr;var Xr="AlertDialogPortal",Mo=s=>{const{__scopeAlertDialog:a,...o}=s,n=ea(a);return e.jsx(mo,{...n,...o})};Mo.displayName=Xr;var Qr="AlertDialogOverlay",$o=r.forwardRef((s,a)=>{const{__scopeAlertDialog:o,...n}=s,i=ea(o);return e.jsx(ho,{...i,...n,ref:a})});$o.displayName=Qr;var Ca="AlertDialogContent",[Zr,Dr]=Kr(Ca),ec=xo("AlertDialogContent"),zo=r.forwardRef((s,a)=>{const{__scopeAlertDialog:o,children:n,...i}=s,y=ea(o),t=r.useRef(null),j=Ea(a,t),N=r.useRef(null);return e.jsx(Fn,{contentName:Ca,titleName:Oo,docsSlug:"alert-dialog",children:e.jsx(Zr,{scope:o,cancelRef:N,children:e.jsxs(io,{role:"alertdialog",...y,...i,ref:j,onOpenAutoFocus:Ue(i.onOpenAutoFocus,v=>{v.preventDefault(),N.current?.focus({preventScroll:!0})}),onPointerDownOutside:v=>v.preventDefault(),onInteractOutside:v=>v.preventDefault(),children:[e.jsx(ec,{children:n}),e.jsx(sc,{contentRef:t})]})})})});zo.displayName=Ca;var Oo="AlertDialogTitle",Lo=r.forwardRef((s,a)=>{const{__scopeAlertDialog:o,...n}=s,i=ea(o);return e.jsx(lo,{...i,...n,ref:a})});Lo.displayName=Oo;var _o="AlertDialogDescription",Vo=r.forwardRef((s,a)=>{const{__scopeAlertDialog:o,...n}=s,i=ea(o);return e.jsx(uo,{...i,...n,ref:a})});Vo.displayName=_o;var ac="AlertDialogAction",Uo=r.forwardRef((s,a)=>{const{__scopeAlertDialog:o,...n}=s,i=ea(o);return e.jsx(hs,{...i,...n,ref:a})});Uo.displayName=ac;var qo="AlertDialogCancel",Go=r.forwardRef((s,a)=>{const{__scopeAlertDialog:o,...n}=s,{cancelRef:i}=Dr(qo,o),y=ea(o),t=Ea(a,i);return e.jsx(hs,{...y,...n,ref:t})});Go.displayName=qo;var sc=({contentRef:s})=>{const a=`\`${Ca}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Ca}\` by passing a \`${_o}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Ca}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return r.useEffect(()=>{document.getElementById(s.current?.getAttribute("aria-describedby"))||console.warn(a)},[a,s]),null},oc=Bo,nc=Ao,rc=Mo,cc=$o,tc=zo,ic=Uo,lc=Go,dc=Lo,uc=Vo;function vs({...s}){return e.jsx(oc,{"data-slot":"alert-dialog",...s})}function gs({...s}){return e.jsx(nc,{"data-slot":"alert-dialog-trigger",...s})}function mc({...s}){return e.jsx(rc,{"data-slot":"alert-dialog-portal",...s})}function hc({className:s,...a}){return e.jsx(cc,{"data-slot":"alert-dialog-overlay",className:me("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-blue-900/50",s),...a})}function js({className:s,...a}){return e.jsxs(mc,{children:[e.jsx(hc,{}),e.jsx(tc,{"data-slot":"alert-dialog-content",className:me("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),...a})]})}function fs({className:s,...a}){return e.jsx("div",{"data-slot":"alert-dialog-header",className:me("flex flex-col gap-2 text-center sm:text-left",s),...a})}function bs({className:s,...a}){return e.jsx("div",{"data-slot":"alert-dialog-footer",className:me("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",s),...a})}function ys({className:s,...a}){return e.jsx(dc,{"data-slot":"alert-dialog-title",className:me("text-lg font-semibold",s),...a})}function Cs({className:s,...a}){return e.jsx(uc,{"data-slot":"alert-dialog-description",className:me("text-muted-foreground text-sm",s),...a})}function Ns({className:s,...a}){return e.jsx(ic,{className:me(jo(),s),...a})}function Is({className:s,...a}){return e.jsx(lc,{className:me(jo({variant:"outline"}),s),...a})}function Ka({className:s,...a}){return e.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:e.jsx("table",{"data-slot":"table",className:me("w-full caption-bottom text-sm",s),...a})})}function Wa({className:s,...a}){return e.jsx("thead",{"data-slot":"table-header",className:me("[&_tr]:border-b",s),...a})}function Xa({className:s,...a}){return e.jsx("tbody",{"data-slot":"table-body",className:me("[&_tr:last-child]:border-0",s),...a})}function _e({className:s,...a}){return e.jsx("tr",{"data-slot":"table-row",className:me("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",s),...a})}function Pe({className:s,...a}){return e.jsx("th",{"data-slot":"table-head",className:me("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...a})}function ve({className:s,...a}){return e.jsx("td",{"data-slot":"table-cell",className:me("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...a})}function Ba({title:s,data:a,columns:o,isLoading:n=!1,loadingText:i="Carregando...",emptyText:y="Nenhum item encontrado",keyExtractor:t,className:j=""}){return e.jsxs(Z,{className:j,children:[e.jsx(ne,{children:e.jsxs(re,{children:[s," (",a.length,")"]})}),e.jsx(D,{children:e.jsxs(Ka,{children:[e.jsx(Wa,{children:e.jsx(_e,{children:o.map(N=>e.jsx(Pe,{className:N.className,children:N.header},String(N.key)))})}),e.jsx(Xa,{children:n?e.jsx(_e,{children:e.jsx(ve,{colSpan:o.length,className:"text-center",children:e.jsxs("div",{className:"flex items-center justify-center py-4",children:[e.jsx(Ne,{className:"h-4 w-4 animate-spin mr-2"}),i]})})}):a.length===0?e.jsx(_e,{children:e.jsx(ve,{colSpan:o.length,className:"text-center",children:y})}):a.map(N=>e.jsx(_e,{children:o.map(v=>e.jsx(ve,{className:v.className,children:v.render?v.render(N):String(N[v.key]||"")},String(v.key)))},t(N)))})]})})]})}class pc{baseEndpoint="/entidade";async findAll(){try{const a=await q(this.baseEndpoint);return Array.isArray(a?.data)?a.data:[]}catch(a){throw console.error("Erro ao buscar entidades:",a),new Error("Erro ao carregar entidades")}}async findAllView(a){try{const o=new URLSearchParams;return a.search&&(o.append("search",a.search),o.append("searchIn","nome,cnpj")),o.append("page",a.page.toString()),o.append("limit",a.limit.toString()),await q(`${this.baseEndpoint}/view?${o.toString()}`)}catch(o){throw console.error("Erro ao buscar entidades com filtros:",o),new Error("Erro ao carregar entidades")}}async findOne(a){try{return await q(`${this.baseEndpoint}/${a}`)}catch(o){throw console.error("Erro ao buscar entidade:",o),new Error("Erro ao carregar entidade")}}async create(a){try{return await q(this.baseEndpoint,{method:"POST",body:JSON.stringify(a)})}catch(o){throw console.error("Erro ao criar entidade:",o),o instanceof Error?o:new Error("Erro ao criar entidade")}}async update(a,o){try{const n=`${this.baseEndpoint}/${a}`;return await q(n,{method:"PATCH",body:JSON.stringify(o)})}catch(n){throw console.error("Erro ao atualizar entidade:",n),n instanceof Error?n:new Error("Erro ao atualizar entidade")}}async delete(a){try{await q(`${this.baseEndpoint}/${a}`,{method:"DELETE"})}catch(o){throw console.error("Erro ao excluir entidade:",o),o instanceof Error?o:new Error("Erro ao excluir entidade")}}convertToFrontendFormat(a){const o=a.enderecos?.[0],n=a.contasBancarias?.[0];return{entidadeId:a.entidadeId,nome:a.nome||"",cnpj:a.cnpj||"",urlSite:a.urlSite||void 0,urlLogo:a.urlLogo||void 0,enderecos:a.enderecos||[],entidadeContaBancaria:a.contasBancarias||[],cep:o?.cep||"",logradouro:o?.logradouro||"",numero:o?.numero||"",complemento:o?.complemento||"",bairro:o?.bairro||"",cidade:o?.cidade||"",uf:o?.uf||"",cidadeCodigo:o?.cidadeCodigo?.toString()||"",ufCodigo:o?.ufCodigo?.toString()||"",contatoComercialNome:o?.contatoComercialNome||"",contatoComercialEmail:o?.contatoComercialEmail||"",contatoComercialTelefone1:o?.contatoComercialTelefone1||"",contatoComercialTelefone2:o?.contatoComercialTelefone2||"",contatoComercialTelefone3:o?.contatoComercialTelefone3||"",contatoTecnicoNome:o?.contatoTecnicoNome||"",contatoTecnicoEmail:o?.contatoTecnicoEmail||"",contatoTecnicoTelefone1:o?.contatoTecnicoTelefone1||"",contatoTecnicoTelefone2:o?.contatoTecnicoTelefone2||"",contatoTecnicoTelefone3:o?.contatoTecnicoTelefone3||"",contatoFinanceiroNome:o?.contatoFinanceiroNome||"",contatoFinanceiroEmail:o?.contatoFinanceiroEmail||"",contatoFinanceiroTelefone1:o?.contatoFinanceiroTelefone1||"",contatoFinanceiroTelefone2:o?.contatoFinanceiroTelefone2||"",contatoFinanceiroTelefone3:o?.contatoFinanceiroTelefone3||"",bancoId:n?.bancoId||n?.banco?.bancoId,bancoNome:n?.banco?.nome||n?.bancoNome||"",bancoCodigo:n?.banco?.codigo||"",agencia:n?.agencia||"",agenciaDigito:n?.agenciaDigito||"",conta:n?.conta||"",contaDigito:n?.contaDigito||"",carteira:n?.carteira||"",cedenteCodigo:n?.cedenteCodigo||"",cedenteNome:n?.cedenteNome||"",chavePix:n?.chavePix||""}}convertToApiFormat(a){return{entidade:{nome:a.nome,cnpj:a.cnpj,urlSite:a.urlSite,urlLogo:a.urlLogo},endereco:{cep:a.cep,logradouro:a.logradouro,numero:a.numero,complemento:a.complemento,bairro:a.bairro,cidade:a.cidade,cidadeCodigo:a.cidadeCodigo?parseInt(a.cidadeCodigo):void 0,uf:a.uf,ufCodigo:a.ufCodigo?parseInt(a.ufCodigo):void 0,contatoComercialNome:a.contatoComercialNome,contatoComercialTelefone1:a.contatoComercialTelefone1,contatoComercialTelefone2:a.contatoComercialTelefone2,contatoComercialTelefone3:a.contatoComercialTelefone3,contatoComercialEmail:a.contatoComercialEmail,contatoTecnicoNome:a.contatoTecnicoNome,contatoTecnicoTelefone1:a.contatoTecnicoTelefone1,contatoTecnicoTelefone2:a.contatoTecnicoTelefone2,contatoTecnicoTelefone3:a.contatoTecnicoTelefone3,contatoTecnicoEmail:a.contatoTecnicoEmail,contatoFinanceiroNome:a.contatoFinanceiroNome,contatoFinanceiroTelefone1:a.contatoFinanceiroTelefone1,contatoFinanceiroTelefone2:a.contatoFinanceiroTelefone2,contatoFinanceiroTelefone3:a.contatoFinanceiroTelefone3,contatoFinanceiroEmail:a.contatoFinanceiroEmail},entidadeContaBancaria:a.bancoId?{bancoId:a.bancoId,agencia:a.agencia||"",agenciaDigito:a.agenciaDigito,conta:a.conta||"",contaDigito:a.contaDigito,carteira:a.carteira,cedenteCodigo:a.cedenteCodigo,cedenteNome:a.cedenteNome,chavePix:a.chavePix}:void 0}}convertCreateUpdateToFrontendFormat(a){const{entidade:o,endereco:n,entidadeContaBancaria:i}=a;return{entidadeId:o.entidadeId,nome:o.nome,cnpj:o.cnpj,urlSite:o.urlSite||"",urlLogo:o.urlLogo||"",enderecos:n?[n]:[],entidadeContaBancaria:i?[i]:[],cep:n?.cep||"",logradouro:n?.logradouro||"",numero:n?.numero||"",complemento:n?.complemento||"",bairro:n?.bairro||"",cidade:n?.cidade||"",uf:n?.uf||"",cidadeCodigo:n?.cidadeCodigo?.toString()||"",ufCodigo:n?.ufCodigo?.toString()||"",contatoComercialNome:n?.contatoComercialNome||"",contatoComercialEmail:n?.contatoComercialEmail||"",contatoComercialTelefone1:n?.contatoComercialTelefone1||"",contatoComercialTelefone2:n?.contatoComercialTelefone2||"",contatoComercialTelefone3:n?.contatoComercialTelefone3||"",contatoTecnicoNome:n?.contatoTecnicoNome||"",contatoTecnicoEmail:n?.contatoTecnicoEmail||"",contatoTecnicoTelefone1:n?.contatoTecnicoTelefone1||"",contatoTecnicoTelefone2:n?.contatoTecnicoTelefone2||"",contatoTecnicoTelefone3:n?.contatoTecnicoTelefone3||"",contatoFinanceiroNome:n?.contatoFinanceiroNome||"",contatoFinanceiroEmail:n?.contatoFinanceiroEmail||"",contatoFinanceiroTelefone1:n?.contatoFinanceiroTelefone1||"",contatoFinanceiroTelefone2:n?.contatoFinanceiroTelefone2||"",contatoFinanceiroTelefone3:n?.contatoFinanceiroTelefone3||"",bancoId:i?.bancoId,agencia:i?.agencia||"",agenciaDigito:i?.agenciaDigito||"",conta:i?.conta||"",contaDigito:i?.contaDigito||"",carteira:i?.carteira||"",cedenteCodigo:i?.cedenteCodigo||"",cedenteNome:i?.cedenteNome||"",chavePix:i?.chavePix||""}}}const ha=new pc;var[Qa,St]=Ga("Tooltip",[vo]),Za=vo(),Jo="TooltipProvider",xc=700,is="tooltip.open",[vc,ws]=Qa(Jo),Ho=s=>{const{__scopeTooltip:a,delayDuration:o=xc,skipDelayDuration:n=300,disableHoverableContent:i=!1,children:y}=s,t=r.useRef(!0),j=r.useRef(!1),N=r.useRef(0);return r.useEffect(()=>{const v=N.current;return()=>window.clearTimeout(v)},[]),e.jsx(vc,{scope:a,isOpenDelayedRef:t,delayDuration:o,onOpen:r.useCallback(()=>{window.clearTimeout(N.current),t.current=!1},[]),onClose:r.useCallback(()=>{window.clearTimeout(N.current),N.current=window.setTimeout(()=>t.current=!0,n)},[n]),isPointerInTransitRef:j,onPointerInTransitChange:r.useCallback(v=>{j.current=v},[]),disableHoverableContent:i,children:y})};Ho.displayName=Jo;var Aa="Tooltip",[gc,Ma]=Qa(Aa),Yo=s=>{const{__scopeTooltip:a,children:o,open:n,defaultOpen:i,onOpenChange:y,disableHoverableContent:t,delayDuration:j}=s,N=ws(Aa,s.__scopeTooltip),v=Za(a),[B,f]=r.useState(null),A=no(),F=r.useRef(0),P=t??N.disableHoverableContent,S=j??N.delayDuration,$=r.useRef(!1),[x,p]=ms({prop:n,defaultProp:i??!1,onChange:C=>{C?(N.onOpen(),document.dispatchEvent(new CustomEvent(is))):N.onClose(),y?.(C)},caller:Aa}),V=r.useMemo(()=>x?$.current?"delayed-open":"instant-open":"closed",[x]),U=r.useCallback(()=>{window.clearTimeout(F.current),F.current=0,$.current=!1,p(!0)},[p]),J=r.useCallback(()=>{window.clearTimeout(F.current),F.current=0,p(!1)},[p]),K=r.useCallback(()=>{window.clearTimeout(F.current),F.current=window.setTimeout(()=>{$.current=!0,p(!0),F.current=0},S)},[S,p]);return r.useEffect(()=>()=>{F.current&&(window.clearTimeout(F.current),F.current=0)},[]),e.jsx(Bn,{...v,children:e.jsx(gc,{scope:a,contentId:A,open:x,stateAttribute:V,trigger:B,onTriggerChange:f,onTriggerEnter:r.useCallback(()=>{N.isOpenDelayedRef.current?K():U()},[N.isOpenDelayedRef,K,U]),onTriggerLeave:r.useCallback(()=>{P?J():(window.clearTimeout(F.current),F.current=0)},[J,P]),onOpen:U,onClose:J,disableHoverableContent:P,children:o})})};Yo.displayName=Aa;var ls="TooltipTrigger",Ko=r.forwardRef((s,a)=>{const{__scopeTooltip:o,...n}=s,i=Ma(ls,o),y=ws(ls,o),t=Za(o),j=r.useRef(null),N=Ea(a,j,i.onTriggerChange),v=r.useRef(!1),B=r.useRef(!1),f=r.useCallback(()=>v.current=!1,[]);return r.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),e.jsx(An,{asChild:!0,...t,children:e.jsx(la.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...n,ref:N,onPointerMove:Ue(s.onPointerMove,A=>{A.pointerType!=="touch"&&!B.current&&!y.isPointerInTransitRef.current&&(i.onTriggerEnter(),B.current=!0)}),onPointerLeave:Ue(s.onPointerLeave,()=>{i.onTriggerLeave(),B.current=!1}),onPointerDown:Ue(s.onPointerDown,()=>{i.open&&i.onClose(),v.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Ue(s.onFocus,()=>{v.current||i.onOpen()}),onBlur:Ue(s.onBlur,i.onClose),onClick:Ue(s.onClick,i.onClose)})})});Ko.displayName=ls;var Es="TooltipPortal",[jc,fc]=Qa(Es,{forceMount:void 0}),Wo=s=>{const{__scopeTooltip:a,forceMount:o,children:n,container:i}=s,y=Ma(Es,a);return e.jsx(jc,{scope:a,forceMount:o,children:e.jsx(Ja,{present:o||y.open,children:e.jsx(Mn,{asChild:!0,container:i,children:n})})})};Wo.displayName=Es;var Ia="TooltipContent",Xo=r.forwardRef((s,a)=>{const o=fc(Ia,s.__scopeTooltip),{forceMount:n=o.forceMount,side:i="top",...y}=s,t=Ma(Ia,s.__scopeTooltip);return e.jsx(Ja,{present:n||t.open,children:t.disableHoverableContent?e.jsx(Qo,{side:i,...y,ref:a}):e.jsx(bc,{side:i,...y,ref:a})})}),bc=r.forwardRef((s,a)=>{const o=Ma(Ia,s.__scopeTooltip),n=ws(Ia,s.__scopeTooltip),i=r.useRef(null),y=Ea(a,i),[t,j]=r.useState(null),{trigger:N,onClose:v}=o,B=i.current,{onPointerInTransitChange:f}=n,A=r.useCallback(()=>{j(null),f(!1)},[f]),F=r.useCallback((P,S)=>{const $=P.currentTarget,x={x:P.clientX,y:P.clientY},p=Ic(x,$.getBoundingClientRect()),V=wc(x,p),U=Ec(S.getBoundingClientRect()),J=Tc([...V,...U]);j(J),f(!0)},[f]);return r.useEffect(()=>()=>A(),[A]),r.useEffect(()=>{if(N&&B){const P=$=>F($,B),S=$=>F($,N);return N.addEventListener("pointerleave",P),B.addEventListener("pointerleave",S),()=>{N.removeEventListener("pointerleave",P),B.removeEventListener("pointerleave",S)}}},[N,B,F,A]),r.useEffect(()=>{if(t){const P=S=>{const $=S.target,x={x:S.clientX,y:S.clientY},p=N?.contains($)||B?.contains($),V=!Sc(x,t);p?A():V&&(A(),v())};return document.addEventListener("pointermove",P),()=>document.removeEventListener("pointermove",P)}},[N,B,t,v,A]),e.jsx(Qo,{...s,ref:y})}),[yc,Cc]=Qa(Aa,{isInside:!1}),Nc=xo("TooltipContent"),Qo=r.forwardRef((s,a)=>{const{__scopeTooltip:o,children:n,"aria-label":i,onEscapeKeyDown:y,onPointerDownOutside:t,...j}=s,N=Ma(Ia,o),v=Za(o),{onClose:B}=N;return r.useEffect(()=>(document.addEventListener(is,B),()=>document.removeEventListener(is,B)),[B]),r.useEffect(()=>{if(N.trigger){const f=A=>{A.target?.contains(N.trigger)&&B()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[N.trigger,B]),e.jsx(zn,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:y,onPointerDownOutside:t,onFocusOutside:f=>f.preventDefault(),onDismiss:B,children:e.jsxs(On,{"data-state":N.stateAttribute,...v,...j,ref:a,style:{...j.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(Nc,{children:n}),e.jsx(yc,{scope:o,isInside:!0,children:e.jsx(Ln,{id:N.contentId,role:"tooltip",children:i||n})})]})})});Xo.displayName=Ia;var Zo="TooltipArrow",Do=r.forwardRef((s,a)=>{const{__scopeTooltip:o,...n}=s,i=Za(o);return Cc(Zo,o).isInside?null:e.jsx($n,{...i,...n,ref:a})});Do.displayName=Zo;function Ic(s,a){const o=Math.abs(a.top-s.y),n=Math.abs(a.bottom-s.y),i=Math.abs(a.right-s.x),y=Math.abs(a.left-s.x);switch(Math.min(o,n,i,y)){case y:return"left";case i:return"right";case o:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function wc(s,a,o=5){const n=[];switch(a){case"top":n.push({x:s.x-o,y:s.y+o},{x:s.x+o,y:s.y+o});break;case"bottom":n.push({x:s.x-o,y:s.y-o},{x:s.x+o,y:s.y-o});break;case"left":n.push({x:s.x+o,y:s.y-o},{x:s.x+o,y:s.y+o});break;case"right":n.push({x:s.x-o,y:s.y-o},{x:s.x-o,y:s.y+o});break}return n}function Ec(s){const{top:a,right:o,bottom:n,left:i}=s;return[{x:i,y:a},{x:o,y:a},{x:o,y:n},{x:i,y:n}]}function Sc(s,a){const{x:o,y:n}=s;let i=!1;for(let y=0,t=a.length-1;y<a.length;t=y++){const j=a[y],N=a[t],v=j.x,B=j.y,f=N.x,A=N.y;B>n!=A>n&&o<(f-v)*(n-B)/(A-B)+v&&(i=!i)}return i}function Tc(s){const a=s.slice();return a.sort((o,n)=>o.x<n.x?-1:o.x>n.x?1:o.y<n.y?-1:o.y>n.y?1:0),Pc(a)}function Pc(s){if(s.length<=1)return s.slice();const a=[];for(let n=0;n<s.length;n++){const i=s[n];for(;a.length>=2;){const y=a[a.length-1],t=a[a.length-2];if((y.x-t.x)*(i.y-t.y)>=(y.y-t.y)*(i.x-t.x))a.pop();else break}a.push(i)}a.pop();const o=[];for(let n=s.length-1;n>=0;n--){const i=s[n];for(;o.length>=2;){const y=o[o.length-1],t=o[o.length-2];if((y.x-t.x)*(i.y-t.y)>=(y.y-t.y)*(i.x-t.x))o.pop();else break}o.push(i)}return o.pop(),a.length===1&&o.length===1&&a[0].x===o[0].x&&a[0].y===o[0].y?a:a.concat(o)}var kc=Ho,Rc=Yo,Fc=Ko,Bc=Wo,Ac=Xo,Mc=Do;function He({delayDuration:s=0,...a}){return e.jsx(kc,{"data-slot":"tooltip-provider",delayDuration:s,...a})}function Xe({...s}){return e.jsx(He,{children:e.jsx(Rc,{"data-slot":"tooltip",...s})})}function Qe({...s}){return e.jsx(Fc,{"data-slot":"tooltip-trigger",...s})}function Ze({className:s,sideOffset:a=0,children:o,...n}){return e.jsx(Bc,{children:e.jsxs(Ac,{"data-slot":"tooltip-content",sideOffset:a,className:me("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",s),...n,children:[o,e.jsx(Mc,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}function We({label:s,isRequired:a=!1,validationMessage:o,onValidationChange:n,showValidation:i=!1,customValidation:y,className:t="",value:j="",onChange:N,...v}){const[B,f]=r.useState(!0),[A,F]=r.useState(!1),P=U=>a&&!U?.trim()?!1:y?y(U):!0;r.useEffect(()=>{const U=P(j);f(U),n?.(U)},[j,a,y,n]);const S=U=>{F(!0),N?.(U)},$=()=>{F(!0)},x=A&&!B,p=[t,x?"border-red-500 focus:border-red-500 focus:ring-red-500":""].filter(Boolean).join(" "),V=[a?"font-bold":""].filter(Boolean).join(" ");return e.jsxs("div",{className:"space-y-2",children:[s&&e.jsxs(u,{htmlFor:v.id,className:V,children:[s," ",a&&"*"]}),e.jsx(b,{...v,value:j,onChange:S,onBlur:$,className:p,required:a}),x&&o&&e.jsx("p",{className:"text-sm text-red-500",children:o})]})}class $c{async findAll(a){try{const o=new URLSearchParams;return a?.search&&o.append("search",a.search),a?.ativo!==void 0&&o.append("ativo",a.ativo.toString()),await q(`/banco?${o.toString()}`,{method:"GET"})}catch(o){throw console.error("Erro ao buscar bancos:",o),o}}async findById(a){try{return await q(`/banco/${a}`,{method:"GET"})}catch(o){throw console.error("Erro ao buscar banco:",o),o}}}const Da=new $c,ia=s=>s.replace(/\D/g,"").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})/,"$1-$2").replace(/(-\d{2})\d+?$/,"$1"),De=s=>s.replace(/\D/g,"").replace(/(\d{2})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1/$2").replace(/(\d{4})(\d{1,2})/,"$1-$2").replace(/(-\d{2})\d+?$/,"$1"),ra=s=>s.replace(/\D/g,"").replace(/(\d{5})(\d)/,"$1-$2").replace(/(-\d{3})\d+?$/,"$1"),Ye=s=>s.replace(/\D/g,"").replace(/(\d{2})(\d)/,"($1) $2").replace(/(\d{4})(\d)/,"$1-$2").replace(/(\d{4})-(\d)(\d{4})/,"$1$2-$3").replace(/(-\d{4})\d+?$/,"$1"),zc=async(s,a=[])=>{try{const o=a.find(i=>i.bancoId===s);return o||await Da.findById(s)}catch(o){return console.error("Banco não encontrado:",o),null}},Ss=s=>{const a=typeof s=="string"?Number(s):s;return!isNaN(a)&&a>0},Ts=s=>`${s.nome}`,Oc=async s=>{try{const a=s.replace(/\D/g,"");if(a.length!==8)throw new Error("CEP deve ter 8 dígitos");const o=await fetch(`https://viacep.com.br/ws/${a}/json/`);if(!o.ok)throw new Error(`Erro na requisição: ${o.status}`);const n=await o.json();if(n.erro)throw new Error("CEP não encontrado");return n}catch(a){return console.error("Erro ao buscar CEP na ViaCEP:",a),null}},Lc=s=>({cep:s.cep,logradouro:s.logradouro,complemento:s.complemento,bairro:s.bairro,cidade:s.localidade,cidadeCodigo:s.ibge,uf:s.uf,ufCodigo:s.ibge?s.ibge.substring(0,2):void 0}),_c=async(s,a,o,n)=>{if(!s||s.length<8)return n?.("CEP deve ter pelo menos 8 dígitos"),!1;try{const i=await Oc(s);if(!i)return n?.("CEP não encontrado"),!1;const y=Lc(i);return a(t=>({...t,...y})),o?.(i),!0}catch(i){const y=i instanceof Error?i.message:"Erro ao buscar CEP";return n?.(y),!1}};function Qs({formData:s,setFormData:a,isCreating:o,isUpdating:n,activeTab:i,setActiveTab:y}){const[t,j]=r.useState([]),[N,v]=r.useState(null),[B,f]=r.useState(""),[A,F]=r.useState(!1);r.useEffect(()=>{(async()=>{F(!0);try{const p=await Da.findAll();j(Array.isArray(p.data)?p.data:[])}catch(p){console.error("Erro ao carregar bancos:",p),j([])}finally{F(!1)}})()},[]),r.useEffect(()=>{if(s.bancoId&&t.length>0){const x=t.find(p=>p.bancoId===s.bancoId);x&&(v(x),f(x.bancoId.toString()))}},[s.bancoId,t]);const P=async x=>{if(!Ss(x)){v(null),a(U=>({...U,bancoId:void 0}));return}const p=Number(x),V=await zc(p,t);V?(v(V),a(U=>({...U,bancoId:V.bancoId}))):(v(null),a(U=>({...U,bancoId:void 0})))},S=x=>{const p=t.find(V=>V.bancoId===Number(x));p&&(v(p),f(p.bancoId.toString()),a(V=>({...V,bancoId:p.bancoId})))},$=async()=>{await _c(s.cep||"",a,()=>{setTimeout(()=>{const p=document.querySelector('input[name="numero"]');p&&p.focus()},100)},p=>{E.error(p)})&&E.success("CEP encontrado e preenchido com sucesso!")};return e.jsxs(ua,{value:i,onValueChange:y,className:"w-full",children:[e.jsxs(ma,{className:"grid w-full grid-cols-3",children:[e.jsxs(ee,{value:"dados-basicos",className:"flex items-center gap-2",children:[e.jsx(Na,{className:"h-4 w-4"}),"Dados Básicos"]}),e.jsxs(ee,{value:"endereco",className:"flex items-center gap-2",children:[e.jsx(qa,{className:"h-4 w-4"}),"Endereço"]}),e.jsxs(ee,{value:"dados-bancarios",className:"flex items-center gap-2",children:[e.jsx(Ha,{className:"h-4 w-4"}),"Dados Bancários"]})]}),e.jsx(ae,{value:"dados-basicos",className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Dados Básicos da Entidade"}),e.jsxs("div",{className:"grid grid-cols-[70%_15%_10%] gap-4 border border-gray-300 rounded-md p-2",children:[e.jsx(We,{id:"razaoSocial",name:"nome",label:"Nome",value:s.nome||"",onChange:x=>a(p=>({...p,nome:x.target.value})),disabled:o||n,isRequired:!0,validationMessage:"Razão Social é obrigatória"}),e.jsx("div",{className:"space-y-2",children:e.jsx(We,{id:"cnpj",label:"CNPJ",value:s.cnpj||"",onChange:x=>{const p=De(x.target.value);a(V=>({...V,cnpj:p}))},placeholder:"00.000.000/0000-00",disabled:o||n,isRequired:!0,validationMessage:"CNPJ é obrigatório",customValidation:x=>x.replace(/\D/g,"").length===14})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 border border-gray-300 rounded-md p-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"urlSite",children:"URL do Site"}),e.jsx(b,{id:"urlSite",name:"urlSite",value:s.urlSite||"",onChange:x=>a(p=>({...p,urlSite:x.target.value})),disabled:o||n})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"urlLogo",children:"URL do Logo"}),e.jsx(b,{id:"urlLogo",name:"urlLogo",value:s.urlLogo||"",onChange:x=>a(p=>({...p,urlLogo:x.target.value})),disabled:o||n})]})]})]})}),e.jsx(ae,{value:"endereco",className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Endereço e Contatos"}),e.jsx("div",{className:"space-y-2 gap-4 border border-gray-300 rounded-md p-2 max-w-[15%]",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(We,{id:"cep",name:"cep",label:"CEP",value:s.cep||"",onChange:x=>{const p=ra(x.target.value);a(V=>({...V,cep:p}))},placeholder:"00000-000",disabled:o||n,isRequired:!0,validationMessage:"CEP é obrigatório",customValidation:x=>x.replace(/\D/g,"").length===8,className:"flex-1"}),e.jsx(He,{children:e.jsxs(Xe,{children:[e.jsx(Qe,{asChild:!0,children:e.jsx(T,{type:"button",variant:"outline",size:"sm",onClick:$,disabled:o||n||!s.cep||s.cep.replace(/\D/g,"").length!==8,className:"px-3 mt-4",children:"🔍"})}),e.jsx(Ze,{children:e.jsx("p",{children:"Pesquisar CEP"})})]})})]})}),e.jsxs("div",{className:"grid grid-cols-[80%_15%] gap-4 border border-gray-300 rounded-md p-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"logradouro",children:"Logradouro"}),e.jsx(b,{id:"logradouro",name:"logradouro",value:s.logradouro||"",onChange:x=>a(p=>({...p,logradouro:x.target.value})),disabled:o||n})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"numero",children:"Número"}),e.jsx(b,{id:"numero",name:"numero",value:s.numero||"",onChange:x=>a(p=>({...p,numero:x.target.value})),disabled:o||n})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 border border-gray-300 rounded-md p-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"complemento",children:"Complemento"}),e.jsx(b,{id:"complemento",name:"complemento",value:s.complemento||"",onChange:x=>a(p=>({...p,complemento:x.target.value})),disabled:o||n})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"bairro",children:"Bairro"}),e.jsx(b,{id:"bairro",name:"bairro",value:s.bairro||"",onChange:x=>a(p=>({...p,bairro:x.target.value})),disabled:o||n})]})]}),e.jsxs("div",{className:"grid grid-cols-[70%_10%_10%] gap-4 border border-gray-300 rounded-md p-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"cidade",children:"Cidade"}),e.jsx(b,{id:"cidade",name:"cidade",value:s.cidade||"",onChange:x=>a(p=>({...p,cidade:x.target.value})),disabled:o||n})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"uf",children:"UF"}),e.jsx(b,{id:"uf",name:"uf",value:s.uf||"",onChange:x=>a(p=>({...p,uf:x.target.value})),maxLength:2,disabled:o||n})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"cidadeCodigo",children:"Código IBGE"}),e.jsx(b,{id:"cidadeCodigo",name:"cidadeCodigo",value:s.cidadeCodigo||"",onChange:x=>a(p=>({...p,cidadeCodigo:x.target.value})),disabled:!0})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-md font-medium",children:"Contato Comercial"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 border border-gray-300 rounded-md p-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"contatoComercialNome",children:"Nome"}),e.jsx(b,{id:"contatoComercialNome",name:"contatoComercialNome",value:s.contatoComercialNome||"",onChange:x=>a(p=>({...p,contatoComercialNome:x.target.value})),disabled:o||n})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"contatoComercialEmail",children:"E-mail"}),e.jsx(b,{id:"contatoComercialEmail",name:"contatoComercialEmail",type:"email",value:s.contatoComercialEmail||"",onChange:x=>a(p=>({...p,contatoComercialEmail:x.target.value})),placeholder:"comercial@exemplo.com",disabled:o||n})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 border border-gray-300 rounded-md p-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"contatoComercialTelefone1",children:"Telefone 1"}),e.jsx(b,{id:"contatoComercialTelefone1",name:"contatoComercialTelefone1",value:s.contatoComercialTelefone1||"",onChange:x=>{const p=Ye(x.target.value);a(V=>({...V,contatoComercialTelefone1:p}))},placeholder:"(00) 00000-0000",disabled:o||n})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"contatoComercialTelefone2",children:"Telefone 2"}),e.jsx(b,{id:"contatoComercialTelefone2",name:"contatoComercialTelefone2",value:s.contatoComercialTelefone2||"",onChange:x=>{const p=Ye(x.target.value);a(V=>({...V,contatoComercialTelefone2:p}))},placeholder:"(00) 00000-0000",disabled:o||n})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"contatoComercialTelefone3",children:"Telefone 3"}),e.jsx(b,{id:"contatoComercialTelefone3",name:"contatoComercialTelefone3",value:s.contatoComercialTelefone3||"",onChange:x=>a(p=>({...p,contatoComercialTelefone3:Ye(x.target.value)})),placeholder:"(00) 00000-0000",disabled:o||n})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-md font-medium",children:"Contato Técnico"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 border border-gray-300 rounded-md p-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"contatoTecnicoNome",children:"Nome"}),e.jsx(b,{id:"contatoTecnicoNome",name:"contatoTecnicoNome",value:s.contatoTecnicoNome||"",onChange:x=>a(p=>({...p,contatoTecnicoNome:x.target.value})),placeholder:"Nome do contato técnico",disabled:o||n})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"contatoTecnicoEmail",children:"E-mail"}),e.jsx(b,{id:"contatoTecnicoEmail",name:"contatoTecnicoEmail",type:"email",value:s.contatoTecnicoEmail||"",onChange:x=>a(p=>({...p,contatoTecnicoEmail:x.target.value})),placeholder:"tecnico@exemplo.com",disabled:o||n})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 border border-gray-300 rounded-md p-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"contatoTecnicoTelefone1",children:"Telefone 1"}),e.jsx(b,{id:"contatoTecnicoTelefone1",name:"contatoTecnicoTelefone1",value:s.contatoTecnicoTelefone1||"",onChange:x=>a(p=>({...p,contatoTecnicoTelefone1:Ye(x.target.value)})),placeholder:"(00) 00000-0000",disabled:o||n})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"contatoTecnicoTelefone2",children:"Telefone 2"}),e.jsx(b,{id:"contatoTecnicoTelefone2",name:"contatoTecnicoTelefone2",value:s.contatoTecnicoTelefone2||"",onChange:x=>a(p=>({...p,contatoTecnicoTelefone2:Ye(x.target.value)})),placeholder:"(00) 00000-0000",disabled:o||n})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"contatoTecnicoTelefone3",children:"Telefone 3"}),e.jsx(b,{id:"contatoTecnicoTelefone3",name:"contatoTecnicoTelefone3",value:s.contatoTecnicoTelefone3||"",onChange:x=>a(p=>({...p,contatoTecnicoTelefone3:Ye(x.target.value)})),placeholder:"(00) 00000-0000",disabled:o||n})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-md font-medium",children:"Contato Financeiro"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 border border-gray-300 rounded-md p-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"contatoFinanceiroNome",children:"Nome"}),e.jsx(b,{id:"contatoFinanceiroNome",name:"contatoFinanceiroNome",value:s.contatoFinanceiroNome||"",onChange:x=>a(p=>({...p,contatoFinanceiroNome:x.target.value})),placeholder:"Nome do contato financeiro",disabled:o||n})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"contatoFinanceiroEmail",children:"E-mail"}),e.jsx(b,{id:"contatoFinanceiroEmail",name:"contatoFinanceiroEmail",type:"email",value:s.contatoFinanceiroEmail||"",onChange:x=>a(p=>({...p,contatoFinanceiroEmail:x.target.value})),placeholder:"financeiro@exemplo.com",disabled:o||n})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 border border-gray-300 rounded-md p-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"contatoFinanceiroTelefone1",children:"Telefone 1"}),e.jsx(b,{id:"contatoFinanceiroTelefone1",name:"contatoFinanceiroTelefone1",value:s.contatoFinanceiroTelefone1||"",onChange:x=>a(p=>({...p,contatoFinanceiroTelefone1:Ye(x.target.value)})),placeholder:"(00) 00000-0000",disabled:o||n})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"contatoFinanceiroTelefone2",children:"Telefone 2"}),e.jsx(b,{id:"contatoFinanceiroTelefone2",name:"contatoFinanceiroTelefone2",value:s.contatoFinanceiroTelefone2||"",onChange:x=>a(p=>({...p,contatoFinanceiroTelefone2:Ye(x.target.value)})),placeholder:"(00) 00000-0000",disabled:o||n})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"contatoFinanceiroTelefone3",children:"Telefone 3"}),e.jsx(b,{id:"contatoFinanceiroTelefone3",name:"contatoFinanceiroTelefone3",value:s.contatoFinanceiroTelefone3||"",onChange:x=>a(p=>({...p,contatoFinanceiroTelefone3:Ye(x.target.value)})),placeholder:"(00) 00000-0000",disabled:o||n})]})]})]})]})}),e.jsx(ae,{value:"dados-bancarios",className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Dados Bancários"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx("div",{className:"gap-4 border border-gray-300 rounded-md p-2",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"bancoId",children:"Banco"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex gap-2 flex-1 max-w-[15%]",children:[e.jsx(b,{id:"bancoId",name:"bancoId",placeholder:"000",value:B,onChange:x=>f(x.target.value),onBlur:()=>P(B),disabled:o||n,className:"flex-1"}),e.jsx(He,{children:e.jsxs(Xe,{children:[e.jsx(Qe,{asChild:!0,children:e.jsx(T,{type:"button",variant:"outline",size:"sm",onClick:()=>P(B),disabled:o||n||!B,className:"px-3",children:"🔍"})}),e.jsx(Ze,{children:e.jsx("p",{children:"Buscar banco por Nº"})})]})})]}),e.jsx("div",{className:"flex-1",children:e.jsxs(ge,{value:N?.bancoId?.toString()||"",onValueChange:S,disabled:o||n||A,children:[e.jsx(je,{children:e.jsx(fe,{placeholder:A?"Carregando bancos...":"Selecione um banco"})}),e.jsx(be,{className:"overflow-y-auto",children:Array.isArray(t)&&t.map(x=>e.jsx(Q,{value:x.bancoId.toString(),children:Ts(x)},x.bancoId))})]})})]})]})}),e.jsxs("div",{className:"grid grid-cols-5 gap-4 border border-gray-300 rounded-md p-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"carteira",children:"Carteira"}),e.jsx(b,{id:"carteira",name:"carteira",value:s.carteira||"",onChange:x=>a(p=>({...p,carteira:x.target.value})),placeholder:"COBRANCA",disabled:o||n})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"agencia",children:"Agência"}),e.jsx(b,{id:"agencia",name:"agencia",value:s.agencia||"",onChange:x=>a(p=>({...p,agencia:x.target.value})),placeholder:"123456",disabled:o||n})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"agenciaDigito",children:"Dígito da Agência"}),e.jsx(b,{id:"agenciaDigito",name:"agenciaDigito",value:s.agenciaDigito||"",onChange:x=>a(p=>({...p,agenciaDigito:x.target.value})),placeholder:"5",maxLength:1,disabled:o||n})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"conta",children:"Conta"}),e.jsx(b,{id:"conta",name:"conta",value:s.conta||"",onChange:x=>a(p=>({...p,conta:x.target.value})),placeholder:"12345678",disabled:o||n})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"contaDigito",children:"Dígito da Conta"}),e.jsx(b,{id:"contaDigito",name:"contaDigito",value:s.contaDigito||"",onChange:x=>a(p=>({...p,contaDigito:x.target.value})),placeholder:"9",maxLength:1,disabled:o||n})]})]}),e.jsxs("div",{className:"grid grid-cols-[20%_80%] gap-4 border border-gray-300 rounded-md p-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"cedenteCodigo",children:"Código do Cedente"}),e.jsx(b,{id:"cedenteCodigo",name:"cedenteCodigo",value:s.cedenteCodigo||"",onChange:x=>a(p=>({...p,cedenteCodigo:x.target.value})),placeholder:"123456",disabled:o||n})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"cedenteNome",children:"Nome do Cedente"}),e.jsx(b,{id:"cedenteNome",name:"cedenteNome",value:s.cedenteNome||"",onChange:x=>a(p=>({...p,cedenteNome:x.target.value})),placeholder:"Nome da empresa",disabled:o||n})]})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"chavePix",children:"Chave PIX"}),e.jsx(b,{id:"chavePix",name:"chavePix",value:s.chavePix||"",onChange:x=>a(p=>({...p,chavePix:x.target.value})),placeholder:"empresa@exemplo.com",disabled:o||n})]})]})]})})]})}const sa={entidadeId:0,nome:"",cnpj:"",urlSite:"",urlLogo:"",enderecos:[],entidadeContaBancaria:[],cep:"",logradouro:"",numero:"",complemento:"",bairro:"",cidade:"",cidadeCodigo:"",uf:"",ufCodigo:"",contatoComercialNome:"",contatoComercialTelefone1:"",contatoComercialTelefone2:"",contatoComercialTelefone3:"",contatoComercialEmail:"",contatoTecnicoNome:"",contatoTecnicoTelefone1:"",contatoTecnicoTelefone2:"",contatoTecnicoTelefone3:"",contatoTecnicoEmail:"",contatoFinanceiroNome:"",contatoFinanceiroTelefone1:"",contatoFinanceiroTelefone2:"",contatoFinanceiroTelefone3:"",contatoFinanceiroEmail:"",bancoId:void 0,agencia:"",agenciaDigito:"",conta:"",contaDigito:"",carteira:"",cedenteCodigo:"",cedenteNome:"",chavePix:""};function Vc({title:s="Gestão de Entidades"}){const a=[{key:"entidadeId",header:"Código",render:L=>L.entidadeId||"SEM ID"},{key:"nome",header:"Nome",render:L=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Na,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:L.nome||"SEM NOME"})]})},{key:"cnpj",header:"CNPJ",className:"font-mono text-sm"},{key:"contato",header:"Contato",render:L=>e.jsx("div",{className:"text-sm",children:L.enderecos?.[0]?e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:L.enderecos[0].contatoComercialNome||"Sem nome"}),e.jsx("div",{className:"text-muted-foreground",children:L.enderecos[0].contatoComercialTelefone1||"Sem telefone"})]}):e.jsx("span",{className:"text-muted-foreground",children:"Sem contato"})})},{key:"endereco",header:"Endereço",render:L=>e.jsx("div",{className:"text-sm",children:L.enderecos?.[0]?e.jsxs("div",{children:[e.jsxs("div",{children:[L.enderecos[0].cidade," - ",L.enderecos[0].uf]}),e.jsxs("div",{className:"text-muted-foreground",children:[L.enderecos[0].logradouro,", ",L.enderecos[0].numero]})]}):e.jsx("span",{className:"text-muted-foreground",children:"Sem endereço"})})},{key:"actions",header:"Ações",className:"text-right",render:L=>e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(T,{variant:"outline",size:"sm",onClick:()=>oe(L),disabled:P||$,children:e.jsx(ta,{className:"h-4 w-4"})}),e.jsxs(vs,{children:[e.jsx(gs,{asChild:!0,children:e.jsx(T,{variant:"outline",size:"sm",disabled:P||$,children:e.jsx(ga,{className:"h-4 w-4"})})}),e.jsxs(js,{children:[e.jsxs(fs,{children:[e.jsx(ys,{children:"Excluir Entidade"}),e.jsxs(Cs,{children:['Tem certeza que deseja excluir a entidade "',L.nome,'"? Esta ação não pode ser desfeita.']})]}),e.jsxs(bs,{children:[e.jsx(Is,{disabled:$,children:"Cancelar"}),e.jsx(Ns,{onClick:()=>he(L.entidadeId.toString()),disabled:$,children:$?e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"h-4 w-4 mr-2 animate-spin"}),"Excluindo..."]}):"Excluir"})]})]})]})]})}],[o,n]=r.useState([]),[i,y]=r.useState(""),[t,j]=r.useState(null),[N,v]=r.useState(!1),[B,f]=r.useState(!1),[A,F]=r.useState(!1),[P,S]=r.useState(!1),[$,x]=r.useState(!1),[p,V]=r.useState(1),[U]=r.useState(25),[J,K]=r.useState(sa),[C,l]=r.useState(!1),[R,M]=r.useState(!1),[d,g]=r.useState("dados-basicos"),[k,Y]=r.useState(!1),W=r.useRef(null),pe=r.useMemo(()=>{if(!i||i.length<2)return o;const L=i.toLowerCase();return o.filter(xe=>xe.nome?.toLowerCase().includes(L)||xe.cnpj?.toLowerCase().includes(L)||xe.enderecos?.[0]?.contatoComercialNome?.toLowerCase().includes(L)||xe.enderecos?.[0]?.cidade?.toLowerCase().includes(L))},[o,i]),ye=pe.length,Ce=Math.ceil(ye/U),X=(p-1)*U,se=X+U,z=pe.slice(X,se),I=r.useCallback(async()=>{try{F(!0);const xe=(await ha.findAllView({page:1,limit:1e3})).data.map(Fe=>ha.convertToFrontendFormat(Fe));n(xe)}catch(L){console.error("Erro ao carregar entidades:",L),E.error("Erro ao carregar entidades")}finally{F(!1)}},[]),c=r.useCallback(L=>{y(L),V(1),W.current&&clearTimeout(W.current),W.current=setTimeout(()=>{},300)},[]),w=r.useCallback(L=>{V(L)},[]),O=r.useCallback(()=>{K(sa),l(!1),g("dados-basicos"),Y(!0),v(!0)},[]),H=r.useCallback(()=>{C?M(!0):(v(!1),K(sa),l(!1),Y(!1))},[C]),oe=r.useCallback(L=>{j(L),K(L),l(!1),g("dados-basicos"),Y(!1),f(!0)},[]),ie=r.useCallback(L=>{K(L),l(!0)},[]),Re=r.useCallback(async()=>{try{S(!0);const L=ha.convertToApiFormat(J);await ha.create(L),E.success("Entidade criada com sucesso!"),v(!1),K(sa),l(!1),Y(!1),await I()}catch(L){console.error("Erro ao criar entidade:",L),E.error("Erro ao criar entidade")}finally{S(!1)}},[J,I]),de=r.useCallback(async()=>{if(t)try{S(!0);const L=ha.convertToApiFormat(J);await ha.update(t.entidadeId,L),E.success("Entidade atualizada com sucesso!"),f(!1),j(null),K(sa),l(!1),await I()}catch(L){console.error("Erro ao atualizar entidade:",L),E.error("Erro ao atualizar entidade")}finally{S(!1)}},[t,J,I]),he=r.useCallback(async L=>{try{x(!0),await ha.delete(parseInt(L)),E.success("Entidade excluída com sucesso!"),await I()}catch(xe){console.error("Erro ao excluir entidade:",xe),E.error("Erro ao excluir entidade")}finally{x(!1)}},[I]),Me=r.useCallback(L=>{L==="create"?(v(!1),K(sa),l(!1),Y(!1)):(f(!1),j(null),K(sa),l(!1)),M(!1)},[]);return r.useEffect(()=>{I()},[I]),r.useEffect(()=>()=>{W.current&&clearTimeout(W.current)},[]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold text-white tracking-tight",children:s}),e.jsxs(T,{variant:"outline",onClick:O,children:[e.jsx(da,{className:"mr-2 h-4 w-4"}),"Nova Entidade"]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(qe,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(b,{placeholder:"Pesquisar entidades...",value:i,onChange:L=>c(L.target.value),className:"pl-8",id:"searchTerm"})]})}),e.jsx(Ba,{title:"Lista de Entidades",data:z,columns:a,isLoading:A,loadingText:"Carregando entidades...",emptyText:"Nenhuma entidade encontrada",keyExtractor:L=>L.entidadeId||`entity-${Math.random()}`}),Ce>1&&e.jsxs("div",{className:"flex items-center justify-between px-2 py-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Mostrando ",X+1," a ",Math.min(se,ye)," de"," ",ye," entidades"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>w(p-1),disabled:p===1||A,children:[e.jsx(Ra,{className:"h-4 w-4"}),"Anterior"]}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,Ce)},(L,xe)=>{let Fe;return Ce<=5||p<=3?Fe=xe+1:p>=Ce-2?Fe=Ce-4+xe:Fe=p-2+xe,e.jsx(T,{variant:p===Fe?"default":"outline",size:"sm",onClick:()=>w(Fe),disabled:A,className:"w-8 h-8 p-0",children:Fe},Fe)})}),e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>w(p+1),disabled:p===Ce||A,children:["Próxima",e.jsx(Fa,{className:"h-4 w-4"})]})]})]}),e.jsx(Ie,{open:N,onOpenChange:L=>{if(L){v(!0);return}C?M(!0):(v(!1),K(sa),l(!1),Y(!1))},children:e.jsxs(we,{className:"min-w-[65vw] min-h-[35vw] max-h-[35vw] overflow-y-auto",children:[e.jsxs(Ee,{children:[e.jsx(Se,{children:"Nova Entidade"}),e.jsx(Te,{children:"Preencha as informações da nova entidade. Os campos marcados com * são obrigatórios."})]}),e.jsx(Qs,{formData:J,setFormData:ie,isCreating:k,isUpdating:P,activeTab:d,setActiveTab:g}),e.jsxs(ze,{children:[e.jsx(T,{variant:"outline",onClick:H,disabled:P,children:"Cancelar"}),e.jsx(T,{onClick:Re,disabled:P,children:P?e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"mr-2 h-4 w-4 animate-spin"}),"Criando..."]}):"Criar Entidade"})]})]})}),e.jsx(Ie,{open:B,onOpenChange:L=>{if(L){f(!0);return}C?M(!0):(f(!1),j(null),l(!1))},children:e.jsxs(we,{className:"min-w-[65vw] min-h-[35vw] max-h-[35vw] overflow-y-auto",children:[e.jsxs(Ee,{children:[e.jsx(Se,{children:"Editar Entidade"}),e.jsx(Te,{children:"Atualize as informações da entidade. Os campos marcados com * são obrigatórios."})]}),e.jsx(Qs,{formData:J,setFormData:ie,isCreating:k,isUpdating:P,activeTab:d,setActiveTab:g}),e.jsxs(ze,{children:[e.jsx(T,{variant:"outline",onClick:()=>Me("edit"),disabled:P,children:"Cancelar"}),e.jsx(T,{onClick:de,disabled:P,children:P?e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"mr-2 h-4 w-4 animate-spin"}),"Atualizando..."]}):"Atualizar Entidade"})]})]})}),e.jsx(Ie,{open:R,onOpenChange:M,children:e.jsxs(we,{children:[e.jsxs(Ee,{children:[e.jsx(Se,{children:"Descartar alterações?"}),e.jsx(Te,{children:"Você tem alterações não salvas. Tem certeza que deseja descartar essas alterações?"})]}),e.jsxs(ze,{children:[e.jsx(T,{variant:"outline",onClick:()=>M(!1),children:"Cancelar"}),e.jsx(T,{variant:"destructive",onClick:()=>{Me(N?"create":"edit")},children:"Descartar"})]})]})})]})}function Uc({title:s}){return e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-6",children:s}),e.jsx(Z,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(tr,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:s}),e.jsx("p",{className:"text-muted-foreground",children:"Esta funcionalidade será implementada em breve!"})]})})})]})}class qc{async findAll(){return q("/socios")}async findOne(a){return q(`/socios/${a}`)}async create(a){return q("/socios",{method:"POST",body:JSON.stringify(a)})}async update(a,o){return q(`/socios/${a}`,{method:"PATCH",body:JSON.stringify(o)})}async remove(a){return q(`/socios/${a}`,{method:"DELETE"})}async getBancos(){return q("/socios/bancos")}convertToApiFormat(a){return{pessoa:{pessoaId:a.pessoa.pessoaId||void 0,nome:a.pessoa.nome,razao:a.pessoa.razao||void 0,documento:a.pessoa.documento,tipo:a.pessoa.tipo,inscricaoEstadual:a.pessoa.inscricaoEstadual||void 0,inscricaoMunicipal:a.pessoa.inscricaoMunicipal||void 0},endereco:a.endereco&&(a.endereco.cep||a.endereco.endereco||a.endereco.numero||a.endereco.bairro||a.endereco.cidade||a.endereco.uf)?{cep:a.endereco.cep||void 0,logradouro:a.endereco.endereco||void 0,numero:a.endereco.numero||void 0,complemento:a.endereco.complemento||void 0,bairro:a.endereco.bairro||void 0,cidade:a.endereco.cidade||void 0,cidadeCodigo:a.endereco.cidadeCodigo?parseInt(a.endereco.cidadeCodigo):void 0,uf:a.endereco.uf||void 0,ufCodigo:a.endereco.ufCodigo?parseInt(a.endereco.ufCodigo):void 0}:void 0,dadosBancarios:a.dadosBancarios&&(a.dadosBancarios.dadosBancariosId||a.dadosBancarios.bancoId||a.dadosBancarios.agencia||a.dadosBancarios.conta||a.dadosBancarios.contaTipo||a.dadosBancarios.chavePix||a.dadosBancarios.contaDigito||a.dadosBancarios.agenciaDigito)?{dadosBancariosId:a.dadosBancarios.dadosBancariosId||void 0,...a.dadosBancarios.bancoId&&{bancoId:Number(a.dadosBancarios.bancoId)},agencia:a.dadosBancarios.agencia||void 0,conta:a.dadosBancarios.conta||void 0,contaTipo:a.dadosBancarios.contaTipo||void 0,chavePix:a.dadosBancarios.chavePix||void 0,contaDigito:a.dadosBancarios.contaDigito||void 0,agenciaDigito:a.dadosBancarios.agenciaDigito||void 0}:void 0,socioInfo:a.socioInfo?{percRateio:Number(a.socioInfo.percRateio)||0}:void 0}}convertCreateUpdateToFrontendFormat(a){return a.socio}}const Ke=new qc,pa={pessoa:{nome:"",razao:"",documento:"",tipo:"PF",inscricaoEstadual:"",inscricaoMunicipal:""},endereco:{cep:"",endereco:"",numero:"",complemento:"",bairro:"",cidade:"",uf:""},dadosBancarios:{bancoId:void 0,agencia:"",conta:"",contaTipo:1,chavePix:"",contaDigito:"",agenciaDigito:""},socioInfo:{percRateio:0}},Gc=[{value:1,label:"Conta Corrente"},{value:2,label:"Conta Poupança"}],Jc=[{value:"PF",label:"Pessoa Física"},{value:"PJ",label:"Pessoa Jurídica"}],Hc=Wn("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Ae({className:s,variant:a,asChild:o=!1,...n}){const i=o?_n:"span";return e.jsx(i,{"data-slot":"badge",className:me(Hc({variant:a}),s),...n})}class Yc{async search(a){const o=new URLSearchParams;a.documento&&o.append("documento",a.documento),a.nome&&o.append("nome",a.nome),a.tipo&&o.append("tipo",a.tipo),a.limit&&o.append("limit",a.limit.toString()),a.offset&&o.append("offset",a.offset.toString());const n=o.toString(),i=n?`/pessoa/search?${n}`:"/pessoa/search";return q(i)}async findOne(a){return q(`/pessoa/${a}`)}}const en=new Yc;function wa({isOpen:s,onClose:a,onSelectPerson:o,title:n="Buscar Pessoa",excludePersonId:i}){const[y,t]=r.useState({documento:"",nome:"",tipo:void 0,limit:20,offset:0}),[j,N]=r.useState([]),[v,B]=r.useState(!1),[f,A]=r.useState(0),[F,P]=r.useState(1),S=r.useCallback(async()=>{if(!y.documento&&!y.nome){E.error("Informe pelo menos o documento ou nome para pesquisar");return}B(!0);try{const R=await en.search({...y,offset:(F-1)*(y.limit||20)});let M=R.data;i&&(M=R.data.filter(d=>d.pessoaId!==i)),N(M),A(R.total)}catch(R){console.error("Erro ao buscar pessoas:",R),E.error("Erro ao buscar pessoas"),N([]),A(0)}finally{B(!1)}},[y,F,i]),$=()=>{P(1),S()},x=R=>{o(R),a()},p=R=>{const M=y.tipo==="PF"?ia(R):De(R);t(d=>({...d,documento:M}))},V=R=>{t(M=>({...M,tipo:R,documento:""}))},U=R=>{R.key==="Enter"&&$()},J=Math.ceil(f/(y.limit||20)),K=(R,M)=>M==="PF"?ia(R):De(R),C=R=>R==="PF"?e.jsx(Oe,{className:"h-4 w-4"}):e.jsx(fo,{className:"h-4 w-4"}),l=R=>R==="PF"?"Pessoa Física":"Pessoa Jurídica";return e.jsx(Ie,{open:s,onOpenChange:a,children:e.jsxs(we,{className:"max-w-4xl max-h-[80vh] overflow-hidden flex flex-col",children:[e.jsxs(Ee,{children:[e.jsxs(Se,{className:"flex items-center gap-2",children:[e.jsx(qe,{className:"h-5 w-5"}),n]}),e.jsx(Te,{children:"Busque e selecione uma pessoa existente para preencher automaticamente os dados do formulário"})]}),e.jsxs("div",{className:"space-y-4 flex-1 overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border rounded-lg bg-gray-50",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"tipo",children:"Tipo"}),e.jsxs(ge,{value:y.tipo||"",onValueChange:V,children:[e.jsx(je,{children:e.jsx(fe,{placeholder:"Selecione o tipo"})}),e.jsxs(be,{children:[e.jsx(Q,{value:"PF",children:"Pessoa Física"}),e.jsx(Q,{value:"PJ",children:"Pessoa Jurídica"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"documento",children:"Documento"}),e.jsx(b,{id:"documento",placeholder:y.tipo==="PF"?"000.000.000-00":y.tipo==="PJ"?"00.000.000/0000-00":"CPF ou CNPJ",value:y.documento||"",onChange:R=>p(R.target.value),onKeyPress:U,maxLength:y.tipo==="PF"?14:18})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"nome",children:"Nome"}),e.jsx(b,{id:"nome",placeholder:"Nome ou razão social",value:y.nome||"",onChange:R=>t(M=>({...M,nome:R.target.value})),onKeyPress:U})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs(T,{onClick:$,disabled:v||!y.documento&&!y.nome,className:"flex items-center gap-2",children:[e.jsx(qe,{className:"h-4 w-4"}),v?"Buscando...":"Buscar"]})}),e.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col",children:[j.length>0&&e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[f," pessoa(s) encontrada(s)"]}),J>1&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{variant:"outline",size:"sm",onClick:()=>P(R=>Math.max(1,R-1)),disabled:F===1||v,children:"Anterior"}),e.jsxs("span",{className:"text-sm",children:["Página ",F," de ",J]}),e.jsx(T,{variant:"outline",size:"sm",onClick:()=>P(R=>Math.min(J,R+1)),disabled:F===J||v,children:"Próxima"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto space-y-2",children:v?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):j.length===0?e.jsx("div",{className:"flex items-center justify-center py-8 text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(na,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"Nenhuma pessoa encontrada"}),e.jsx("p",{className:"text-sm",children:"Tente ajustar os filtros de busca"})]})}):j.map(R=>e.jsx("div",{className:"border rounded-lg p-4 hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>x(R),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:C(R.tipo)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-medium text-gray-900 truncate",children:R.nome}),e.jsx(Ae,{variant:"secondary",className:"text-xs",children:l(R.tipo)})]}),R.razao&&R.tipo==="PJ"&&e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:R.razao}),e.jsx("p",{className:"text-sm text-gray-500",children:K(R.documento,R.tipo)}),R.enderecos&&R.enderecos.length>0&&e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[R.enderecos[0].cidade,","," ",R.enderecos[0].uf]})]})]}),e.jsx(T,{size:"sm",onClick:M=>{M.stopPropagation(),x(R)},children:"Selecionar"})]})},R.pessoaId))})]})]})]})})}function Zs({formData:s,setFormData:a,isCreating:o,isUpdating:n,activeTab:i,setActiveTab:y}){const[t,j]=r.useState([]),[N,v]=r.useState(null),[B,f]=r.useState(""),[A,F]=r.useState(!1),[P,S]=r.useState(!1);r.useEffect(()=>{$()},[]),r.useEffect(()=>{if(s.dadosBancarios?.bancoId&&t.length>0){const d=t.find(g=>g.bancoId===s.dadosBancarios?.bancoId);d&&(v(d),f(d.bancoId.toString()))}else s.dadosBancarios?.bancoId||(v(null),f(""))},[s.dadosBancarios?.bancoId,t]);const $=async()=>{F(!0);try{const d=await Da.findAll();j(Array.isArray(d.data)?d.data:[])}catch(d){console.error("Erro ao carregar bancos:",d),j([])}finally{F(!1)}},x=async d=>{if(!Ss(d)){v(null),a({...s,dadosBancarios:{...s.dadosBancarios,bancoId:void 0}});return}const g=Number(d),k=t.find(Y=>Y.bancoId===g);k?(v(k),a({...s,dadosBancarios:{...s.dadosBancarios,bancoId:k.bancoId}})):(v(null),a({...s,dadosBancarios:{...s.dadosBancarios,bancoId:void 0}}))},p=d=>{const g=t.find(k=>k.bancoId===Number(d));g&&(v(g),f(g.bancoId.toString()),a({...s,dadosBancarios:{...s.dadosBancarios,bancoId:g.bancoId}}))},V=async()=>{const d=s.endereco?.cep||"";if(!d||d.length<8){E.error("CEP deve ter pelo menos 8 dígitos");return}try{const g=d.replace(/\D/g,""),Y=await(await fetch(`https://viacep.com.br/ws/${g}/json/`)).json();if(Y.erro){E.error("CEP não encontrado");return}a({...s,endereco:{...s.endereco,cep:Y.cep,endereco:Y.logradouro,bairro:Y.bairro,cidade:Y.localidade,uf:Y.uf,cidadeCodigo:Y.ibge,ufCodigo:Y.ibge?Y.ibge.substring(0,2):void 0}}),setTimeout(()=>{const W=document.querySelector('input[name="numero"]');W&&W.focus()},100),E.success("CEP encontrado com sucesso!")}catch(g){console.error("Erro ao buscar CEP:",g),E.error("Erro ao buscar CEP")}},U=(d,g)=>{a({...s,pessoa:{...s.pessoa,[d]:g}})},J=(d,g)=>{a({...s,endereco:{...s.endereco,[d]:g}})},K=(d,g)=>{a({...s,dadosBancarios:{...s.dadosBancarios,[d]:g}})},C=(d,g)=>{a({...s,socioInfo:{...s.socioInfo,[d]:g}})},l=d=>{const g=s.pessoa.tipo==="PF"?ia(d):De(d);U("documento",g)},R=d=>{const g=ra(d);J("cep",g)},M=d=>{const g=s.dadosBancarios;if(a({...s,pessoa:{pessoaId:d.pessoaId,nome:d.nome,razao:d.razao||null,documento:d.documento,tipo:d.tipo,inscricaoEstadual:d.inscricaoEstadual||null,inscricaoMunicipal:d.inscricaoMunicipal||null},endereco:d.enderecos&&d.enderecos.length>0?{cep:d.enderecos[0].cep,endereco:d.enderecos[0].logradouro||null,numero:d.enderecos[0].numero||null,complemento:d.enderecos[0].complemento||null,bairro:d.enderecos[0].bairro||null,cidade:d.enderecos[0].cidade||null,uf:d.enderecos[0].uf||null,cidadeCodigo:d.enderecos[0].cidadeCodigo||null,ufCodigo:d.enderecos[0].ufCodigo||null}:void 0,dadosBancarios:d.dadosBancarios&&d.dadosBancarios.length>0?{dadosBancariosId:d.dadosBancarios[0].dadosBancariosId,bancoId:d.dadosBancarios[0].bancoId,agencia:d.dadosBancarios[0].agencia,conta:d.dadosBancarios[0].conta,contaTipo:d.dadosBancarios[0].contaTipo,chavePix:d.dadosBancarios[0].chavePix||null,contaDigito:d.dadosBancarios[0].contaDigito||null,agenciaDigito:d.dadosBancarios[0].agenciaDigito||null}:g}),d.dadosBancarios&&d.dadosBancarios.length>0){const k=t.find(Y=>Y.bancoId===d.dadosBancarios[0].bancoId);k&&(v(k),f(k.bancoId.toString()))}E.success("Dados da pessoa carregados com sucesso!")};return e.jsxs(e.Fragment,{children:[e.jsxs(ua,{value:i,onValueChange:y,className:"w-full",children:[e.jsxs(ma,{className:"grid w-full grid-cols-4",children:[e.jsxs(ee,{value:"pessoa",className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"h-4 w-4"}),"Pessoa"]}),e.jsxs(ee,{value:"endereco",className:"flex items-center gap-2",children:[e.jsx(qa,{className:"h-4 w-4"}),"Endereço"]}),e.jsxs(ee,{value:"dados-bancarios",className:"flex items-center gap-2",children:[e.jsx(Ha,{className:"h-4 w-4"}),"Dados Bancários"]}),e.jsxs(ee,{value:"socio-info",className:"flex items-center gap-2",children:[e.jsx(bo,{className:"h-4 w-4"}),"Participação"]})]}),e.jsx(ae,{value:"pessoa",className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Dados da Pessoa"}),e.jsxs(T,{type:"button",variant:"outline",size:"sm",onClick:()=>S(!0),className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"h-4 w-4"}),"Buscar Pessoa"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 border border-gray-300 rounded-md p-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"tipoPessoa",children:"Tipo *"}),e.jsxs(ge,{name:"tipoPessoa",value:s.pessoa.tipo,onValueChange:d=>U("tipo",d),children:[e.jsx(je,{id:"tipoPessoa",children:e.jsx(fe,{placeholder:"Selecione o tipo"})}),e.jsx(be,{children:Jc?.map(d=>e.jsx(Q,{value:d.value||"default",children:d.label},d.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"documento",children:"Documento *"}),e.jsx(b,{id:"documento",placeholder:s.pessoa.tipo==="PF"?"000.000.000-00":"00.000.000/0000-00",value:s.pessoa.documento,onChange:d=>l(d.target.value),maxLength:s.pessoa.tipo==="PF"?14:18})]})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"nome",children:"Nome *"}),e.jsx(b,{id:"nome",placeholder:"Nome completo",value:s.pessoa.nome,onChange:d=>U("nome",d.target.value)})]}),s.pessoa.tipo==="PJ"&&e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"razao",children:"Razão Social"}),e.jsx(b,{id:"razao",placeholder:"Razão social",value:s.pessoa.razao||"",onChange:d=>U("razao",d.target.value)})]}),s.pessoa.tipo==="PJ"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 border border-gray-300 rounded-md p-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"inscricaoEstadual",children:"Inscrição Estadual"}),e.jsx(b,{id:"inscricaoEstadual",placeholder:"Inscrição estadual",value:s.pessoa.inscricaoEstadual||"",onChange:d=>U("inscricaoEstadual",d.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"inscricaoMunicipal",children:"Inscrição Municipal"}),e.jsx(b,{id:"inscricaoMunicipal",placeholder:"Inscrição municipal",value:s.pessoa.inscricaoMunicipal||"",onChange:d=>U("inscricaoMunicipal",d.target.value)})]})]})]})}),e.jsx(ae,{value:"endereco",className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Endereço"}),e.jsx("div",{className:"space-y-2 border border-gray-300 rounded-md p-2 max-w-[20%]",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(We,{id:"cep",name:"cep",label:"CEP",value:s.endereco?.cep||"",onChange:d=>{const g=ra(d.target.value);R(g)},placeholder:"00000-000",isRequired:!0,validationMessage:"CEP é obrigatório",customValidation:d=>d.replace(/\D/g,"").length===8,className:"flex-1"}),e.jsx(He,{children:e.jsxs(Xe,{children:[e.jsx(Qe,{asChild:!0,children:e.jsx(T,{type:"button",variant:"outline",size:"sm",onClick:V,disabled:!s.endereco?.cep||s.endereco.cep.replace(/\D/g,"").length!==8,className:"px-3",children:"🔍"})}),e.jsx(Ze,{children:e.jsx("p",{children:"Pesquisar CEP"})})]})})]})}),e.jsxs("div",{className:"grid grid-cols-[80%_15%] gap-4 border border-gray-300 rounded-md p-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"endereco",children:"Logradouro"}),e.jsx(b,{id:"endereco",placeholder:"Rua, Avenida, etc.",value:s.endereco?.endereco||"",onChange:d=>J("endereco",d.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"numero",children:"Número"}),e.jsx(b,{id:"numero",name:"numero",placeholder:"123",value:s.endereco?.numero||"",onChange:d=>J("numero",d.target.value)})]})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"complemento",children:"Complemento"}),e.jsx(b,{id:"complemento",placeholder:"Apartamento, sala, etc.",value:s.endereco?.complemento||"",onChange:d=>J("complemento",d.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 border border-gray-300 rounded-md p-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"bairro",children:"Bairro"}),e.jsx(b,{id:"bairro",placeholder:"Bairro",value:s.endereco?.bairro||"",onChange:d=>J("bairro",d.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"cidade",children:"Cidade"}),e.jsx(b,{id:"cidade",placeholder:"Cidade",value:s.endereco?.cidade||"",onChange:d=>J("cidade",d.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"uf",children:"UF"}),e.jsx(b,{id:"uf",placeholder:"SP",value:s.endereco?.uf||"",onChange:d=>J("uf",d.target.value),maxLength:2})]})]})]})}),e.jsx(ae,{value:"dados-bancarios",className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Dados Bancários"}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"bancoId",children:"Banco"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex gap-2 flex-1 max-w-[20%]",children:[e.jsx(b,{id:"bancoId",name:"bancoId",placeholder:"000",value:B,onChange:d=>f(d.target.value),onBlur:()=>x(B),disabled:o||n,className:"flex-1"}),e.jsx(He,{children:e.jsxs(Xe,{children:[e.jsx(Qe,{asChild:!0,children:e.jsx(T,{type:"button",variant:"outline",size:"sm",onClick:()=>x(B),disabled:o||n||!B,className:"px-3",children:"🔍"})}),e.jsx(Ze,{children:e.jsx("p",{children:"Buscar banco por Nº"})})]})})]}),e.jsx("div",{className:"flex-1",children:e.jsxs(ge,{value:N?.bancoId?.toString()||"",onValueChange:p,disabled:o||n||A,children:[e.jsx(je,{children:e.jsx(fe,{placeholder:A?"Carregando bancos...":"Selecione um banco"})}),e.jsx(be,{className:"max-h-[200px] overflow-y-auto",children:Array.isArray(t)&&t.map(d=>e.jsx(Q,{value:d.bancoId.toString(),children:Ts(d)},d.bancoId))})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 border border-gray-300 rounded-md p-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"agencia",children:"Agência"}),e.jsx(b,{id:"agencia",value:s.dadosBancarios?.agencia||"",onChange:d=>K("agencia",d.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"agenciaDigito",children:"Dígito da Agência"}),e.jsx(b,{id:"agenciaDigito",value:s.dadosBancarios?.agenciaDigito||"",onChange:d=>K("agenciaDigito",d.target.value),maxLength:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"conta",children:"Conta"}),e.jsx(b,{id:"conta",value:s.dadosBancarios?.conta||"",onChange:d=>K("conta",d.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"contaDigito",children:"Dígito da Conta"}),e.jsx(b,{id:"contaDigito",value:s.dadosBancarios?.contaDigito||"",onChange:d=>K("contaDigito",d.target.value),maxLength:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"contaTipo",children:"Tipo de Conta"}),e.jsxs(ge,{value:s.dadosBancarios?.contaTipo?.toString()||"",onValueChange:d=>K("contaTipo",parseInt(d)),children:[e.jsx(je,{children:e.jsx(fe,{placeholder:"Selecione o tipo de conta"})}),e.jsx(be,{children:Gc?.map(d=>e.jsx(Q,{value:d.value.toString(),children:d.label},d.value))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"chavePix",children:"Chave PIX"}),e.jsx(b,{id:"chavePix",placeholder:"Chave PIX",value:s.dadosBancarios?.chavePix||"",onChange:d=>K("chavePix",d.target.value)})]})]})}),e.jsx(ae,{value:"socio-info",className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Participação"}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2 max-w-[30%]",children:[e.jsx(u,{htmlFor:"percRateio",children:"Percentual de Rateio (%)"}),e.jsx(b,{id:"percRateio",type:"number",min:"0",max:"100",step:"0.01",placeholder:"0.00",value:s.socioInfo?.percRateio||0,onChange:d=>C("percRateio",parseFloat(d.target.value)||0)})]})]})})]}),e.jsx(wa,{isOpen:P,onClose:()=>S(!1),onSelectPerson:M,title:"Buscar Pessoa para Sócio"})]})}function Kc({title:s="Gestão de Sócios"}){const a=[{key:"pessoa.nome",header:"Nome",render:m=>e.jsx("span",{className:"font-medium",children:m.pessoa.nome})},{key:"pessoa.documento",header:"Documento",render:m=>m.pessoa.documento},{key:"pessoa.tipo",header:"Tipo",render:m=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${m.pessoa.tipo==="PF"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:m.pessoa.tipo})},{key:"percRateio",header:"% Rateio",render:m=>`${m.percRateio}%`},{key:"actions",header:"Ações",className:"text-right",render:m=>e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(T,{variant:"outline",size:"sm",onClick:()=>O(m),children:e.jsx(ta,{className:"w-4 h-4"})}),e.jsxs(vs,{children:[e.jsx(gs,{asChild:!0,children:e.jsx(T,{variant:"outline",size:"sm",children:e.jsx(ga,{className:"h-4 w-4"})})}),e.jsxs(js,{children:[e.jsxs(fs,{children:[e.jsx(ys,{children:"Confirmar Exclusão"}),e.jsxs(Cs,{children:['Tem certeza que deseja remover o sócio "',m.pessoa.nome,'"? Esta ação não pode ser desfeita.']})]}),e.jsxs(bs,{children:[e.jsx(Is,{children:"Cancelar"}),e.jsxs(Ns,{onClick:()=>oe(m),disabled:p,children:[p&&e.jsx(Ne,{className:"mr-2 h-4 w-4 animate-spin"}),"Remover"]})]})]})]})]})}],[o,n]=r.useState([]),[i,y]=r.useState(""),[t,j]=r.useState(null),[N,v]=r.useState(!1),[B,f]=r.useState(!1),[A,F]=r.useState(!1),[P,S]=r.useState(!1),[$,x]=r.useState(!1),[p,V]=r.useState(!1),[U,J]=r.useState("pessoa"),[K,C]=r.useState(!1),[l,R]=r.useState(!1),[M,d]=r.useState(1),[g,k]=r.useState(1),[Y,W]=r.useState(0),[pe]=r.useState(25),ye=r.useRef(null),Ce=r.useRef(null);r.useEffect(()=>{(N||B)&&J("pessoa")},[N,B]),r.useEffect(()=>{N&&(se(pa),C(!1))},[N]),r.useEffect(()=>{t&&(se({pessoa:{nome:t.pessoa.nome,razao:t.pessoa.razao,documento:t.pessoa.documento,tipo:t.pessoa.tipo,inscricaoEstadual:t.pessoa.inscricaoEstadual,inscricaoMunicipal:t.pessoa.inscricaoMunicipal},endereco:t.endereco?{cep:t.endereco.cep,endereco:t.endereco.endereco,numero:t.endereco.numero,complemento:t.endereco.complemento,bairro:t.endereco.bairro,cidade:t.endereco.cidade,uf:t.endereco.uf}:void 0,dadosBancarios:t.dadosBancarios?{dadosBancariosId:t.dadosBancarios.dadosBancariosId,bancoId:t.dadosBancarios.bancoId,agencia:t.dadosBancarios.agencia,conta:t.dadosBancarios.conta,contaTipo:t.dadosBancarios.contaTipo,chavePix:t.dadosBancarios.chavePix,contaDigito:t.dadosBancarios.contaDigito,agenciaDigito:t.dadosBancarios.agenciaDigito}:void 0,socioInfo:{percRateio:t.percRateio}}),C(!1))},[t]);const[X,se]=r.useState(pa),z=r.useCallback(m=>{y(m),ye.current&&clearTimeout(ye.current),ye.current=window.setTimeout(()=>{I()},500)},[]),I=r.useCallback(async()=>{F(!0);try{const m=await Ke.findAll();n(m.data),W(m.total),k(Math.ceil(m.total/pe))}catch(m){console.error("Erro ao carregar sócios:",m),E.error("Erro ao carregar sócios")}finally{F(!1)}},[pe]);r.useEffect(()=>{I()},[I]);const c=r.useMemo(()=>o,[o]),w=async()=>{if(!X.pessoa.nome||!X.pessoa.documento){E.error("Por favor, preencha todos os campos obrigatórios");return}S(!0);try{const m=Ke.convertToApiFormat(X),le=await Ke.create(m),ke=Ke.convertCreateUpdateToFrontendFormat(le);n(Ge=>[...Ge,ke]),se(pa),C(!1),v(!1),E.success("Sócio criado com sucesso!")}catch(m){console.error("Erro ao criar sócio:",m);const le=m instanceof Error?m.message:"Erro ao criar sócio";E.error(le)}finally{S(!1)}},O=m=>{j(m),se({pessoa:{nome:m.pessoa.nome,razao:m.pessoa.razao,documento:m.pessoa.documento,tipo:m.pessoa.tipo,inscricaoEstadual:m.pessoa.inscricaoEstadual,inscricaoMunicipal:m.pessoa.inscricaoMunicipal},endereco:m.endereco?{cep:m.endereco.cep,endereco:m.endereco.endereco,numero:m.endereco.numero,complemento:m.endereco.complemento,bairro:m.endereco.bairro,cidade:m.endereco.cidade,uf:m.endereco.uf}:void 0,dadosBancarios:m.dadosBancarios?{dadosBancariosId:m.dadosBancarios.dadosBancariosId,bancoId:m.dadosBancarios.bancoId,agencia:m.dadosBancarios.agencia,conta:m.dadosBancarios.conta,contaTipo:m.dadosBancarios.contaTipo,chavePix:m.dadosBancarios.chavePix,contaDigito:m.dadosBancarios.contaDigito,agenciaDigito:m.dadosBancarios.agenciaDigito}:void 0,socioInfo:{percRateio:m.percRateio}}),J("pessoa"),C(!1),f(!0)},H=async()=>{if(t){x(!0);try{const m=Ke.convertToApiFormat(X),le=await Ke.update(t.socioInfoId,m),ke=Ke.convertCreateUpdateToFrontendFormat(le);n(Ge=>Ge.map(aa=>aa.socioInfoId===t.socioInfoId?ke:aa)),j(null),se(pa),C(!1),f(!1),E.success("Sócio atualizado com sucesso!")}catch(m){console.error("Erro ao atualizar sócio:",m);const le=m instanceof Error?m.message:"Erro ao atualizar sócio";E.error(le)}finally{x(!1)}}},oe=async m=>{V(!0);try{await Ke.remove(m.socioInfoId),n(le=>le.filter(ke=>ke.socioInfoId!==m.socioInfoId)),E.success("Sócio removido com sucesso!")}catch(le){console.error("Erro ao remover sócio:",le);const ke=le instanceof Error?le.message:"Erro ao remover sócio";E.error(ke)}finally{V(!1)}},ie=m=>{se(m),C(!0)},Re=r.useCallback(m=>{K?R(!0):(m==="create"?(v(!1),se(pa)):(f(!1),j(null)),C(!1))},[K]),de=r.useCallback(()=>{R(!1),C(!1),v(!1),f(!1),j(null),se(pa)},[]),he=r.useCallback(()=>{R(!1)},[]),Me=m=>{d(m)},L=(M-1)*pe,xe=L+pe,Fe=c.slice(L,xe);return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:s}),e.jsxs(Ie,{open:N,onOpenChange:m=>{if(m){v(!0);return}K?R(!0):(v(!1),se(pa),C(!1))},children:[e.jsx(Ro,{asChild:!0,children:e.jsxs(T,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(da,{className:"h-4 w-4"}),"Novo Sócio"]})}),e.jsxs(we,{className:"min-w-[65vw] min-h-[35vw] max-h-[35vw] overflow-y-auto",children:[e.jsxs(Ee,{children:[e.jsx(Se,{children:"Criar Novo Sócio"}),e.jsx(Te,{children:"Preencha as informações do sócio. Os campos marcados com * são obrigatórios."})]}),e.jsx(Zs,{formData:X,setFormData:ie,isCreating:P,isUpdating:!1,activeTab:U,setActiveTab:J}),e.jsxs(ze,{children:[e.jsx(T,{variant:"outline",onClick:()=>Re("create"),children:"Cancelar"}),e.jsxs(T,{onClick:w,disabled:P,children:[P&&e.jsx(Ne,{className:"mr-2 h-4 w-4 animate-spin"}),"Criar Sócio"]})]})]})]})]}),e.jsx("div",{className:"flex items-center space-x-2 mb-4",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(qe,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(b,{ref:Ce,placeholder:"Pesquisar sócios...",value:i,onChange:m=>z(m.target.value),className:"pl-8",id:"searchTerm"})]})}),e.jsx(Ba,{title:"Lista de Sócios",data:Fe,columns:a,isLoading:A,loadingText:"Carregando sócios...",emptyText:"Nenhum sócio encontrado",keyExtractor:m=>m.socioInfoId}),g>1&&e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Mostrando ",L+1," a ",Math.min(xe,Y)," de"," ",Y," sócios"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(T,{variant:"outline",size:"sm",onClick:()=>Me(M-1),disabled:M===1,children:e.jsx(Ra,{className:"h-4 w-4"})}),e.jsxs("span",{className:"text-sm",children:["Página ",M," de ",g]}),e.jsx(T,{variant:"outline",size:"sm",onClick:()=>Me(M+1),disabled:M===g,children:e.jsx(Fa,{className:"h-4 w-4"})})]})]}),e.jsx(Ie,{open:B,onOpenChange:m=>{m?f(!0):K?R(!0):(f(!1),j(null),C(!1))},children:e.jsxs(we,{className:"min-w-[65vw] min-h-[35vw] max-h-[35vw] overflow-y-auto",children:[e.jsxs(Ee,{children:[e.jsx(Se,{children:"Editar Sócio"}),e.jsx(Te,{children:"Atualize as informações do sócio. Os campos marcados com * são obrigatórios."})]}),e.jsx(Zs,{formData:X,setFormData:ie,isCreating:!1,isUpdating:$,activeTab:U,setActiveTab:J}),e.jsxs(ze,{children:[e.jsx(T,{variant:"outline",onClick:()=>Re("edit"),children:"Cancelar"}),e.jsxs(T,{onClick:H,disabled:$,children:[$&&e.jsx(Ne,{className:"mr-2 h-4 w-4 animate-spin"}),"Atualizar Sócio"]})]})]})}),e.jsx(Ie,{open:l,onOpenChange:R,children:e.jsxs(we,{children:[e.jsxs(Ee,{children:[e.jsx(Se,{children:"Mudanças não salvas"}),e.jsx(Te,{children:"Você tem mudanças não salvas. Tem certeza que deseja fechar sem salvar?"})]}),e.jsxs(ze,{children:[e.jsx(T,{variant:"outline",onClick:he,children:"Cancelar"}),e.jsx(T,{variant:"destructive",onClick:de,children:"Fechar sem salvar"})]})]})})]})}const Pa={pessoa:{nome:"",razao:"",documento:"",tipo:"PF",inscricaoEstadual:"",inscricaoMunicipal:""},endereco:{cep:"",endereco:"",numero:"",complemento:"",bairro:"",cidade:"",uf:"",contatoComercialTelefone1:"",contatoComercialTelefone2:"",contatoComercialEmail:""},responsavel:{nome:"",razao:"",documento:"",tipo:"PF",inscricaoEstadual:"",inscricaoMunicipal:""},enderecoResponsavel:{cep:"",endereco:"",numero:"",complemento:"",bairro:"",cidade:"",uf:""},clienteInfo:{}},ds=[{value:"PF",label:"Pessoa Física"},{value:"PJ",label:"Pessoa Jurídica"}];function Ds({isOpen:s,onClose:a,onSubmit:o,formData:n,setFormData:i,isCreating:y}){const[t,j]=r.useState(!1),[N,v]=r.useState(!1),[B,f]=r.useState(!1),A=(l,R)=>{i({...n,pessoa:{...n.pessoa,[l]:R}})},F=(l,R)=>{i({...n,endereco:{...n.endereco,[l]:R}})},P=(l,R)=>{i({...n,responsavel:{nome:"",documento:"",tipo:"PF",...n.responsavel,[l]:R}})},S=(l,R)=>{i({...n,enderecoResponsavel:{...n.enderecoResponsavel,[l]:R}})},$=async()=>{const l=n.endereco?.cep||"";if(!l||l.length<8){E.error("CEP deve ter pelo menos 8 dígitos");return}try{const R=l.replace(/\D/g,""),d=await(await fetch(`https://viacep.com.br/ws/${R}/json/`)).json();if(d.erro){E.error("CEP não encontrado");return}i({...n,endereco:{...n.endereco,cep:d.cep,endereco:d.logradouro,bairro:d.bairro,cidade:d.localidade,uf:d.uf,cidadeCodigo:d.ibge,ufCodigo:d.ibge?d.ibge.substring(0,2):void 0}}),E.success("CEP encontrado com sucesso!"),setTimeout(()=>{const g=document.querySelector('input[name="numero"]');g&&g.focus()},100)}catch(R){console.error("Erro ao buscar CEP:",R),E.error("Erro ao buscar CEP")}},x=l=>{i({...n,pessoa:{nome:l.nome,razao:l.razao||null,documento:l.documento,tipo:l.tipo,inscricaoEstadual:l.inscricaoEstadual||null,inscricaoMunicipal:l.inscricaoMunicipal||null},endereco:l.enderecos&&l.enderecos.length>0?{cep:l.enderecos[0].cep,endereco:l.enderecos[0].logradouro||null,numero:l.enderecos[0].numero||null,complemento:l.enderecos[0].complemento||null,bairro:l.enderecos[0].bairro||null,cidade:l.enderecos[0].cidade||null,uf:l.enderecos[0].uf||null,cidadeCodigo:l.enderecos[0].cidadeCodigo||null,ufCodigo:l.enderecos[0].ufCodigo||null}:void 0}),E.success("Dados da pessoa carregados com sucesso!")},p=l=>{i({...n,responsavel:{nome:l.nome,razao:l.razao||null,documento:l.documento,tipo:l.tipo,inscricaoEstadual:l.inscricaoEstadual||null,inscricaoMunicipal:l.inscricaoMunicipal||null},enderecoResponsavel:l.enderecos&&l.enderecos.length>0?{cep:l.enderecos[0].cep,endereco:l.enderecos[0].logradouro||null,numero:l.enderecos[0].numero||null,complemento:l.enderecos[0].complemento||null,bairro:l.enderecos[0].bairro||null,cidade:l.enderecos[0].cidade||null,uf:l.enderecos[0].uf||null,cidadeCodigo:l.enderecos[0].cidadeCodigo||null,ufCodigo:l.enderecos[0].ufCodigo||null}:void 0,clienteInfo:{...n.clienteInfo,pessoaResponsavelId:l.pessoaId}}),E.success("Dados do responsável carregados com sucesso!")},V=()=>{i({...n,responsavel:void 0,enderecoResponsavel:void 0,clienteInfo:{...n.clienteInfo,pessoaResponsavelId:void 0}}),E.success("Responsável removido com sucesso!")},U=async()=>{const l=n.enderecoResponsavel?.cep||"";if(!l||l.length<8){E.error("CEP deve ter pelo menos 8 dígitos");return}try{const R=l.replace(/\D/g,""),d=await(await fetch(`https://viacep.com.br/ws/${R}/json/`)).json();if(d.erro){E.error("CEP não encontrado");return}i({...n,enderecoResponsavel:{...n.enderecoResponsavel,cep:d.cep,endereco:d.logradouro,bairro:d.bairro,cidade:d.localidade,uf:d.uf,cidadeCodigo:d.ibge,ufCodigo:d.ibge?d.ibge.substring(0,2):void 0}}),E.success("CEP encontrado com sucesso!"),setTimeout(()=>{const g=document.querySelector('input[name="numeroResponsavel"]');g&&g.focus()},100)}catch(R){console.error("Erro ao buscar CEP:",R),E.error("Erro ao buscar CEP")}},J=async l=>{l.preventDefault(),j(!0);try{await o(n),E.success(y?"Cliente criado com sucesso!":"Cliente atualizado com sucesso!"),a()}catch(R){console.error("Erro ao salvar cliente:",R),E.error("Erro ao salvar cliente")}finally{j(!1)}},K=l=>l==="PF"?ia:De,C=l=>l==="PF"?"000.000.000-00":"00.000.000/0000-00";return e.jsxs(e.Fragment,{children:[e.jsx(Ie,{open:s,onOpenChange:a,children:e.jsxs(we,{className:"min-w-[65vw] min-h-[35vw] max-h-[35vw] overflow-y-auto",children:[e.jsxs(Ee,{children:[e.jsx(Se,{children:y?"Novo Cliente":"Editar Cliente"}),e.jsx(Te,{children:y?"Preencha os dados para cadastrar um novo cliente":"Edite os dados do cliente selecionado"})]}),e.jsxs("form",{onSubmit:J,className:"space-y-6",children:[e.jsxs(ua,{defaultValue:"pessoa",className:"w-full",children:[e.jsxs(ma,{className:"grid w-full grid-cols-4",children:[e.jsx(ee,{value:"pessoa",children:"Pessoa"}),e.jsx(ee,{value:"endereco",children:"Endereço"}),e.jsx(ee,{value:"responsavel",children:"Responsável"}),e.jsx(ee,{value:"enderecoResponsavel",children:"Endereço Responsável"})]}),e.jsxs(ae,{value:"pessoa",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Dados da Pessoa"}),e.jsxs(T,{type:"button",variant:"outline",size:"sm",onClick:()=>v(!0),className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"h-4 w-4"}),"Buscar Pessoa"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"tipoPessoa",children:"Tipo *"}),e.jsxs(ge,{value:n.pessoa.tipo,onValueChange:l=>A("tipo",l),name:"tipoPessoa",children:[e.jsx(je,{id:"tipoPessoa",children:e.jsx(fe,{placeholder:"Selecione o tipo"})}),e.jsx(be,{children:ds?.map(l=>e.jsx(Q,{value:l.value,children:l.label},l.value))})]})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"nome",children:"Nome *"}),e.jsx(b,{id:"nome",value:n.pessoa.nome,onChange:l=>A("nome",l.target.value),placeholder:"Nome completo",required:!0})]}),n.pessoa.tipo==="PJ"&&e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"razao",children:"Razão Social"}),e.jsx(b,{id:"razao",value:n.pessoa.razao||"",onChange:l=>A("razao",l.target.value)})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"documento",children:"Documento *"}),e.jsx(We,{id:"documento",value:n.pessoa.documento,onChange:l=>{const R=K(n.pessoa.tipo)(l.target.value);A("documento",R)},placeholder:C(n.pessoa.tipo),required:!0})]}),n.pessoa.tipo==="PJ"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"inscricaoEstadual",children:"Inscrição Estadual"}),e.jsx(b,{id:"inscricaoEstadual",value:n.pessoa.inscricaoEstadual||"",onChange:l=>A("inscricaoEstadual",l.target.value)})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"inscricaoMunicipal",children:"Inscrição Municipal"}),e.jsx(b,{id:"inscricaoMunicipal",value:n.pessoa.inscricaoMunicipal||"",onChange:l=>A("inscricaoMunicipal",l.target.value)})]})]})]})]}),e.jsxs(ae,{value:"endereco",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-[20%_60%_15%] gap-4",children:[e.jsxs("div",{className:"space-y-2  border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"cep",children:"CEP"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(We,{id:"cep",value:n.endereco?.cep||"",onChange:l=>{const R=ra(l.target.value);F("cep",R)},placeholder:"00000-000",className:"flex-1"}),e.jsx(He,{children:e.jsxs(Xe,{children:[e.jsx(Qe,{asChild:!0,children:e.jsx(T,{type:"button",variant:"outline",size:"sm",onClick:$,disabled:!n.endereco?.cep||(n.endereco?.cep?.replace(/\D/g,"").length||0)!==8,className:"px-3",children:"🔍"})}),e.jsx(Ze,{children:e.jsx("p",{children:"Pesquisar CEP"})})]})})]})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"endereco",children:"Logradouro"}),e.jsx(b,{id:"endereco",value:n.endereco?.endereco||"",onChange:l=>F("endereco",l.target.value)})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"numero",children:"Número"}),e.jsx(b,{id:"numero",name:"numero",value:n.endereco?.numero||"",onChange:l=>F("numero",l.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-[40%_57%] gap-4",children:[e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"complemento",children:"Complemento"}),e.jsx(b,{id:"complemento",value:n.endereco?.complemento||"",onChange:l=>F("complemento",l.target.value)})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"bairro",children:"Bairro"}),e.jsx(b,{id:"bairro",value:n.endereco?.bairro||"",onChange:l=>F("bairro",l.target.value),placeholder:"Nome do bairro"})]})]}),e.jsxs("div",{className:"grid grid-cols-[70%_10%] gap-4",children:[e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"cidade",children:"Cidade"}),e.jsx(b,{id:"cidade",value:n.endereco?.cidade||"",onChange:l=>F("cidade",l.target.value)})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"uf",children:"UF"}),e.jsx(b,{id:"uf",value:n.endereco?.uf||"",onChange:l=>F("uf",l.target.value),maxLength:2})]})]}),e.jsxs("div",{className:"grid grid-cols-[20%_20%_55%] gap-4",children:[e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"telefone",children:"Telefone"}),e.jsx(b,{id:"telefone",value:n.endereco?.contatoComercialTelefone1||"",onChange:l=>F("contatoComercialTelefone1",l.target.value)})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"celular",children:"Celular"}),e.jsx(b,{id:"celular",value:n.endereco?.contatoComercialTelefone2||"",onChange:l=>F("contatoComercialTelefone2",l.target.value)})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"email",children:"E-mail"}),e.jsx(b,{id:"email",type:"email",value:n.endereco?.contatoComercialEmail||"",onChange:l=>F("contatoComercialEmail",l.target.value)})]})]})]}),e.jsxs(ae,{value:"responsavel",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Dados do Responsável"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(T,{type:"button",variant:"outline",size:"sm",onClick:()=>f(!0),className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"h-4 w-4"}),"Buscar Responsável"]}),n.responsavel&&e.jsxs(T,{type:"button",variant:"destructive",size:"sm",onClick:V,className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"h-4 w-4"}),"Remover"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"responsavelTipo",children:"Tipo"}),e.jsxs(ge,{value:n.responsavel?.tipo||"PF",onValueChange:l=>P("tipo",l),children:[e.jsx(je,{children:e.jsx(fe,{placeholder:"Selecione o tipo"})}),e.jsx(be,{children:ds?.map(l=>e.jsx(Q,{value:l.value,children:l.label},l.value))})]})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"responsavelNome",children:"Nome"}),e.jsx(b,{id:"responsavelNome",value:n.responsavel?.nome||"",onChange:l=>P("nome",l.target.value)})]}),n.responsavel?.tipo==="PJ"&&e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"responsavelRazao",children:"Razão Social"}),e.jsx(b,{id:"responsavelRazao",value:n.responsavel?.razao||"",onChange:l=>P("razao",l.target.value)})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"responsavelDocumento",children:"Documento"}),e.jsx(We,{id:"responsavelDocumento",value:n.responsavel?.documento||"",onChange:l=>{const R=K(n.responsavel?.tipo||"PF")(l.target.value);P("documento",R)},placeholder:C(n.responsavel?.tipo||"PF")})]}),n.responsavel?.tipo==="PJ"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"responsavelInscricaoEstadual",children:"Inscrição Estadual"}),e.jsx(b,{id:"responsavelInscricaoEstadual",value:n.responsavel?.inscricaoEstadual||"",onChange:l=>P("inscricaoEstadual",l.target.value)})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"responsavelInscricaoMunicipal",children:"Inscrição Municipal"}),e.jsx(b,{id:"responsavelInscricaoMunicipal",value:n.responsavel?.inscricaoMunicipal||"",onChange:l=>P("inscricaoMunicipal",l.target.value)})]})]})]})]}),e.jsxs(ae,{value:"enderecoResponsavel",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-[20%_60%_15%] gap-4",children:[e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"cepResponsavel",children:"CEP"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(We,{id:"cepResponsavel",value:n.enderecoResponsavel?.cep||"",onChange:l=>{const R=ra(l.target.value);S("cep",R)},placeholder:"00000-000",className:"flex-1"}),e.jsx(He,{children:e.jsxs(Xe,{children:[e.jsx(Qe,{asChild:!0,children:e.jsx(T,{type:"button",variant:"outline",size:"sm",onClick:U,disabled:!n.enderecoResponsavel?.cep||(n.enderecoResponsavel?.cep?.replace(/\D/g,"").length||0)!==8,className:"px-3",children:"🔍"})}),e.jsx(Ze,{children:e.jsx("p",{children:"Pesquisar CEP"})})]})})]})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"enderecoResponsavel",children:"Logradouro"}),e.jsx(b,{id:"enderecoResponsavel",value:n.enderecoResponsavel?.endereco||"",onChange:l=>S("endereco",l.target.value)})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"numeroResponsavel",children:"Número"}),e.jsx(b,{id:"numeroResponsavel",name:"numeroResponsavel",value:n.enderecoResponsavel?.numero||"",onChange:l=>S("numero",l.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-[40%_57%] gap-4",children:[e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"complementoResponsavel",children:"Complemento"}),e.jsx(b,{id:"complementoResponsavel",value:n.enderecoResponsavel?.complemento||"",onChange:l=>S("complemento",l.target.value)})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"bairroResponsavel",children:"Bairro"}),e.jsx(b,{id:"bairroResponsavel",value:n.enderecoResponsavel?.bairro||"",onChange:l=>S("bairro",l.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-[70%_10%] gap-4",children:[e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"cidadeResponsavel",children:"Cidade"}),e.jsx(b,{id:"cidadeResponsavel",value:n.enderecoResponsavel?.cidade||"",onChange:l=>S("cidade",l.target.value)})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"ufResponsavel",children:"UF"}),e.jsx(b,{id:"ufResponsavel",value:n.enderecoResponsavel?.uf||"",onChange:l=>S("uf",l.target.value),maxLength:2})]})]}),e.jsxs("div",{className:"grid grid-cols-[20%_20%_55%] gap-4",children:[e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"telefone",children:"Telefone"}),e.jsx(b,{id:"telefone",value:n.enderecoResponsavel?.contatoComercialTelefone1||"",onChange:l=>F("contatoComercialTelefone1",l.target.value)})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"celular",children:"Celular"}),e.jsx(b,{id:"celular",value:n.enderecoResponsavel?.contatoComercialTelefone2||"",onChange:l=>F("contatoComercialTelefone2",l.target.value)})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"email",children:"E-mail"}),e.jsx(b,{id:"email",type:"email",value:n.enderecoResponsavel?.contatoComercialEmail||"",onChange:l=>F("contatoComercialEmail",l.target.value)})]})]})]})]}),e.jsxs(ze,{children:[e.jsx(T,{type:"button",variant:"outline",onClick:a,children:"Cancelar"}),e.jsx(T,{type:"submit",disabled:t,children:t?"Salvando...":y?"Criar Cliente":"Atualizar Cliente"})]})]})]})}),e.jsx(wa,{isOpen:N,onClose:()=>v(!1),onSelectPerson:x,title:"Buscar Pessoa para Cliente"}),e.jsx(wa,{isOpen:B,onClose:()=>f(!1),onSelectPerson:p,title:"Buscar Responsável"})]})}class ka{static async findAll(){try{return(await q("/cliente",{method:"GET"})).data||[]}catch(a){throw console.error("Erro ao buscar clientes:",a),a}}static async findOne(a){try{return await q(`/cliente/${a}`,{method:"GET"})}catch(o){throw console.error(`Erro ao buscar cliente ${a}:`,o),o}}static async create(a){try{return(await q("/cliente",{method:"POST",body:JSON.stringify(this.convertToApiFormat(a))})).cliente}catch(o){throw console.error("Erro ao criar cliente:",o),o}}static async update(a,o){try{const n=this.convertToApiFormat(o);return(await q(`/cliente/${a}`,{method:"PATCH",body:JSON.stringify(n)})).cliente}catch(n){throw console.error(`Erro ao atualizar cliente ${a}:`,n),n}}static async remove(a){try{await q(`/cliente/${a}`,{method:"DELETE"})}catch(o){throw console.error(`Erro ao remover cliente ${a}:`,o),o}}static convertToApiFormat(a){return{pessoa:{nome:a.pessoa.nome,razao:a.pessoa.razao||void 0,documento:a.pessoa.documento,tipo:a.pessoa.tipo,inscricaoEstadual:a.pessoa.inscricaoEstadual||void 0,inscricaoMunicipal:a.pessoa.inscricaoMunicipal||void 0},endereco:a.endereco&&(a.endereco.cep||a.endereco.endereco||a.endereco.numero||a.endereco.bairro||a.endereco.cidade||a.endereco.uf)?{cep:a.endereco.cep||void 0,logradouro:a.endereco.endereco||void 0,numero:a.endereco.numero||void 0,complemento:a.endereco.complemento||void 0,bairro:a.endereco.bairro||void 0,cidade:a.endereco.cidade||void 0,cidadeCodigo:a.endereco.cidadeCodigo?parseInt(a.endereco.cidadeCodigo):void 0,uf:a.endereco.uf||void 0,ufCodigo:a.endereco.ufCodigo?parseInt(a.endereco.ufCodigo):void 0}:void 0,responsavel:a.responsavel?.documento?{nome:a.responsavel.nome,razao:a.responsavel.razao||void 0,documento:a.responsavel.documento,tipo:a.responsavel.tipo,inscricaoEstadual:a.responsavel.inscricaoEstadual||void 0,inscricaoMunicipal:a.responsavel.inscricaoMunicipal||void 0,endereco:a.enderecoResponsavel?{cep:a.enderecoResponsavel.cep||void 0,logradouro:a.enderecoResponsavel.endereco||void 0,numero:a.enderecoResponsavel.numero||void 0,complemento:a.enderecoResponsavel.complemento||void 0,bairro:a.enderecoResponsavel.bairro||void 0,cidade:a.enderecoResponsavel.cidade||void 0,cidadeCodigo:a.enderecoResponsavel.cidadeCodigo?parseInt(a.enderecoResponsavel.cidadeCodigo):void 0,uf:a.enderecoResponsavel.uf||void 0,ufCodigo:a.enderecoResponsavel.ufCodigo?parseInt(a.enderecoResponsavel.ufCodigo):void 0}:void 0}:void 0,clienteInfo:{clienteInfoId:a.clienteInfo?.clienteInfoId?Number(a.clienteInfo.clienteInfoId):void 0,pessoaId:a.clienteInfo?.pessoaId?Number(a.clienteInfo.pessoaId):void 0,pessoaResponsavelId:a.clienteInfo?.pessoaResponsavelId?Number(a.clienteInfo.pessoaResponsavelId):null}}}}function Wc({title:s="Gestão de Clientes"}){const[a,o]=r.useState([]),[n,i]=r.useState(!1),[y,t]=r.useState(""),[j,N]=r.useState(!1),[v,B]=r.useState(!1),[f,A]=r.useState(null),[F,P]=r.useState(Pa);r.useEffect(()=>{S()},[]);const S=async()=>{i(!0);try{const C=await ka.findAll();o(C)}catch(C){console.error("Erro ao carregar clientes:",C),E.error("Erro ao carregar clientes")}finally{i(!1)}},$=async C=>{try{await ka.create(C),await S(),P(Pa)}catch(l){throw console.error("Erro ao criar cliente:",l),l}},x=async C=>{if(f)try{await ka.update(f.clienteInfoId,C),await S(),A(null),P(Pa)}catch(l){throw console.error("Erro ao atualizar cliente:",l),l}},p=async C=>{if(confirm("Tem certeza que deseja excluir este cliente?"))try{await ka.remove(C),await S(),E.success("Cliente removido com sucesso!")}catch(l){console.error("Erro ao remover cliente:",l),E.error("Erro ao remover cliente")}},V=C=>{A(C),P({pessoa:{nome:C.pessoa.nome,razao:C.pessoa.razao,documento:C.pessoa.documento,tipo:C.pessoa.tipo,inscricaoEstadual:C.pessoa.inscricaoEstadual,inscricaoMunicipal:C.pessoa.inscricaoMunicipal},endereco:C.endereco?{cep:C.endereco.cep,endereco:C.endereco.endereco,numero:C.endereco.numero,complemento:C.endereco.complemento,bairro:C.endereco.bairro,cidade:C.endereco.cidade,uf:C.endereco.uf}:void 0,responsavel:C.responsavel?{nome:C.responsavel.nome,razao:C.responsavel.razao,documento:C.responsavel.documento,tipo:C.responsavel.tipo,inscricaoEstadual:C.responsavel.inscricaoEstadual,inscricaoMunicipal:C.responsavel.inscricaoMunicipal}:void 0,enderecoResponsavel:C.responsavel?.endereco?{cep:C.responsavel.endereco.cep,endereco:C.responsavel.endereco.endereco,numero:C.responsavel.endereco.numero,complemento:C.responsavel.endereco.complemento,bairro:C.responsavel.endereco.bairro,cidade:C.responsavel.endereco.cidade,uf:C.responsavel.endereco.uf}:void 0,clienteInfo:{clienteInfoId:C.clienteInfoId,pessoaId:C.pessoa.pessoaId,pessoaResponsavelId:C.responsavel?.pessoaId||void 0}}),B(!0)},U=()=>{N(!1),P(Pa)},J=()=>{B(!1),A(null),P(Pa)},K=a.filter(C=>C.pessoa.nome.toLowerCase().includes(y.toLowerCase())||C.pessoa.documento.includes(y));return e.jsxs("div",{className:"space-y-6",id:"clientes",children:[e.jsxs("div",{className:"flex justify-between items-center",id:"clientes-header",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:s}),e.jsxs(T,{variant:"outline",onClick:()=>N(!0),children:[e.jsx(da,{className:"w-4 h-4 mr-2"}),"Novo Cliente"]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(qe,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(b,{id:"searchTerm",placeholder:"Buscar por nome ou documento...",value:y,onChange:C=>t(C.target.value),className:"pl-8"})]})}),e.jsxs(Z,{children:[e.jsx(ne,{children:e.jsxs(re,{children:["Lista de Clientes (",K.length,")"]})}),e.jsx(D,{children:e.jsxs(Ka,{children:[e.jsx(Wa,{children:e.jsxs(_e,{children:[e.jsx(Pe,{children:"Nome"}),e.jsx(Pe,{children:"Documento"}),e.jsx(Pe,{children:"Tipo"}),e.jsx(Pe,{children:"Responsável"}),e.jsx(Pe,{className:"text-right",children:"Ações"})]})}),e.jsx(Xa,{children:n?e.jsx(_e,{children:e.jsx(ve,{colSpan:5,className:"text-center",children:"Carregando..."})}):K.length===0?e.jsx(_e,{children:e.jsx(ve,{colSpan:5,className:"text-center",children:"Nenhum cliente encontrado"})}):K.map(C=>e.jsxs(_e,{children:[e.jsx(ve,{className:"font-medium",children:C.pessoa.nome}),e.jsx(ve,{children:C.pessoa.documento}),e.jsx(ve,{children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${C.pessoa.tipo==="PF"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:C.pessoa.tipo})}),e.jsx(ve,{children:C.responsavel?C.responsavel.nome:"-"}),e.jsx(ve,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(T,{variant:"outline",size:"sm",onClick:()=>V(C),children:e.jsx(ta,{className:"w-4 h-4"})}),e.jsx(T,{variant:"outline",size:"sm",onClick:()=>p(C.clienteInfoId),children:e.jsx(ga,{className:"w-4 h-4"})})]})})]},C.clienteInfoId))})]})})]}),e.jsx(Ds,{isOpen:j,onClose:U,onSubmit:$,formData:F,setFormData:P,isCreating:!0,isUpdating:!1}),e.jsx(Ds,{isOpen:v,onClose:J,onSubmit:x,formData:F,setFormData:P,isCreating:!1,isUpdating:!0})]})}class Xc{async findAll(){return q("/parceiro")}async findOne(a){return q(`/parceiro/${a}`)}async create(a){return q("/parceiro",{method:"POST",body:JSON.stringify(a)})}async update(a,o){return q(`/parceiro/${a}`,{method:"PATCH",body:JSON.stringify(o)})}async remove(a){return q(`/parceiro/${a}`,{method:"DELETE"})}async getBancos(){return q("/banco")}async getAtividadesParceiro(){return q("/atividade-parceiro")}convertToApiFormat(a){return{pessoa:{pessoaId:a.pessoa.pessoaId||void 0,nome:a.pessoa.nome,razao:a.pessoa.razao||void 0,documento:a.pessoa.documento,tipo:a.pessoa.tipo,inscricaoEstadual:a.pessoa.inscricaoEstadual||void 0,inscricaoMunicipal:a.pessoa.inscricaoMunicipal||void 0},endereco:a.endereco&&(a.endereco.cep||a.endereco.endereco||a.endereco.numero||a.endereco.bairro||a.endereco.cidade||a.endereco.uf)?{cep:a.endereco.cep||void 0,logradouro:a.endereco.endereco||void 0,numero:a.endereco.numero||void 0,complemento:a.endereco.complemento||void 0,bairro:a.endereco.bairro||void 0,cidade:a.endereco.cidade||void 0,cidadeCodigo:a.endereco.cidadeCodigo?parseInt(a.endereco.cidadeCodigo):void 0,uf:a.endereco.uf||void 0,ufCodigo:a.endereco.ufCodigo?parseInt(a.endereco.ufCodigo):void 0}:void 0,dadosBancarios:a.dadosBancarios&&(a.dadosBancarios.bancoId||a.dadosBancarios.agencia||a.dadosBancarios.conta||a.dadosBancarios.contaTipo||a.dadosBancarios.chavePix||a.dadosBancarios.contaDigito||a.dadosBancarios.agenciaDigito)?{dadosBancariosId:a.dadosBancarios.dadosBancariosId||void 0,bancoId:a.dadosBancarios.bancoId?Number(a.dadosBancarios.bancoId):void 0,agencia:a.dadosBancarios.agencia||void 0,conta:a.dadosBancarios.conta||void 0,contaTipo:a.dadosBancarios.contaTipo||void 0,chavePix:a.dadosBancarios.chavePix||void 0,contaDigito:a.dadosBancarios.contaDigito||void 0,agenciaDigito:a.dadosBancarios.agenciaDigito||void 0}:void 0,responsavel:a.responsavel&&(a.responsavel.nome&&a.responsavel.nome.trim().length>0||a.responsavel.documento&&a.responsavel.documento.trim().length>0)?{pessoaId:void 0,nome:a.responsavel.nome||void 0,razao:a.responsavel.razao||void 0,documento:a.responsavel.documento||void 0,tipo:a.responsavel.tipo||void 0,inscricaoEstadual:a.responsavel.inscricaoEstadual||void 0,inscricaoMunicipal:a.responsavel.inscricaoMunicipal||void 0}:void 0,enderecoResponsavel:a.enderecoResponsavel&&(a.enderecoResponsavel.cep||a.enderecoResponsavel.endereco||a.enderecoResponsavel.numero||a.enderecoResponsavel.bairro||a.enderecoResponsavel.cidade||a.enderecoResponsavel.uf)?{cep:a.enderecoResponsavel.cep||void 0,logradouro:a.enderecoResponsavel.endereco||void 0,numero:a.enderecoResponsavel.numero||void 0,complemento:a.enderecoResponsavel.complemento||void 0,bairro:a.enderecoResponsavel.bairro||void 0,cidade:a.enderecoResponsavel.cidade||void 0,cidadeCodigo:a.enderecoResponsavel.cidadeCodigo?parseInt(a.enderecoResponsavel.cidadeCodigo):void 0,uf:a.enderecoResponsavel.uf||void 0,ufCodigo:a.enderecoResponsavel.ufCodigo?parseInt(a.enderecoResponsavel.ufCodigo):void 0,contatoComercialTelefone1:a.enderecoResponsavel.contatoComercialTelefone1||void 0,contatoComercialTelefone2:a.enderecoResponsavel.contatoComercialTelefone2||void 0,contatoComercialEmail:a.enderecoResponsavel.contatoComercialEmail||void 0}:void 0,parceiroInfo:a.parceiroInfo?{pessoaResponsavelId:a.parceiroInfo.pessoaResponsavelId?Number(a.parceiroInfo.pessoaResponsavelId):void 0,atividadeParceiroId:a.parceiroInfo.atividadeParceiroId?Number(a.parceiroInfo.atividadeParceiroId):void 0,percIndicacao:Number(a.parceiroInfo.percIndicacao)||0,percMensalidade:Number(a.parceiroInfo.percMensalidade)||0}:void 0}}convertCreateUpdateToFrontendFormat(a){return a.parceiro}}const Je=new Xc,eo=[{value:"PF",label:"Pessoa Física"},{value:"PJ",label:"Pessoa Jurídica"}],Qc=[{value:1,label:"Conta Corrente"},{value:2,label:"Conta Poupança"}];function ao({formData:s,setFormData:a,isCreating:o,isUpdating:n,activeTab:i,setActiveTab:y}){const[t,j]=r.useState([]),[N,v]=r.useState([]),[B,f]=r.useState(null),[A,F]=r.useState(""),[P,S]=r.useState(!1),[$,x]=r.useState(!1),[p,V]=r.useState(!1),[U,J]=r.useState(!1);r.useEffect(()=>{K(),C()},[]),r.useEffect(()=>{if(s.dadosBancarios?.bancoId&&t.length>0){const c=t.find(w=>w.bancoId===s.dadosBancarios?.bancoId);c&&(f(c),F(c.bancoId.toString()))}else s.dadosBancarios?.bancoId||(f(null),F(""))},[s.dadosBancarios?.bancoId,t]);const K=async()=>{S(!0);try{const c=await Da.findAll();j(Array.isArray(c.data)?c.data:[])}catch(c){console.error("Erro ao carregar bancos:",c),j([])}finally{S(!1)}},C=async()=>{x(!0);try{const c=await Je.getAtividadesParceiro();v(Array.isArray(c)?c:[])}catch(c){console.error("Erro ao carregar atividades de parceiro:",c),v([])}finally{x(!1)}},l=async c=>{if(!Ss(c)){f(null),a({...s,dadosBancarios:{...s.dadosBancarios,bancoId:void 0}});return}const w=Number(c),O=t.find(H=>H.bancoId===w);O?(f(O),a({...s,dadosBancarios:{...s.dadosBancarios,bancoId:O.bancoId}})):(f(null),a({...s,dadosBancarios:{...s.dadosBancarios,bancoId:void 0}}))},R=c=>{const w=t.find(O=>O.bancoId===Number(c));w&&(f(w),F(w.bancoId.toString()),a({...s,dadosBancarios:{...s.dadosBancarios,bancoId:w.bancoId}}))},M=async()=>{const c=s.endereco?.cep||"";if(!c||c.length<8){E.error("CEP deve ter pelo menos 8 dígitos");return}try{const w=c.replace(/\D/g,""),H=await(await fetch(`https://viacep.com.br/ws/${w}/json/`)).json();if(H.erro){E.error("CEP não encontrado");return}a({...s,endereco:{...s.endereco,cep:H.cep,endereco:H.logradouro,bairro:H.bairro,cidade:H.localidade,uf:H.uf,cidadeCodigo:H.ibge,ufCodigo:H.ibge?H.ibge.substring(0,2):void 0}}),setTimeout(()=>{const oe=document.querySelector('input[name="numero"]');oe&&oe.focus()},100),E.success("CEP encontrado com sucesso!")}catch(w){console.error("Erro ao buscar CEP:",w),E.error("Erro ao buscar CEP")}},d=(c,w)=>{a({...s,pessoa:{...s.pessoa,[c]:w}})},g=(c,w)=>{a({...s,endereco:{...s.endereco,[c]:w}})},k=(c,w)=>{a({...s,dadosBancarios:{...s.dadosBancarios,[c]:w}})},Y=(c,w)=>{a({...s,responsavel:{nome:"",documento:"",tipo:"PF",...s.responsavel,[c]:w}})},W=(c,w)=>{a({...s,enderecoResponsavel:{...s.enderecoResponsavel,[c]:w}})},pe=(c,w)=>{a({...s,parceiroInfo:{...s.parceiroInfo,[c]:w}})},ye=c=>{const w=s.pessoa.tipo==="PF"?ia(c):De(c);d("documento",w)},Ce=c=>{const w=ra(c);g("cep",w)},X=c=>{const w=s.dadosBancarios;if(a({...s,pessoa:{pessoaId:c.pessoaId,nome:c.nome,razao:c.razao||null,documento:c.documento,tipo:c.tipo,inscricaoEstadual:c.inscricaoEstadual||null,inscricaoMunicipal:c.inscricaoMunicipal||null},endereco:c.enderecos&&c.enderecos.length>0?{cep:c.enderecos[0].cep,endereco:c.enderecos[0].logradouro||null,numero:c.enderecos[0].numero||null,complemento:c.enderecos[0].complemento||null,bairro:c.enderecos[0].bairro||null,cidade:c.enderecos[0].cidade||null,uf:c.enderecos[0].uf||null,cidadeCodigo:c.enderecos[0].cidadeCodigo||null,ufCodigo:c.enderecos[0].ufCodigo||null}:void 0,dadosBancarios:c.dadosBancarios&&c.dadosBancarios.length>0?{dadosBancariosId:c.dadosBancarios[0].dadosBancariosId,bancoId:c.dadosBancarios[0].bancoId,agencia:c.dadosBancarios[0].agencia,conta:c.dadosBancarios[0].conta,contaTipo:c.dadosBancarios[0].contaTipo,chavePix:c.dadosBancarios[0].chavePix||null,contaDigito:c.dadosBancarios[0].contaDigito||null,agenciaDigito:c.dadosBancarios[0].agenciaDigito||null}:w}),c.dadosBancarios&&c.dadosBancarios.length>0){const O=t.find(H=>H.bancoId===c.dadosBancarios[0].bancoId);O&&(f(O),F(O.bancoId.toString()))}E.success("Dados da pessoa carregados com sucesso!")},se=c=>{a({...s,responsavel:{nome:c.nome,razao:c.razao||null,documento:c.documento,tipo:c.tipo,inscricaoEstadual:c.inscricaoEstadual||null,inscricaoMunicipal:c.inscricaoMunicipal||null},enderecoResponsavel:c.enderecos&&c.enderecos.length>0?{cep:c.enderecos[0].cep,endereco:c.enderecos[0].logradouro||null,numero:c.enderecos[0].numero||null,complemento:c.enderecos[0].complemento||null,bairro:c.enderecos[0].bairro||null,cidade:c.enderecos[0].cidade||null,uf:c.enderecos[0].uf||null,cidadeCodigo:c.enderecos[0].cidadeCodigo||null,ufCodigo:c.enderecos[0].ufCodigo||null}:void 0,parceiroInfo:{...s.parceiroInfo,pessoaResponsavelId:c.pessoaId}}),E.success("Dados do responsável carregados com sucesso!")},z=()=>{a({...s,responsavel:void 0,parceiroInfo:{...s.parceiroInfo,pessoaResponsavelId:void 0}}),E.success("Responsável removido com sucesso!")},I=async()=>{const c=s.enderecoResponsavel?.cep||"";if(!c||c.length<8){E.error("CEP deve ter pelo menos 8 dígitos");return}try{const w=c.replace(/\D/g,""),H=await(await fetch(`https://viacep.com.br/ws/${w}/json/`)).json();if(H.erro){E.error("CEP não encontrado");return}a({...s,enderecoResponsavel:{...s.enderecoResponsavel,cep:H.cep,endereco:H.logradouro,bairro:H.bairro,cidade:H.localidade,uf:H.uf,cidadeCodigo:H.ibge,ufCodigo:H.ibge?H.ibge.substring(0,2):void 0}}),setTimeout(()=>{const oe=document.querySelector('input[name="numeroResponsavel"]');oe&&oe.focus()},100),E.success("CEP encontrado com sucesso!")}catch(w){console.error("Erro ao buscar CEP:",w),E.error("Erro ao buscar CEP")}};return e.jsxs(e.Fragment,{children:[e.jsxs(ua,{value:i,onValueChange:y,className:"w-full",children:[e.jsxs(ma,{className:"grid w-full grid-cols-6",children:[e.jsxs(ee,{value:"pessoa",className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"h-4 w-4"}),"Pessoa"]}),e.jsxs(ee,{value:"endereco",className:"flex items-center gap-2",children:[e.jsx(qa,{className:"h-4 w-4"}),"Endereço"]}),e.jsxs(ee,{value:"dados-bancarios",className:"flex items-center gap-2",children:[e.jsx(Ha,{className:"h-4 w-4"}),"Dados Bancários"]}),e.jsxs(ee,{value:"responsavel",className:"flex items-center gap-2",children:[e.jsx(Mr,{className:"h-4 w-4"}),"Responsável"]}),e.jsxs(ee,{value:"endereco-responsavel",className:"flex items-center gap-2",children:[e.jsx(qa,{className:"h-4 w-4"}),"End. Responsável"]}),e.jsxs(ee,{value:"parceiro-info",className:"flex items-center gap-2",children:[e.jsx(bo,{className:"h-4 w-4"}),"Participação"]})]}),e.jsx(ae,{value:"pessoa",className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Dados da Pessoa"}),e.jsxs(T,{type:"button",variant:"outline",size:"sm",onClick:()=>V(!0),className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"h-4 w-4"}),"Buscar Pessoa"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 border border-gray-300 rounded-md p-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"tipoParceiro",children:"Tipo *"}),e.jsxs(ge,{name:"tipoParceiro",value:s.pessoa.tipo,onValueChange:c=>d("tipo",c),children:[e.jsx(je,{id:"tipoParceiro",children:e.jsx(fe,{placeholder:"Selecione o tipo"})}),e.jsx(be,{children:eo?.map(c=>e.jsx(Q,{value:c.value||"default",children:c.label},c.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"documento",children:"Documento *"}),e.jsx(b,{id:"documento",placeholder:s.pessoa.tipo==="PF"?"000.000.000-00":"00.000.000/0000-00",value:s.pessoa.documento,onChange:c=>ye(c.target.value),maxLength:s.pessoa.tipo==="PF"?14:18})]})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"nome",children:"Nome *"}),e.jsx(b,{id:"nome",placeholder:"Nome completo",value:s.pessoa.nome,onChange:c=>d("nome",c.target.value)})]}),s.pessoa.tipo==="PJ"&&e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"razao",children:"Razão Social"}),e.jsx(b,{id:"razao",placeholder:"Razão social",value:s.pessoa.razao||"",onChange:c=>d("razao",c.target.value)})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 border border-gray-300 rounded-md p-2",children:s.pessoa.tipo==="PJ"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"inscricaoEstadual",children:"Inscrição Estadual"}),e.jsx(b,{id:"inscricaoEstadual",placeholder:"Inscrição estadual",value:s.pessoa.inscricaoEstadual||"",onChange:c=>d("inscricaoEstadual",c.target.value)})]})}),s.pessoa.tipo==="PJ"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"inscricaoMunicipal",children:"Inscrição Municipal"}),e.jsx(b,{id:"inscricaoMunicipal",placeholder:"Inscrição municipal",value:s.pessoa.inscricaoMunicipal||"",onChange:c=>d("inscricaoMunicipal",c.target.value)})]})]})}),e.jsx(ae,{value:"endereco",className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Endereço"}),e.jsx("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:e.jsxs("div",{className:"flex gap-2 max-w-[20%]",children:[e.jsx(We,{id:"cep",name:"cep",label:"CEP",value:s.endereco?.cep||"",onChange:c=>{const w=ra(c.target.value);Ce(w)},placeholder:"00000-000",isRequired:!0,validationMessage:"CEP é obrigatório",customValidation:c=>c.replace(/\D/g,"").length===8,className:"flex-1"}),e.jsx(He,{children:e.jsxs(Xe,{children:[e.jsx(Qe,{asChild:!0,children:e.jsx(T,{type:"button",variant:"outline",size:"sm",onClick:M,disabled:!s.endereco?.cep||s.endereco.cep.replace(/\D/g,"").length!==8,className:"px-3",children:"🔍"})}),e.jsx(Ze,{children:e.jsx("p",{children:"Pesquisar CEP"})})]})})]})}),e.jsxs("div",{className:"grid grid-cols-[80%_15%] gap-4 border border-gray-300 rounded-md p-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"endereco",children:"Logradouro"}),e.jsx(b,{id:"endereco",placeholder:"Rua, Avenida, etc.",value:s.endereco?.endereco||"",onChange:c=>g("endereco",c.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"numero",children:"Número"}),e.jsx(b,{id:"numero",name:"numero",placeholder:"123",value:s.endereco?.numero||"",onChange:c=>g("numero",c.target.value)})]})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"complemento",children:"Complemento"}),e.jsx(b,{id:"complemento",placeholder:"Apartamento, sala, etc.",value:s.endereco?.complemento||"",onChange:c=>g("complemento",c.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 border border-gray-300 rounded-md p-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"bairro",children:"Bairro"}),e.jsx(b,{id:"bairro",placeholder:"Bairro",value:s.endereco?.bairro||"",onChange:c=>g("bairro",c.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"cidade",children:"Cidade"}),e.jsx(b,{id:"cidade",placeholder:"Cidade",value:s.endereco?.cidade||"",onChange:c=>g("cidade",c.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"uf",children:"UF"}),e.jsx(b,{id:"uf",placeholder:"SP",value:s.endereco?.uf||"",onChange:c=>g("uf",c.target.value),maxLength:2})]})]})]})}),e.jsx(ae,{value:"dados-bancarios",className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Dados Bancários"}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"bancoId",children:"Banco"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex gap-2 flex-1 max-w-[20%]",children:[e.jsx(b,{id:"bancoId",name:"bancoId",placeholder:"000",value:A,onChange:c=>F(c.target.value),onBlur:()=>l(A),disabled:o||n,className:"flex-1"}),e.jsx(He,{children:e.jsxs(Xe,{children:[e.jsx(Qe,{asChild:!0,children:e.jsx(T,{type:"button",variant:"outline",size:"sm",onClick:()=>l(A),disabled:o||n||!A,className:"px-3",children:"🔍"})}),e.jsx(Ze,{children:e.jsx("p",{children:"Buscar banco por Nº"})})]})})]}),e.jsx("div",{className:"flex-1",children:e.jsxs(ge,{value:B?.bancoId?.toString()||"",onValueChange:R,disabled:o||n||P,children:[e.jsx(je,{children:e.jsx(fe,{placeholder:P?"Carregando bancos...":"Selecione um banco"})}),e.jsx(be,{className:"max-h-[200px] overflow-y-auto",children:Array.isArray(t)&&t.map(c=>e.jsx(Q,{value:c.bancoId.toString(),children:Ts(c)},c.bancoId))})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 border border-gray-300 rounded-md p-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"agencia",children:"Agência"}),e.jsx(b,{id:"agencia",value:s.dadosBancarios?.agencia||"",onChange:c=>k("agencia",c.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"agenciaDigito",children:"Dígito da Agência"}),e.jsx(b,{id:"agenciaDigito",value:s.dadosBancarios?.agenciaDigito||"",onChange:c=>k("agenciaDigito",c.target.value),maxLength:1})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 border border-gray-300 rounded-md p-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"conta",children:"Conta"}),e.jsx(b,{id:"conta",value:s.dadosBancarios?.conta||"",onChange:c=>k("conta",c.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"contaDigito",children:"Dígito da Conta"}),e.jsx(b,{id:"contaDigito",value:s.dadosBancarios?.contaDigito||"",onChange:c=>k("contaDigito",c.target.value),maxLength:1})]})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"contaTipo",children:"Tipo de Conta"}),e.jsxs(ge,{value:s.dadosBancarios?.contaTipo?.toString()||"",onValueChange:c=>k("contaTipo",parseInt(c)),children:[e.jsx(je,{children:e.jsx(fe,{placeholder:"Selecione o tipo de conta"})}),e.jsx(be,{children:Qc?.map(c=>e.jsx(Q,{value:c.value.toString(),children:c.label},c.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"chavePix",children:"Chave PIX"}),e.jsx(b,{id:"chavePix",placeholder:"Chave PIX",value:s.dadosBancarios?.chavePix||"",onChange:c=>k("chavePix",c.target.value)})]})]})}),e.jsx(ae,{value:"responsavel",className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Dados do Responsável"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(T,{type:"button",variant:"outline",size:"sm",onClick:()=>J(!0),className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"h-4 w-4"}),"Buscar Responsável"]}),s.responsavel&&e.jsxs(T,{type:"button",variant:"destructive",size:"sm",onClick:z,className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"h-4 w-4"}),"Remover"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"responsavelTipo",children:"Tipo"}),e.jsxs(ge,{value:s.responsavel?.tipo||"PF",onValueChange:c=>Y("tipo",c),children:[e.jsx(je,{children:e.jsx(fe,{placeholder:"Selecione o tipo"})}),e.jsx(be,{children:eo?.map(c=>e.jsx(Q,{value:c.value,children:c.label},c.value))})]})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"responsavelNome",children:"Nome"}),e.jsx(b,{id:"responsavelNome",value:s.responsavel?.nome||"",onChange:c=>Y("nome",c.target.value)})]}),s.responsavel?.tipo==="PJ"&&e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"responsavelRazao",children:"Razão Social"}),e.jsx(b,{id:"responsavelRazao",value:s.responsavel?.razao||"",onChange:c=>Y("razao",c.target.value)})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"responsavelDocumento",children:"Documento"}),e.jsx(b,{id:"responsavelDocumento",value:s.responsavel?.documento||"",onChange:c=>{const w=s.responsavel?.tipo==="PF"?ia(c.target.value):De(c.target.value);Y("documento",w)},placeholder:s.responsavel?.tipo==="PF"?"000.000.000-00":"00.000.000/0000-00",maxLength:s.responsavel?.tipo==="PF"?14:18})]}),s.responsavel?.tipo==="PJ"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"responsavelInscricaoEstadual",children:"Inscrição Estadual"}),e.jsx(b,{id:"responsavelInscricaoEstadual",value:s.responsavel?.inscricaoEstadual||"",onChange:c=>Y("inscricaoEstadual",c.target.value)})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"responsavelInscricaoMunicipal",children:"Inscrição Municipal"}),e.jsx(b,{id:"responsavelInscricaoMunicipal",value:s.responsavel?.inscricaoMunicipal||"",onChange:c=>Y("inscricaoMunicipal",c.target.value)})]})]})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"atividadeParceiroId",children:"Atividade do Parceiro"}),e.jsxs(ge,{value:s.parceiroInfo?.atividadeParceiroId?.toString()||"null",onValueChange:c=>pe("atividadeParceiroId",c==="null"?null:parseInt(c)),disabled:$,children:[e.jsx(je,{children:e.jsx(fe,{placeholder:$?"Carregando atividades...":"Selecione uma atividade"})}),e.jsxs(be,{className:"max-h-[200px] overflow-y-auto",children:[e.jsx(Q,{value:"null",children:"Nenhuma atividade"}),Array.isArray(N)&&N.map(c=>e.jsx(Q,{value:c.atividadeParceiroId.toString(),children:c.descricao},c.atividadeParceiroId))]})]})]})]})}),e.jsx(ae,{value:"endereco-responsavel",className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Endereço do Responsável"}),e.jsxs("div",{className:"grid grid-cols-[20%_60%_15%] gap-4",children:[e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"cepResponsavel",children:"CEP"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(b,{id:"cepResponsavel",value:s.enderecoResponsavel?.cep||"",onChange:c=>{const w=ra(c.target.value);W("cep",w)},placeholder:"00000-000",className:"flex-1"}),e.jsx(He,{children:e.jsxs(Xe,{children:[e.jsx(Qe,{asChild:!0,children:e.jsx(T,{type:"button",variant:"outline",size:"sm",onClick:I,disabled:!s.enderecoResponsavel?.cep||(s.enderecoResponsavel?.cep?.replace(/\D/g,"").length||0)!==8,className:"px-3",children:"🔍"})}),e.jsx(Ze,{children:e.jsx("p",{children:"Pesquisar CEP"})})]})})]})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"enderecoResponsavel",children:"Logradouro"}),e.jsx(b,{id:"enderecoResponsavel",value:s.enderecoResponsavel?.endereco||"",onChange:c=>W("endereco",c.target.value)})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"numeroResponsavel",children:"Número"}),e.jsx(b,{id:"numeroResponsavel",name:"numeroResponsavel",value:s.enderecoResponsavel?.numero||"",onChange:c=>W("numero",c.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-[40%_57%] gap-4",children:[e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"complementoResponsavel",children:"Complemento"}),e.jsx(b,{id:"complementoResponsavel",value:s.enderecoResponsavel?.complemento||"",onChange:c=>W("complemento",c.target.value)})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"bairroResponsavel",children:"Bairro"}),e.jsx(b,{id:"bairroResponsavel",value:s.enderecoResponsavel?.bairro||"",onChange:c=>W("bairro",c.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-[70%_10%] gap-4",children:[e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"cidadeResponsavel",children:"Cidade"}),e.jsx(b,{id:"cidadeResponsavel",value:s.enderecoResponsavel?.cidade||"",onChange:c=>W("cidade",c.target.value)})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"ufResponsavel",children:"UF"}),e.jsx(b,{id:"ufResponsavel",value:s.enderecoResponsavel?.uf||"",onChange:c=>W("uf",c.target.value),maxLength:2})]})]}),e.jsxs("div",{className:"grid grid-cols-[20%_20%_55%] gap-4",children:[e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"telefoneResponsavel",children:"Telefone"}),e.jsx(b,{id:"telefoneResponsavel",value:s.enderecoResponsavel?.contatoComercialTelefone1||"",onChange:c=>W("contatoComercialTelefone1",c.target.value)})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"celularResponsavel",children:"Celular"}),e.jsx(b,{id:"celularResponsavel",value:s.enderecoResponsavel?.contatoComercialTelefone2||"",onChange:c=>W("contatoComercialTelefone2",c.target.value)})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"emailResponsavel",children:"E-mail"}),e.jsx(b,{id:"emailResponsavel",type:"email",value:s.enderecoResponsavel?.contatoComercialEmail||"",onChange:c=>W("contatoComercialEmail",c.target.value)})]})]})]})}),e.jsx(ae,{value:"parceiro-info",className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Participação"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 border border-gray-300 rounded-md p-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"percIndicacao",children:"Percentual de Indicação (%)"}),e.jsx(b,{id:"percIndicacao",type:"number",min:"0",max:"100",step:"0.01",placeholder:"0.00",value:s.parceiroInfo?.percIndicacao||0,onChange:c=>pe("percIndicacao",parseFloat(c.target.value)||0)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"percMensalidade",children:"Percentual de Mensalidade (%)"}),e.jsx(b,{id:"percMensalidade",type:"number",min:"0",max:"100",step:"0.01",placeholder:"0.00",value:s.parceiroInfo?.percMensalidade||0,onChange:c=>pe("percMensalidade",parseFloat(c.target.value)||0)})]})]})]})})]}),e.jsx(wa,{isOpen:p,onClose:()=>V(!1),onSelectPerson:X,title:"Buscar Pessoa para Parceiro"}),e.jsx(wa,{isOpen:U,onClose:()=>J(!1),onSelectPerson:se,title:"Buscar Responsável"})]})}const xa={pessoa:{nome:"",razao:null,documento:"",tipo:"PF",inscricaoEstadual:null,inscricaoMunicipal:null},endereco:{cep:"",endereco:null,numero:null,complemento:null,bairro:null,cidade:null,uf:null,cidadeCodigo:null,ufCodigo:null},dadosBancarios:{bancoId:void 0,agencia:"",conta:"",contaTipo:void 0,chavePix:null,contaDigito:null,agenciaDigito:null},responsavel:{nome:"",razao:null,documento:"",tipo:"PF",inscricaoEstadual:null,inscricaoMunicipal:null},enderecoResponsavel:{cep:"",endereco:null,numero:null,complemento:null,bairro:null,cidade:null,uf:null,cidadeCodigo:null,ufCodigo:null,contatoComercialTelefone1:null,contatoComercialTelefone2:null,contatoComercialEmail:null},parceiroInfo:{pessoaResponsavelId:void 0,atividadeParceiroId:null,percIndicacao:0,percMensalidade:0}};function Zc({title:s="Gestão de Parceiros"}){const a=[{key:"pessoa.nome",header:"Nome",render:m=>e.jsx("span",{className:"font-medium",children:m.pessoa.nome})},{key:"pessoa.documento",header:"Documento",render:m=>m.pessoa.documento},{key:"pessoa.tipo",header:"Tipo",render:m=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${m.pessoa.tipo==="PF"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:m.pessoa.tipo})},{key:"responsavel.nome",header:"Responsável",render:m=>e.jsx("span",{className:"text-sm",children:m.responsavel?.nome||"Não informado"})},{key:"percIndicacao",header:"% Indicação",render:m=>`${m.percIndicacao}%`},{key:"percMensalidade",header:"% Mensalidade",render:m=>`${m.percMensalidade}%`},{key:"actions",header:"Ações",className:"text-right",render:m=>e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(T,{variant:"outline",size:"sm",onClick:()=>O(m),children:e.jsx(ta,{className:"w-4 h-4"})}),e.jsxs(vs,{children:[e.jsx(gs,{asChild:!0,children:e.jsx(T,{variant:"outline",size:"sm",children:e.jsx(ga,{className:"h-4 w-4"})})}),e.jsxs(js,{children:[e.jsxs(fs,{children:[e.jsx(ys,{children:"Confirmar Exclusão"}),e.jsxs(Cs,{children:['Tem certeza que deseja remover o parceiro "',m.pessoa.nome,'"? Esta ação não pode ser desfeita.']})]}),e.jsxs(bs,{children:[e.jsx(Is,{children:"Cancelar"}),e.jsxs(Ns,{onClick:()=>oe(m),disabled:p,children:[p&&e.jsx(Ne,{className:"mr-2 h-4 w-4 animate-spin"}),"Remover"]})]})]})]})]})}],[o,n]=r.useState([]),[i,y]=r.useState(""),[t,j]=r.useState(null),[N,v]=r.useState(!1),[B,f]=r.useState(!1),[A,F]=r.useState(!1),[P,S]=r.useState(!1),[$,x]=r.useState(!1),[p,V]=r.useState(!1),[U,J]=r.useState("pessoa"),[K,C]=r.useState(!1),[l,R]=r.useState(!1),[M,d]=r.useState(1),[g,k]=r.useState(1),[Y,W]=r.useState(0),[pe]=r.useState(25),ye=r.useRef(null),Ce=r.useRef(null);r.useEffect(()=>{(N||B)&&J("pessoa")},[N,B]),r.useEffect(()=>{se(xa),C(!1)},[N]),r.useEffect(()=>{t&&(se({pessoa:{nome:t.pessoa.nome,razao:t.pessoa.razao,documento:t.pessoa.documento,tipo:t.pessoa.tipo,inscricaoEstadual:t.pessoa.inscricaoEstadual,inscricaoMunicipal:t.pessoa.inscricaoMunicipal},endereco:t.endereco?{cep:t.endereco.cep,endereco:t.endereco.endereco,numero:t.endereco.numero,complemento:t.endereco.complemento,bairro:t.endereco.bairro,cidade:t.endereco.cidade,uf:t.endereco.uf,cidadeCodigo:t.endereco.cidadeCodigo,ufCodigo:t.endereco.ufCodigo}:void 0,dadosBancarios:t.dadosBancarios?{bancoId:t.dadosBancarios.bancoId,agencia:t.dadosBancarios.agencia,conta:t.dadosBancarios.conta,contaTipo:t.dadosBancarios.contaTipo,chavePix:t.dadosBancarios.chavePix,contaDigito:t.dadosBancarios.contaDigito,agenciaDigito:t.dadosBancarios.agenciaDigito}:void 0,responsavel:t.responsavel?{nome:t.responsavel.nome,razao:t.responsavel.razao,documento:t.responsavel.documento,tipo:t.responsavel.tipo,inscricaoEstadual:t.responsavel.inscricaoEstadual,inscricaoMunicipal:t.responsavel.inscricaoMunicipal}:void 0,enderecoResponsavel:t.responsavel?.endereco?{cep:t.responsavel.endereco.cep,endereco:t.responsavel.endereco.endereco,numero:t.responsavel.endereco.numero,complemento:t.responsavel.endereco.complemento,bairro:t.responsavel.endereco.bairro,cidade:t.responsavel.endereco.cidade,uf:t.responsavel.endereco.uf,cidadeCodigo:t.responsavel.endereco.cidadeCodigo,ufCodigo:t.responsavel.endereco.ufCodigo}:void 0,parceiroInfo:{pessoaResponsavelId:t.pessoaResponsavelId,atividadeParceiroId:t.atividadeParceiroId,percIndicacao:t.percIndicacao,percMensalidade:t.percMensalidade}}),C(!1))},[t]);const[X,se]=r.useState(xa),z=r.useCallback(m=>{y(m),ye.current&&clearTimeout(ye.current),ye.current=window.setTimeout(()=>{I()},500)},[]),I=r.useCallback(async()=>{F(!0);try{const m=await Je.findAll();n(m.data),W(m.total),k(Math.ceil(m.total/pe))}catch(m){console.error("Erro ao carregar parceiros:",m),E.error("Erro ao carregar parceiros")}finally{F(!1)}},[pe]);r.useEffect(()=>{I()},[I]);const c=r.useMemo(()=>o,[o]),w=async()=>{if(!X.pessoa.nome||!X.pessoa.documento){E.error("Por favor, preencha todos os campos obrigatórios");return}S(!0);try{const m=Je.convertToApiFormat(X),le=await Je.create(m),ke=Je.convertCreateUpdateToFrontendFormat(le);n(Ge=>[...Ge,ke]),se(xa),C(!1),v(!1),E.success("Parceiro criado com sucesso!")}catch(m){console.error("Erro ao criar parceiro:",m);const le=m instanceof Error?m.message:"Erro ao criar parceiro";E.error(le)}finally{S(!1)}},O=m=>{j(m),se({pessoa:{nome:m.pessoa.nome,razao:m.pessoa.razao,documento:m.pessoa.documento,tipo:m.pessoa.tipo,inscricaoEstadual:m.pessoa.inscricaoEstadual,inscricaoMunicipal:m.pessoa.inscricaoMunicipal},endereco:m.endereco?{cep:m.endereco.cep,endereco:m.endereco.endereco,numero:m.endereco.numero,complemento:m.endereco.complemento,bairro:m.endereco.bairro,cidade:m.endereco.cidade,uf:m.endereco.uf,cidadeCodigo:m.endereco.cidadeCodigo,ufCodigo:m.endereco.ufCodigo}:void 0,dadosBancarios:m.dadosBancarios?{bancoId:m.dadosBancarios.bancoId,agencia:m.dadosBancarios.agencia,conta:m.dadosBancarios.conta,contaTipo:m.dadosBancarios.contaTipo,chavePix:m.dadosBancarios.chavePix,contaDigito:m.dadosBancarios.contaDigito,agenciaDigito:m.dadosBancarios.agenciaDigito}:void 0,responsavel:m.responsavel?{nome:m.responsavel.nome,razao:m.responsavel.razao,documento:m.responsavel.documento,tipo:m.responsavel.tipo,inscricaoEstadual:m.responsavel.inscricaoEstadual,inscricaoMunicipal:m.responsavel.inscricaoMunicipal}:void 0,enderecoResponsavel:m.responsavel?.endereco?{cep:m.responsavel.endereco.cep,endereco:m.responsavel.endereco.endereco,numero:m.responsavel.endereco.numero,complemento:m.responsavel.endereco.complemento,bairro:m.responsavel.endereco.bairro,cidade:m.responsavel.endereco.cidade,uf:m.responsavel.endereco.uf,cidadeCodigo:m.responsavel.endereco.cidadeCodigo,ufCodigo:m.responsavel.endereco.ufCodigo}:void 0,parceiroInfo:{pessoaResponsavelId:m.pessoaResponsavelId,atividadeParceiroId:m.atividadeParceiroId,percIndicacao:m.percIndicacao,percMensalidade:m.percMensalidade}}),J("pessoa"),C(!1),f(!0)},H=async()=>{if(t){x(!0);try{const m=Je.convertToApiFormat(X),le=await Je.update(t.parceiroInfoId,m),ke=Je.convertCreateUpdateToFrontendFormat(le);n(Ge=>Ge.map(aa=>aa.parceiroInfoId===t.parceiroInfoId?ke:aa)),j(null),se(xa),C(!1),f(!1),E.success("Parceiro atualizado com sucesso!")}catch(m){console.error("Erro ao atualizar parceiro:",m);const le=m instanceof Error?m.message:"Erro ao atualizar parceiro";E.error(le)}finally{x(!1)}}},oe=async m=>{V(!0);try{await Je.remove(m.parceiroInfoId),n(le=>le.filter(ke=>ke.parceiroInfoId!==m.parceiroInfoId)),E.success("Parceiro removido com sucesso!")}catch(le){console.error("Erro ao remover parceiro:",le);const ke=le instanceof Error?le.message:"Erro ao remover parceiro";E.error(ke)}finally{V(!1)}},ie=m=>{se(m),C(!0)},Re=r.useCallback(m=>{K?R(!0):(m==="create"?(v(!1),se(xa)):(f(!1),j(null)),C(!1))},[K]),de=r.useCallback(()=>{R(!1),C(!1),v(!1),f(!1),j(null),se(xa)},[]),he=r.useCallback(()=>{R(!1)},[]),Me=m=>{d(m)},L=(M-1)*pe,xe=L+pe,Fe=c.slice(L,xe);return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:s}),e.jsxs(Ie,{open:N,onOpenChange:m=>{if(m){v(!0);return}K?R(!0):(v(!1),se(xa),C(!1))},children:[e.jsx(Ro,{asChild:!0,children:e.jsxs(T,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(da,{className:"h-4 w-4"}),"Novo Parceiro"]})}),e.jsxs(we,{className:"min-w-[65vw] min-h-[35vw] max-h-[35vw] overflow-y-auto",children:[e.jsxs(Ee,{children:[e.jsx(Se,{children:"Criar Novo Parceiro"}),e.jsx(Te,{children:"Preencha as informações do parceiro. Os campos marcados com * são obrigatórios."})]}),e.jsx(ao,{formData:X,setFormData:ie,isCreating:P,isUpdating:!1,activeTab:U,setActiveTab:J}),e.jsxs(ze,{children:[e.jsx(T,{variant:"outline",onClick:()=>Re("create"),children:"Cancelar"}),e.jsxs(T,{onClick:w,disabled:P,children:[P&&e.jsx(Ne,{className:"mr-2 h-4 w-4 animate-spin"}),"Criar Parceiro"]})]})]})]})]}),e.jsx("div",{className:"flex items-center space-x-2 mb-4",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(qe,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(b,{ref:Ce,placeholder:"Pesquisar parceiros...",value:i,onChange:m=>z(m.target.value),className:"pl-8",id:"searchTerm"})]})}),e.jsx(Ba,{title:"Lista de Parceiros",data:Fe,columns:a,isLoading:A,loadingText:"Carregando parceiros...",emptyText:"Nenhum parceiro encontrado",keyExtractor:m=>m.parceiroInfoId}),g>1&&e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Mostrando ",L+1," a ",Math.min(xe,Y)," de"," ",Y," parceiros"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(T,{variant:"outline",size:"sm",onClick:()=>Me(M-1),disabled:M===1,children:e.jsx(Ra,{className:"h-4 w-4"})}),e.jsxs("span",{className:"text-sm",children:["Página ",M," de ",g]}),e.jsx(T,{variant:"outline",size:"sm",onClick:()=>Me(M+1),disabled:M===g,children:e.jsx(Fa,{className:"h-4 w-4"})})]})]}),e.jsx(Ie,{open:B,onOpenChange:m=>{m?f(!0):K?R(!0):(f(!1),j(null),C(!1))},children:e.jsxs(we,{className:"min-w-[65vw] min-h-[35vw] max-h-[35vw] overflow-y-auto",children:[e.jsxs(Ee,{children:[e.jsx(Se,{children:"Editar Parceiro"}),e.jsx(Te,{children:"Atualize as informações do parceiro. Os campos marcados com * são obrigatórios."})]}),e.jsx(ao,{formData:X,setFormData:ie,isCreating:!1,isUpdating:$,activeTab:U,setActiveTab:J}),e.jsxs(ze,{children:[e.jsx(T,{variant:"outline",onClick:()=>Re("edit"),children:"Cancelar"}),e.jsxs(T,{onClick:H,disabled:$,children:[$&&e.jsx(Ne,{className:"mr-2 h-4 w-4 animate-spin"}),"Atualizar Parceiro"]})]})]})}),e.jsx(Ie,{open:l,onOpenChange:R,children:e.jsxs(we,{children:[e.jsxs(Ee,{children:[e.jsx(Se,{children:"Mudanças não salvas"}),e.jsx(Te,{children:"Você tem mudanças não salvas. Tem certeza que deseja fechar sem salvar?"})]}),e.jsxs(ze,{children:[e.jsx(T,{variant:"outline",onClick:he,children:"Cancelar"}),e.jsx(T,{variant:"destructive",onClick:de,children:"Fechar sem salvar"})]})]})})]})}var es="Checkbox",[Dc,Tt]=Ga(es),[et,Ps]=Dc(es);function at(s){const{__scopeCheckbox:a,checked:o,children:n,defaultChecked:i,disabled:y,form:t,name:j,onCheckedChange:N,required:v,value:B="on",internal_do_not_use_render:f}=s,[A,F]=ms({prop:o,defaultProp:i??!1,onChange:N,caller:es}),[P,S]=r.useState(null),[$,x]=r.useState(null),p=r.useRef(!1),V=P?!!t||!!P.closest("form"):!0,U={checked:A,disabled:y,setChecked:F,control:P,setControl:S,name:j,form:t,value:B,hasConsumerStoppedPropagationRef:p,required:v,defaultChecked:ca(i)?!1:i,isFormControl:V,bubbleInput:$,setBubbleInput:x};return e.jsx(et,{scope:a,...U,children:st(f)?f(U):n})}var an="CheckboxTrigger",sn=r.forwardRef(({__scopeCheckbox:s,onKeyDown:a,onClick:o,...n},i)=>{const{control:y,value:t,disabled:j,checked:N,required:v,setControl:B,setChecked:f,hasConsumerStoppedPropagationRef:A,isFormControl:F,bubbleInput:P}=Ps(an,s),S=Ea(i,B),$=r.useRef(N);return r.useEffect(()=>{const x=y?.form;if(x){const p=()=>f($.current);return x.addEventListener("reset",p),()=>x.removeEventListener("reset",p)}},[y,f]),e.jsx(la.button,{type:"button",role:"checkbox","aria-checked":ca(N)?"mixed":N,"aria-required":v,"data-state":ln(N),"data-disabled":j?"":void 0,disabled:j,value:t,...n,ref:S,onKeyDown:Ue(a,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:Ue(o,x=>{f(p=>ca(p)?!0:!p),P&&F&&(A.current=x.isPropagationStopped(),A.current||x.stopPropagation())})})});sn.displayName=an;var on=r.forwardRef((s,a)=>{const{__scopeCheckbox:o,name:n,checked:i,defaultChecked:y,required:t,disabled:j,value:N,onCheckedChange:v,form:B,...f}=s;return e.jsx(at,{__scopeCheckbox:o,checked:i,defaultChecked:y,disabled:j,required:t,onCheckedChange:v,name:n,form:B,value:N,internal_do_not_use_render:({isFormControl:A})=>e.jsxs(e.Fragment,{children:[e.jsx(sn,{...f,ref:a,__scopeCheckbox:o}),A&&e.jsx(tn,{__scopeCheckbox:o})]})})});on.displayName=es;var nn="CheckboxIndicator",rn=r.forwardRef((s,a)=>{const{__scopeCheckbox:o,forceMount:n,...i}=s,y=Ps(nn,o);return e.jsx(Ja,{present:n||ca(y.checked)||y.checked===!0,children:e.jsx(la.span,{"data-state":ln(y.checked),"data-disabled":y.disabled?"":void 0,...i,ref:a,style:{pointerEvents:"none",...s.style}})})});rn.displayName=nn;var cn="CheckboxBubbleInput",tn=r.forwardRef(({__scopeCheckbox:s,...a},o)=>{const{control:n,hasConsumerStoppedPropagationRef:i,checked:y,defaultChecked:t,required:j,disabled:N,name:v,value:B,form:f,bubbleInput:A,setBubbleInput:F}=Ps(cn,s),P=Ea(o,F),S=Vn(y),$=Un(n);r.useEffect(()=>{const p=A;if(!p)return;const V=window.HTMLInputElement.prototype,J=Object.getOwnPropertyDescriptor(V,"checked").set,K=!i.current;if(S!==y&&J){const C=new Event("click",{bubbles:K});p.indeterminate=ca(y),J.call(p,ca(y)?!1:y),p.dispatchEvent(C)}},[A,S,y,i]);const x=r.useRef(ca(y)?!1:y);return e.jsx(la.input,{type:"checkbox","aria-hidden":!0,defaultChecked:t??x.current,required:j,disabled:N,name:v,value:B,form:f,...a,tabIndex:-1,ref:P,style:{...a.style,...$,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});tn.displayName=cn;function st(s){return typeof s=="function"}function ca(s){return s==="indeterminate"}function ln(s){return ca(s)?"indeterminate":s?"checked":"unchecked"}function Ua({className:s,...a}){return e.jsx(on,{"data-slot":"checkbox",className:me("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...a,children:e.jsx(rn,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:e.jsx(Jn,{className:"size-3.5"})})})}function so({className:s,...a}){return e.jsx("textarea",{"data-slot":"textarea",className:me("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),...a})}function ot({isOpen:s,onClose:a,onSelectPessoa:o,title:n="Buscar Pessoa",tipoPessoa:i,excludePessoaId:y}){const[t,j]=r.useState({documento:"",nome:"",tipo:void 0,limit:20,offset:0}),[N,v]=r.useState([]),[B,f]=r.useState(!1),[A,F]=r.useState(0),[P,S]=r.useState(1),$=r.useCallback(async()=>{if(!t.nome&&!t.documento){v([]),F(0);return}f(!0);try{let C;switch(i){case"cliente":C=await ka.findAll();const l=C.filter(g=>{const k=!t.nome||g.pessoa?.nome?.toLowerCase().includes(t.nome.toLowerCase()),Y=!t.documento||g.pessoa?.documento?.includes(t.documento),W=!t.tipo||g.pessoa?.tipo===t.tipo;return k&&Y&&W});v(l.map(g=>({pessoaId:g.pessoa.pessoaId,nome:g.pessoa.nome,razao:g.pessoa.razao,documento:g.pessoa.documento,tipo:g.pessoa.tipo,entidadeId:g.pessoa.entidadeId,inscricaoEstadual:g.pessoa.inscricaoEstadual,inscricaoMunicipal:g.pessoa.inscricaoMunicipal,enderecos:g.pessoa.enderecos,dadosBancarios:g.pessoa.dadosBancarios,clienteInfoId:g.clienteInfoId}))),F(l.length);break;case"parceiro":C=await Je.findAll();const R=C.data.filter(g=>{const k=!t.nome||g.pessoa?.nome?.toLowerCase().includes(t.nome.toLowerCase()),Y=!t.documento||g.pessoa?.documento?.includes(t.documento),W=!t.tipo||g.pessoa?.tipo===t.tipo;return k&&Y&&W});v(R.map(g=>({pessoaId:g.pessoa.pessoaId,nome:g.pessoa.nome,razao:g.pessoa.razao,documento:g.pessoa.documento,tipo:g.pessoa.tipo,entidadeId:g.pessoa.entidadeId,inscricaoEstadual:g.pessoa.inscricaoEstadual,inscricaoMunicipal:g.pessoa.inscricaoMunicipal,enderecos:g.pessoa.enderecos,dadosBancarios:g.pessoa.dadosBancarios,parceiroInfoId:g.parceiroInfoId}))),F(R.length);break;case"socio":C=await Ke.findAll();const M=C.data.filter(g=>{const k=!t.nome||g.pessoa?.nome?.toLowerCase().includes(t.nome.toLowerCase()),Y=!t.documento||g.pessoa?.documento?.includes(t.documento),W=!t.tipo||g.pessoa?.tipo===t.tipo;return k&&Y&&W});v(M.map(g=>({pessoaId:g.pessoa.pessoaId,nome:g.pessoa.nome,razao:g.pessoa.razao,documento:g.pessoa.documento,tipo:g.pessoa.tipo,entidadeId:g.pessoa.entidadeId,inscricaoEstadual:g.pessoa.inscricaoEstadual,inscricaoMunicipal:g.pessoa.inscricaoMunicipal,enderecos:g.pessoa.enderecos,dadosBancarios:g.pessoa.dadosBancarios,socioInfoId:g.socioInfoId}))),F(M.length);break;default:const d=await en.search(t);v(d.data),F(d.total);break}}catch(C){console.error("Erro ao buscar pessoas:",C),E.error("Erro ao buscar pessoas")}finally{f(!1)}},[t,i]);r.useEffect(()=>{const C=setTimeout(()=>{$()},500);return()=>clearTimeout(C)},[$]);const x=()=>{S(1),j(C=>({...C,offset:0})),$()},p=C=>{o(C),a()},V=(C,l)=>{j(R=>({...R,[C]:l===""?void 0:l,offset:0})),S(1)},U=C=>{const l=(C-1)*(t.limit||20);j(R=>({...R,offset:l})),S(C)},J=Math.ceil(A/(t.limit||20)),K=()=>{switch(i){case"cliente":return"Cliente";case"parceiro":return"Parceiro";case"socio":return"Sócio";default:return"Pessoa"}};return e.jsx(Ie,{open:s,onOpenChange:a,children:e.jsxs(we,{className:"max-w-4xl max-h-[80vh] overflow-hidden flex flex-col",children:[e.jsxs(Ee,{children:[e.jsx(Se,{children:i?`Buscar ${K()}`:n}),e.jsx(Te,{children:i?`Busque e selecione um ${K().toLowerCase()} para o contrato`:"Busque e selecione uma pessoa"})]}),e.jsxs("div",{className:"space-y-4 flex-1 overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"nome",children:"Nome"}),e.jsx(b,{id:"nome",placeholder:"Digite o nome...",value:t.nome,onChange:C=>V("nome",C.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"documento",children:"Documento"}),e.jsx(b,{id:"documento",placeholder:"CPF ou CNPJ...",value:t.documento,onChange:C=>{const l=C.target.value,R=l.length<=14?ia(l):De(l);V("documento",R)}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"tipo",children:"Tipo"}),e.jsxs(ge,{value:t.tipo||"all",onValueChange:C=>V("tipo",C==="all"?"":C),children:[e.jsx(je,{children:e.jsx(fe,{placeholder:"Todos os tipos"})}),e.jsxs(be,{children:[e.jsx(Q,{value:"all",children:"Todos os tipos"}),e.jsx(Q,{value:"PF",children:"Pessoa Física"}),e.jsx(Q,{value:"PJ",children:"Pessoa Jurídica"})]})]})]})]}),e.jsxs(T,{onClick:x,className:"w-full",children:[e.jsx(qe,{className:"w-4 h-4 mr-2"}),"Buscar"]}),e.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("span",{className:"text-sm text-muted-foreground",children:[A," resultado(s) encontrado(s)"]})}),e.jsx("div",{className:"flex-1 overflow-y-auto border rounded-md",children:B?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(Ne,{className:"w-6 h-6 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Buscando..."})]}):N.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-muted-foreground",children:[e.jsx(qe,{className:"w-12 h-12 mb-4 opacity-50"}),e.jsx("p",{children:"Nenhum resultado encontrado"}),e.jsx("p",{className:"text-sm",children:"Tente ajustar os filtros de busca"})]}):e.jsx("div",{className:"space-y-2",children:N.map(C=>e.jsx("div",{className:"border rounded-lg p-4 hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>p(C),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:C.tipo==="PF"?e.jsx(Oe,{className:"w-8 h-8 text-blue-600"}):e.jsx(fo,{className:"w-8 h-8 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:C.nome}),e.jsx("p",{className:"text-sm text-muted-foreground",children:C.documento})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ae,{variant:C.tipo==="PF"?"default":"secondary",children:C.tipo==="PF"?"Pessoa Física":"Pessoa Jurídica"}),e.jsx(T,{size:"sm",variant:"outline",children:"Selecionar"})]})]})},C.pessoaId))})}),J>1&&e.jsxs("div",{className:"flex items-center justify-center space-x-2 pt-4",children:[e.jsx(T,{variant:"outline",size:"sm",onClick:()=>U(P-1),disabled:P===1,children:"Anterior"}),e.jsxs("span",{className:"text-sm",children:["Página ",P," de ",J]}),e.jsx(T,{variant:"outline",size:"sm",onClick:()=>U(P+1),disabled:P===J,children:"Próxima"})]})]})]})]})})}class nt{async findAll(a){try{const o=new URLSearchParams;return a?.search&&o.append("search",a.search),a?.tipoConta&&o.append("tipoConta",a.tipoConta),a?.ativo!==void 0&&o.append("ativo",a.ativo.toString()),await q(`/entidade-conta-bancaria?${o.toString()}`,{method:"GET"})}catch(o){throw console.error("Erro ao buscar contas bancárias:",o),o}}async findById(a){try{return await q(`/entidade-conta-bancaria/${a}`,{method:"GET"})}catch(o){throw console.error("Erro ao buscar conta bancária:",o),o}}async findByEntidade(a){try{return await q(`/entidade-conta-bancaria/entidade/${a}`,{method:"GET"})}catch(o){throw console.error("Erro ao buscar contas bancárias da entidade:",o),o}}}const us=new nt;function rt({isOpen:s,onClose:a,onSelectBanco:o,title:n="Buscar Conta Bancária",entidadeId:i}){const[y,t]=r.useState([]),[j,N]=r.useState(!1),[v,B]=r.useState({search:"",tipoConta:"all"}),f=r.useCallback(async()=>{N(!0);try{let S,$=[];if(i){if(S=await us.findByEntidade(i),$=S.data||[],v.search){const x=v.search.toLowerCase();$=$.filter(p=>{const V=p.banco?.nome?.toLowerCase()||p.bancoNome?.toLowerCase()||"",U=p.agencia?.toLowerCase()||"",J=p.conta?.toLowerCase()||"";return V.includes(x)||U.includes(x)||J.includes(x)})}v.tipoConta&&v.tipoConta!=="all"&&($=$.filter(x=>x.tipoConta===v.tipoConta))}else S=await us.findAll({search:v.search||void 0,tipoConta:v.tipoConta&&v.tipoConta!=="all"?v.tipoConta:void 0}),$=S.data||[];if(t($),$.length===1&&!v.search&&v.tipoConta==="all"){E.success("Conta bancária selecionada automaticamente"),o($[0]),a();return}}catch(S){console.error("Erro ao buscar contas bancárias:",S),E.error("Erro ao buscar contas bancárias")}finally{N(!1)}},[v,o,a,i]);r.useEffect(()=>{s&&f()},[s,f]);const A=(S,$)=>{B(x=>({...x,[S]:$}))},F=S=>{o(S),a()},P=S=>{switch(S){case"CORRENTE":return"Conta Corrente";case"POUPANCA":return"Poupança";case"SALARIO":return"Conta Salário";default:return S}};return e.jsx(Ie,{open:s,onOpenChange:a,children:e.jsxs(we,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Ee,{children:[e.jsxs(Se,{className:"flex items-center gap-2",children:[e.jsx(Na,{className:"h-5 w-5"}),n]}),e.jsx(Te,{children:"Selecione uma conta bancária para o contrato"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{children:"Buscar"}),e.jsxs("div",{className:"relative",children:[e.jsx(qe,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(b,{placeholder:"Banco, agência, conta...",value:v.search,onChange:S=>A("search",S.target.value),className:"pl-8"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{children:"Tipo de Conta"}),e.jsxs(ge,{value:v.tipoConta,onValueChange:S=>A("tipoConta",S),children:[e.jsx(je,{children:e.jsx(fe,{placeholder:"Todos os tipos"})}),e.jsxs(be,{children:[e.jsx(Q,{value:"all",children:"Todos os tipos"}),e.jsx(Q,{value:"CORRENTE",children:"Conta Corrente"}),e.jsx(Q,{value:"POUPANCA",children:"Poupança"}),e.jsx(Q,{value:"SALARIO",children:"Conta Salário"})]})]})]})]}),e.jsx("div",{className:"space-y-2",children:j?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"mt-2 text-muted-foreground",children:"Buscando contas bancárias..."})]}):y.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ha,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"Nenhuma conta bancária encontrada"})]}):y.map(S=>e.jsx(Z,{className:"border rounded-lg p-4 hover:bg-gray-50 cursor-pointer",onClick:()=>F(S),children:e.jsx(D,{className:"p-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Na,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:S.banco?.nome||S.bancoNome||"Nome não disponível"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Código:"," ",S.banco?.bancoId?.toString().padStart(3,"0")||"N/A"]})]})]}),e.jsxs("div",{className:"text-sm",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Agência:"})," ",S.agencia]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Conta:"})," ",S.conta]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(Ae,{variant:S.tipoConta==="CORRENTE"?"default":"secondary",children:P(S.tipoConta||"")})})]})})},S.entidadeContaBancariaId))})]}),e.jsx("div",{className:"flex justify-end gap-2",children:e.jsx(T,{variant:"outline",onClick:a,children:"Cancelar"})})]})})}const cs=s=>s===0?"0,00":s.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}),ct=async s=>{try{return(await us.findByEntidade(s)).data||[]}catch(a){return console.error("❌ buscarContasBancariasEntidade - Erro ao buscar contas bancárias da entidade:",a),E.error("Erro ao buscar contas bancárias da entidade"),[]}};function tt({contrato:s,contratoTipos:a,onSubmit:o,onCancel:n,isSubmitting:i}){const[y,t]=r.useState("contrato"),[j,N]=r.useState({numeroContrato:"",clienteInfoId:void 0,parceiroInfoId:void 0,socioInfoId:void 0,contratoTipoId:s?.tipo?.contratoTipoId||0,descricao:"",valor:0,ativo:!0,urlContrato:"",itens:[]}),[v,B]=r.useState(""),[f,A]=r.useState(null),[F,P]=r.useState(!1),[S,$]=r.useState(null),[x,p]=r.useState(!1),[V,U]=r.useState(null),[J,K]=r.useState(null),[C,l]=r.useState(""),[R,M]=r.useState({});r.useEffect(()=>{if(s){const I=s.tipo?.contratoTipoId||0;N({numeroContrato:s.numeroContrato||"",clienteInfoId:s.cliente?.clienteInfoId,parceiroInfoId:s.parceiro?.parceiroInfoId,socioInfoId:s.socio?.socioInfoId,contratoTipoId:I,descricao:s.descricao||"",valor:s.valor,ativo:s.ativo??!0,urlContrato:s.urlContrato||"",itens:(s.itens||[]).map(c=>({...c,contaBancaria:c.contaBancaria||void 0,mesVencimento:c.mesVencimento||0,anoVencimento:c.anoVencimento||0}))}),s.cliente?(B("cliente"),$(s.cliente),l("cliente"),K(s.cliente)):s.parceiro?(B("parceiro"),$(s.parceiro),l("parceiro"),K(s.parceiro)):s.socio&&(B("socio"),$(s.socio),l("socio"),K(s.socio)),s.tipo&&A(s.tipo)}},[s]),r.useEffect(()=>{if(j.contratoTipoId>0){const I=a.find(c=>c.contratoTipoId===j.contratoTipoId);if(A(I||null),I){const c=I.tipo==="R"?"C":"D";N(w=>({...w,itens:w.itens.map(O=>({...O,operacao:c}))}))}}},[j.contratoTipoId,a]);const d=j.itens.reduce((I,c)=>I+c.valor,0);r.useEffect(()=>{N(I=>({...I,valor:d}))},[d]);const g=(I,c)=>{N(w=>({...w,[I]:c}))},k=I=>{v!==I&&(B(I),I===C&&J?($(J),I==="cliente"?N(c=>({...c,clienteInfoId:J.clienteInfoId})):I==="parceiro"?N(c=>({...c,parceiroInfoId:J.parceiroInfoId})):I==="socio"&&N(c=>({...c,socioInfoId:J.socioInfoId}))):($(null),N(c=>({...c,clienteInfoId:void 0,parceiroInfoId:void 0,socioInfoId:void 0}))))},Y=I=>{if($(I),N(c=>({...c,clienteInfoId:void 0,parceiroInfoId:void 0,socioInfoId:void 0})),v==="cliente"){const c=I.clienteInfoId;N(w=>({...w,clienteInfoId:c}))}else if(v==="parceiro"){const c=I.parceiroInfoId;N(w=>({...w,parceiroInfoId:c}))}else if(v==="socio"){const c=I.socioInfoId;N(w=>({...w,socioInfoId:c}))}},W=async I=>{U(I);try{const c=Ve.getEntidadeId();if(!c){E.error("Erro: Entidade do usuário não encontrada");return}const w=await ct(c);if(w.length===1){pe(w[0]),E.success("Conta bancária selecionada automaticamente");return}else if(w.length>1){p(!0);return}else E.error("Nenhuma conta bancária encontrada para esta entidade")}catch(c){console.error("Erro ao buscar contas bancárias:",c),E.error("Erro ao buscar contas bancárias")}p(!0)},pe=I=>{V!==null&&N(c=>({...c,itens:c.itens.map((w,O)=>O===V?{...w,entidadeContaBancariaId:I.entidadeContaBancariaId,contaBancaria:I}:w)})),p(!1),U(null)},ye=()=>{const I=new Date,c={descricao:"",valor:0,dataIni:new Date().toISOString().split("T")[0],dataFim:"",diaVencimento:1,ativo:!0,gerarBoleto:!1,juros:0,mora:0,instrucoesBanco:"",operacao:f?.tipo==="R"?"C":"D",entidadeContaBancariaId:void 0,mesVencimento:f?.recorrente?I.getMonth()+1:0,anoVencimento:f?.recorrente?I.getFullYear():0,contaBancaria:void 0};N(w=>({...w,itens:[c,...w.itens]}))},Ce=I=>{N(c=>({...c,itens:c.itens.filter((w,O)=>O!==I)})),M(c=>{const w={...c};delete w[I];const O={};return Object.keys(w).forEach(H=>{const oe=parseInt(H);oe>I?O[oe-1]=w[oe]:oe<I&&(O[oe]=w[oe])}),O})},X=(I,c,w)=>{N(O=>({...O,itens:O.itens.map((H,oe)=>oe===I?{...H,[c]:w}:H)}))},se=I=>{if(I.preventDefault(),!v){E.error("Selecione o tipo de pessoa");return}if(!j.contratoTipoId){E.error("Selecione o tipo de contrato");return}if(!j.descricao.trim()){E.error("Descrição é obrigatória");return}if(j.itens.length===0){E.error("Adicione pelo menos um item ao contrato");return}for(const O of j.itens){if(!O.descricao.trim()){E.error("Descrição do item é obrigatória");return}if(O.valor<=0){E.error("Valor do item deve ser maior que zero");return}if(!O.dataIni){E.error("Data de início do item é obrigatória");return}}const c=s?z():j;j.itens&&j.itens.length>0&&(c.itens=j.itens);const w={...c,itens:c.itens?.map(O=>{const{contaBancaria:H,movimentos:oe,naturezaOperacao:ie,...Re}=O;O.contratoItemId&&(Re.contratoItemId=O.contratoItemId);const de={...Re};if((!de.dataFim||de.dataFim.trim()==="")&&delete de.dataFim,(!de.instrucoesBanco||de.instrucoesBanco.trim()==="")&&delete de.instrucoesBanco,de.dataIni&&!de.dataIni.match(/^\d{4}-\d{2}-\d{2}$/)){const he=new Date(de.dataIni),Me=he.getFullYear(),L=String(he.getMonth()+1).padStart(2,"0"),xe=String(he.getDate()).padStart(2,"0");de.dataIni=`${Me}-${L}-${xe}`}if(de.dataFim&&!de.dataFim.match(/^\d{4}-\d{2}-\d{2}$/)){const he=new Date(de.dataFim),Me=he.getFullYear(),L=String(he.getMonth()+1).padStart(2,"0"),xe=String(he.getDate()).padStart(2,"0");de.dataFim=`${Me}-${L}-${xe}`}return f?.recorrente,de.mesVencimento=Re.mesVencimento??0,de.anoVencimento=Re.anoVencimento??0,de})};o(w)},z=r.useCallback(()=>{if(!s)return j;const I={};j.numeroContrato!==s.numeroContrato&&(I.numeroContrato=j.numeroContrato),j.clienteInfoId!==s.cliente?.clienteInfoId&&(I.clienteInfoId=j.clienteInfoId),j.parceiroInfoId!==s.parceiro?.parceiroInfoId&&(I.parceiroInfoId=j.parceiroInfoId),j.socioInfoId!==s.socio?.socioInfoId&&(I.socioInfoId=j.socioInfoId),j.contratoTipoId!==s.tipo?.contratoTipoId&&(I.contratoTipoId=j.contratoTipoId),j.descricao!==s.descricao&&(I.descricao=j.descricao),j.valor!==s.valor&&(I.valor=j.valor),j.ativo!==s.ativo&&(I.ativo=j.ativo),j.urlContrato!==s.urlContrato&&(I.urlContrato=j.urlContrato);const c=s.itens||[],w=j.itens||[];return console.log("🔍 Debug detecção de mudanças:"),console.log("🔍 Itens originais:",c.length,c),console.log("🔍 Itens atuais:",w.length,w),console.log("🔍 IDs dos itens originais:",c.map(O=>O.contratoItemId)),console.log("🔍 IDs dos itens atuais:",w.map(O=>O.contratoItemId)),c.length!==w.length?(console.log("🔍 Número de itens mudou, incluindo itens nas mudanças"),I.itens=w):w.length>0?w.some((H,oe)=>{const ie=c[oe];return ie?H.descricao!==ie.descricao||H.valor!==ie.valor||H.dataIni!==ie.dataIni||H.dataFim!==ie.dataFim||H.diaVencimento!==ie.diaVencimento||H.ativo!==ie.ativo||H.gerarBoleto!==ie.gerarBoleto||H.juros!==ie.juros||H.mora!==ie.mora||H.instrucoesBanco!==ie.instrucoesBanco||H.entidadeContaBancariaId!==ie.entidadeContaBancariaId||H.mesVencimento!==ie.mesVencimento||H.anoVencimento!==ie.anoVencimento:!0})?(console.log("🔍 Itens foram modificados, incluindo nas mudanças"),I.itens=w):console.log("🔍 Nenhuma mudança nos itens detectada"):console.log("🔍 Nenhum item atual para comparar"),console.log("🔍 Mudanças detectadas:",I),I},[j,s]);return e.jsxs(e.Fragment,{children:[e.jsxs("form",{onSubmit:se,className:"space-y-6",children:[e.jsxs(ua,{value:y,onValueChange:t,children:[e.jsxs(ma,{className:"grid w-full grid-cols-2",children:[e.jsxs(ee,{value:"contrato",className:"flex items-center gap-2",children:[e.jsx(na,{className:"h-4 w-4"}),"Contrato"]}),e.jsxs(ee,{value:"itens",className:"flex items-center gap-2",children:[e.jsx(Ws,{className:"h-4 w-4"}),"Itens (",j.itens.length,")"]})]}),e.jsx(ae,{value:"contrato",className:"space-y-6",children:e.jsxs(Z,{children:[e.jsx(ne,{children:e.jsx(re,{children:"Informações do Contrato"})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2 min-w-[40%] max-w-[50%]",children:[e.jsx(u,{htmlFor:"tipoPessoa",children:"Tipo de Pessoa *"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(T,{type:"button",variant:v==="cliente"?"default":"secondary",onClick:()=>k("cliente"),className:v==="cliente"?"bg-blue-600 hover:bg-blue-700":"",children:"Cliente"}),e.jsx(T,{type:"button",variant:v==="parceiro"?"default":"secondary",onClick:()=>k("parceiro"),className:v==="parceiro"?"bg-blue-600 hover:bg-blue-500":"",children:"Parceiro"}),e.jsx(T,{type:"button",variant:v==="socio"?"default":"secondary",onClick:()=>k("socio"),className:v==="socio"?"bg-blue-600 hover:bg-blue-700":"",children:"Sócio"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ua,{id:"ativo",checked:j.ativo,onCheckedChange:I=>g("ativo",I)}),e.jsx(u,{htmlFor:"ativo",children:"Contrato ativo"})]})]})]}),v&&e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsxs(u,{children:["Selecionar"," ",v==="cliente"?"Cliente":v==="parceiro"?"Parceiro":"Sócio"," ","*"]}),e.jsx(T,{type:"button",className:"w-full justify-start",onClick:()=>{if(!v){E.error("Selecione primeiro o tipo de pessoa (Cliente, Parceiro ou Sócio)");return}P(!0)},children:S?S.nome:`Selecionar ${v==="cliente"?"Cliente":v==="parceiro"?"Parceiro":"Sócio"}`})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2 max-w-[40%]",children:[e.jsx(u,{children:"Tipo de Contrato *"}),e.jsxs(ge,{value:j.contratoTipoId&&j.contratoTipoId>0?j.contratoTipoId.toString():"",onValueChange:I=>{const c=parseInt(I)||0;g("contratoTipoId",c)},children:[e.jsx(je,{children:e.jsx(fe,{placeholder:"Selecione o tipo de contrato"})}),e.jsx(be,{children:a.map(I=>{const c=I.contratoTipoId;return e.jsx(Q,{value:c?.toString()||"0",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:I.descricao}),e.jsx(Ae,{variant:I.tipo==="R"?"default":"destructive",children:I.tipo==="R"?"Receita":"Despesa"}),I.recorrente&&e.jsx(Ae,{variant:"outline",children:"Recorrente"})]})},c)})})]})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2 ",children:[e.jsx(u,{htmlFor:"descricao",children:"Descrição *"}),e.jsx(so,{id:"descricao",value:j.descricao,onChange:I=>g("descricao",I.target.value),rows:3})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2 ",children:[e.jsx(u,{htmlFor:"urlContrato",children:"URL do Contrato"}),e.jsx(b,{id:"urlContrato",value:j.urlContrato,onChange:I=>g("urlContrato",I.target.value)})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2 max-w-[40%]",children:[e.jsx(u,{htmlFor:"valorContrato",children:"Valor do contrato (calculado automaticamente pela soma dos itens)"}),e.jsx(b,{id:"valorContrato",value:`R$ ${cs(j.valor)}`,disabled:!0,className:"bg-green-500 font-bold text-2xl"})]})]})]})}),e.jsx(ae,{value:"itens",className:"space-y-6",children:e.jsxs(Z,{children:[e.jsx(ne,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(re,{children:"Itens do Contrato"}),e.jsxs(T,{type:"button",onClick:ye,size:"sm",className:"flex items-center gap-2",children:[e.jsx(da,{className:"h-4 w-4"}),"Adicionar Item"]})]})}),e.jsx(D,{className:"space-y-4",children:j.itens.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Ws,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Nenhum item adicionado"}),e.jsx("p",{className:"text-sm",children:'Clique em "Adicionar Item" para começar'})]}):(j.itens||[]).map((I,c)=>e.jsxs(Z,{className:"border-l-4 border-l-blue-500",children:[e.jsx(ne,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(re,{className:"text-lg",children:["Item ",c+1]}),e.jsxs("div",{className:"flex items-end justify-end space-x-2 bg-gray-200 p-2",children:[e.jsx(Ua,{id:`ativo-${c}`,checked:I.ativo,onCheckedChange:w=>X(c,"ativo",w)}),e.jsx(u,{htmlFor:`ativo-${c}`,children:"Item ativo"})]}),e.jsx(T,{type:"button",variant:"outline",size:"sm",onClick:()=>Ce(c),className:"text-red-600 hover:text-red-700",children:e.jsx(ga,{className:"h-4 w-4"})})]})}),e.jsxs(D,{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-4 border border-gray-300 rounded-md p-2",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{children:"Descrição *"}),e.jsx(b,{value:I.descricao,onChange:w=>X(c,"descricao",w.target.value)})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 border border-gray-300 rounded-md p-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{children:"Valor *"}),e.jsx(b,{value:R[c]??cs(I.valor||0),onChange:w=>{const O=w.target.value;M(oe=>({...oe,[c]:O}));const H=O.replace(/\D/g,"");if(H){const oe=parseInt(H)/100,ie=Math.min(oe,999999999e-2);X(c,"valor",ie)}else X(c,"valor",0)},onBlur:w=>{const O=w.target.value.replace(/\D/g,"");if(O){const H=parseInt(O)/100,oe=cs(H);M(ie=>({...ie,[c]:oe}))}},placeholder:"0,00"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{children:"Data de Início *"}),e.jsx(b,{type:"date",value:I.dataIni,onChange:w=>X(c,"dataIni",w.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{children:"Data de Fim"}),e.jsx(b,{type:"date",value:I.dataFim,onChange:w=>X(c,"dataFim",w.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{children:"Dia de Vencimento *"}),e.jsx(b,{type:"number",min:"1",max:"28",value:I.diaVencimento||1,onChange:w=>{const O=w.target.value;(O===""||/^\d*$/.test(O))&&X(c,"diaVencimento",O===""?1:parseInt(O)||1)},onBlur:w=>{const O=parseInt(w.target.value)||1,H=Math.min(Math.max(O,1),28);X(c,"diaVencimento",H)}})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 border border-gray-300 rounded-md p-2",children:[f?.recorrente&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{children:"Mês de Vencimento"}),e.jsxs(ge,{value:I.mesVencimento&&I.mesVencimento>0?I.mesVencimento.toString():"select-month",onValueChange:w=>X(c,"mesVencimento",w==="select-month"?0:parseInt(w)),children:[e.jsx(je,{children:e.jsx(fe,{placeholder:"Selecione o mês"})}),e.jsxs(be,{children:[e.jsx(Q,{value:"select-month",children:"Selecione o mês"}),Array.from({length:12},(w,O)=>e.jsx(Q,{value:(O+1).toString(),children:new Date(0,O).toLocaleString("pt-BR",{month:"long"})},O+1))]})]})]}),f?.recorrente&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{children:"Ano de Vencimento"}),e.jsx(b,{type:"number",min:"2024",max:"2150",value:I.anoVencimento&&I.anoVencimento>0?I.anoVencimento.toString():"",onChange:w=>{const O=w.target.value;(O===""||/^\d*$/.test(O))&&X(c,"anoVencimento",O===""?0:parseInt(O)||0)},onBlur:w=>{const O=parseInt(w.target.value);if(O&&O>0){const H=Math.min(Math.max(O,2024),2150);X(c,"anoVencimento",H)}else X(c,"anoVencimento",0)}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{children:"Juros (%)"}),e.jsx(b,{type:"number",step:"0.01",min:"0",max:"100",value:I.juros||0,onChange:w=>{const O=w.target.value;(O===""||/^\d*\.?\d*$/.test(O))&&X(c,"juros",O===""?0:parseFloat(O)||0)},onBlur:w=>{const O=parseFloat(w.target.value)||0,H=Math.min(Math.max(O,0),100);X(c,"juros",H)},placeholder:"0.00"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{children:"Mora (%)"}),e.jsx(b,{type:"number",step:"0.01",min:"0",max:"100",value:I.mora||0,onChange:w=>{const O=w.target.value;(O===""||/^\d*\.?\d*$/.test(O))&&X(c,"mora",O===""?0:parseFloat(O)||0)},onBlur:w=>{const O=parseFloat(w.target.value)||0,H=Math.min(Math.max(O,0),100);X(c,"mora",H)},placeholder:"0.00"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-4 border border-gray-300 rounded-md p-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ua,{id:`gerarBoleto-${c}`,checked:I.gerarBoleto,onCheckedChange:w=>X(c,"gerarBoleto",w)}),e.jsx(u,{htmlFor:`gerarBoleto-${c}`,children:"Gerar boleto para este item"})]}),I.gerarBoleto&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{children:"Instruções do Banco"}),e.jsx(so,{value:I.instrucoesBanco,onChange:w=>X(c,"instrucoesBanco",w.target.value),placeholder:"Instruções para o banco...",rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{children:"Conta Bancária"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(b,{value:I.contaBancaria&&(I.contaBancaria.banco?.nome||I.contaBancaria.bancoNome)?`${I.contaBancaria.banco?.nome||I.contaBancaria.bancoNome} - ${I.contaBancaria.agencia}/${I.contaBancaria.conta}`:"",placeholder:"Selecione uma conta bancária",readOnly:!0,className:"flex-1"}),e.jsx(T,{type:"button",variant:"outline",onClick:()=>{W(c)},children:I.contaBancaria?"Alterar":"Selecionar"})]})]})]})]})]},c))})]})})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[e.jsx(T,{type:"button",variant:"outline",onClick:n,disabled:i,children:"Cancelar"}),e.jsxs(T,{type:"submit",disabled:i,className:"bg-blue-600 hover:bg-blue-700",children:[i?"Salvando...":s?"Atualizar":"Criar"," ","Contrato"]})]})]}),e.jsx(ot,{isOpen:F,onClose:()=>P(!1),onSelectPessoa:Y,title:`Buscar ${v==="cliente"?"Cliente":v==="parceiro"?"Parceiro":"Sócio"}`,tipoPessoa:v||void 0}),e.jsx(rt,{isOpen:x,onClose:()=>{p(!1),U(null)},onSelectBanco:pe,entidadeId:Ve.getEntidadeId()||void 0})]})}class it{baseUrl="/contrato";async listAll(){return await q(`${this.baseUrl}/list-all`)}async findAll(a={}){const o=new URLSearchParams;if(a.page&&o.append("page",a.page.toString()),a.perPage){const y=a.perPage>25?25:a.perPage;o.append("perPage",y.toString())}a.search&&a.search.length>=2&&(o.append("search",a.search),a.searchIn&&o.append("searchIn",a.searchIn)),a.filters&&a.filters.length>0&&a.filters.forEach((y,t)=>{o.append(`filters[${t}][field]`,y.field),o.append(`filters[${t}][operator]`,y.operator),y.content&&o.append(`filters[${t}][content]`,y.content)}),a.order&&Object.entries(a.order).forEach(([y,t])=>{o.append(`order[${y}]`,t)}),a.jsonCollections&&a.jsonCollections.length>0&&o.append("jsonCollections",a.jsonCollections.join(","));const n=o.toString(),i=n?`${this.baseUrl}?${n}`:this.baseUrl;return await q(i)}async findOne(a){return await q(`${this.baseUrl}/${a}`)}async create(a){return await q(this.baseUrl,{method:"POST",body:JSON.stringify(a)})}async update(a,o){return await q(`${this.baseUrl}/${a}`,{method:"PUT",body:JSON.stringify(o)})}async patch(a,o){return await q(`${this.baseUrl}/${a}`,{method:"PATCH",body:JSON.stringify(o)})}async remove(a){await q(`${this.baseUrl}/${a}`,{method:"DELETE"})}}const Oa=new it;class lt{baseUrl="/contrato-tipo";async findAll(){return await q(this.baseUrl)}async findOne(a){return await q(`${this.baseUrl}/${a}`)}async create(a){return await q(this.baseUrl,{method:"POST",body:JSON.stringify(a)})}async update(a,o){return await q(`${this.baseUrl}/${a}`,{method:"PUT",body:JSON.stringify(o)})}async remove(a){await q(`${this.baseUrl}/${a}`,{method:"DELETE"})}}const dt=new lt;function ut(){const[s,a]=r.useState([]),[o,n]=r.useState([]),[i,y]=r.useState(!0),[t,j]=r.useState(""),[N,v]=r.useState("all"),[B,f]=r.useState(!1),[A,F]=r.useState(null),[P,S]=r.useState(!1),[$,x]=r.useState(null),p=r.useRef(null),V=r.useCallback(async()=>{try{y(!0),x(null);const k=await Oa.findAll({page:1,perPage:25});a(k.data)}catch{x("Erro ao carregar contratos"),E.error("Não foi possível carregar os contratos")}finally{y(!1)}},[]),U=r.useCallback(async()=>{try{const k=await dt.findAll();n(k.data||[])}catch{n([])}},[]);r.useEffect(()=>{V(),U()},[V,U]);const J=r.useCallback(k=>{j(k),p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{},300)},[]);r.useEffect(()=>()=>{p.current&&clearTimeout(p.current)},[]);const K=r.useMemo(()=>{let k=s;if(t&&t.length>=2){const Y=t.toLowerCase();k=k.filter(W=>W.numeroContrato?.toLowerCase().includes(Y)||W.descricao?.toLowerCase().includes(Y)||W.cliente?.nome?.toLowerCase().includes(Y)||W.parceiro?.nome?.toLowerCase().includes(Y)||W.socio?.nome?.toLowerCase().includes(Y))}return N!=="all"&&(k=k.filter(Y=>N==="active"&&Y.ativo||N==="inactive"&&!Y.ativo)),k},[s,t,N]),C=k=>{F(k||null),f(!0)},l=()=>{f(!1),F(null)},R=async k=>{try{S(!0),A?(await Oa.patch(A.contratoId,k),E.success("Contrato atualizado com sucesso")):(await Oa.create(k),E.success("Contrato criado com sucesso")),l(),V()}catch{E.error("Não foi possível salvar o contrato")}finally{S(!1)}},M=async k=>{if(confirm("Tem certeza que deseja excluir este contrato?"))try{await Oa.remove(k),await V(),E.success("Contrato removido com sucesso!")}catch{E.error("Erro ao remover contrato")}},d=k=>k.cliente?k.cliente.nome:k.parceiro?k.parceiro.nome:k.socio?k.socio.nome:"N/A",g=k=>k.cliente?"Cliente":k.parceiro?"Parceiro":k.socio?"Sócio":"N/A";return i?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Ne,{className:"h-8 w-8 animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Gestão de Contratos"}),e.jsxs(T,{variant:"outline",onClick:()=>C(),children:[e.jsx(da,{className:"w-4 h-4 mr-2"}),"Novo Contrato"]})]}),$&&e.jsxs("div",{className:"flex items-center gap-2 p-4 bg-red-500/10 border border-red-500/20 rounded-lg",children:[e.jsx(_a,{className:"h-5 w-5 text-red-500"}),e.jsx("span",{className:"text-red-500",children:$})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(qe,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(b,{placeholder:"Buscar por número, descrição ou nome da pessoa...",value:t,onChange:k=>J(k.target.value),className:"pl-8",id:"searchTerm"})]}),e.jsxs(ge,{value:N,onValueChange:v,children:[e.jsx(je,{className:"w-48 bg-white text-black",children:e.jsx(fe,{placeholder:"Filtrar por status"})}),e.jsxs(be,{children:[e.jsx(Q,{value:"all",children:"Todos"}),e.jsx(Q,{value:"active",children:"Ativos"}),e.jsx(Q,{value:"inactive",children:"Inativos"})]})]})]}),e.jsxs(Z,{children:[e.jsx(ne,{children:e.jsxs(re,{children:["Lista de Contratos (",K.length,")"]})}),e.jsx(D,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Ka,{children:[e.jsx(Wa,{children:e.jsxs(_e,{children:[e.jsx(Pe,{children:"Nº Contrato"}),e.jsx(Pe,{children:"Pessoa"}),e.jsx(Pe,{children:"Tipo"}),e.jsx(Pe,{children:"Descrição"}),e.jsx(Pe,{children:"Valor"}),e.jsx(Pe,{children:"Status"}),e.jsx(Pe,{children:"Ações"})]})}),e.jsx(Xa,{children:K.map(k=>e.jsxs(_e,{children:[e.jsx(ve,{className:"font-medium",children:k.numeroContrato||`#${k.contratoId}`}),e.jsx(ve,{children:d(k)}),e.jsx(ve,{children:g(k)}),e.jsx(ve,{children:k.descricao||"N/A"}),e.jsxs(ve,{children:["R$"," ",k.valor.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsx(ve,{children:e.jsx(Ae,{variant:k.ativo?"default":"secondary",className:k.ativo?"bg-green-500":"bg-gray-500",children:k.ativo?"Ativo":"Inativo"})}),e.jsx(ve,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(T,{variant:"outline",size:"sm",onClick:()=>C(k),children:e.jsx(ta,{className:"w-4 h-4"})}),e.jsx(T,{variant:"outline",size:"sm",onClick:()=>M(k.contratoId),children:e.jsx(ga,{className:"w-4 h-4"})})]})})]},k.contratoId))})]})})})]}),e.jsx(Ie,{open:B,onOpenChange:k=>{k||l()},children:e.jsxs(we,{className:"min-w-[65vw] min-h-[35vw] max-h-[35vw] overflow-y-auto",children:[e.jsxs(Ee,{children:[e.jsx(Se,{children:A?"Editar Contrato":"Novo Contrato"}),e.jsx(Te,{children:A?"Atualize as informações do contrato":"Preencha as informações para criar um novo contrato"})]}),e.jsx(tt,{contrato:A,contratoTipos:o,onSubmit:R,onCancel:l,isSubmitting:P})]})})]})}const ba={email:"",ativo:!0,adm:!1,pessoaId:void 0,pessoa:void 0};class ya{static async findAll(){try{return(await q("/usuario")).data}catch(a){throw console.error("Erro ao buscar usuários:",a),a}}static async findByEntidade(a){try{return(await q(`/usuario/entidade/${a}`)).data}catch(o){throw console.error("Erro ao buscar usuários da entidade:",o),o}}static async findOne(a){try{return await q(`/usuario/${a}`)}catch(o){throw console.error("Erro ao buscar usuário:",o),o}}static async create(a){try{return(await q("/usuario",{method:"POST",body:JSON.stringify(this.convertToApiFormat(a))})).usuario}catch(o){throw console.error("Erro ao criar usuário:",o),o}}static async update(a,o){try{return(await q(`/usuario/${a}`,{method:"PATCH",body:JSON.stringify(this.convertToApiFormat(o))})).usuario}catch(n){throw console.error("Erro ao atualizar usuário:",n),n}}static async delete(a){try{await q(`/usuario/${a}`,{method:"DELETE"})}catch(o){throw console.error("Erro ao deletar usuário:",o),o}}static async findByEmailInOtherEntities(a,o){try{return await q(`/usuario/email/${a}/other-entities`,{method:"GET",body:JSON.stringify({currentEntidadeId:o})})}catch(n){throw console.error("Erro ao buscar usuários em outras entidades:",n),n}}static async replicateUserToEntity(a,o){try{return(await q(`/usuario/${a}/replicate`,{method:"POST",body:JSON.stringify({targetEntidadeId:o})})).usuario}catch(n){throw console.error("Erro ao replicar usuário:",n),n}}static convertToApiFormat(a){const o={email:a.email,ativo:a.ativo,adm:a.adm},n=Ve.getEntidadeId();return console.log("🔍 convertToApiFormat - entidadeId:",n),n&&(o.entidadeId=n),a.pessoa?o.pessoa=a.pessoa:a.pessoaId&&(o.pessoaId=a.pessoaId),console.log("🔍 convertToApiFormat - apiData final:",o),o}}function oo({isOpen:s,onClose:a,onSubmit:o,formData:n,setFormData:i,isCreating:y}){const[t,j]=r.useState(!1),[N,v]=r.useState(!1),[B,f]=r.useState(!1),[A,F]=r.useState([]),[P,S]=r.useState(!1),[$,x]=r.useState(!1);r.useEffect(()=>{const g=n.email!==""||n.pessoaId!==void 0||n.pessoa!==void 0||n.ativo!==!0||n.adm!==!1;S(g)},[n]);const p=()=>{P?x(!0):a()},V=()=>{x(!1),S(!1),a()},U=()=>{x(!1)},J=g=>{i({...n,pessoaId:g.pessoaId,pessoa:{tipo:g.tipo,nome:g.nome,documento:g.documento,razao:g.razao||"",entidadeId:g.entidadeId}}),v(!1),E.success("Pessoa selecionada com sucesso!")},K=()=>{i({...n,pessoaId:void 0,pessoa:void 0}),E.success("Pessoa removida com sucesso!")},C=async g=>{if(i({...n,email:g}),g&&g.includes("@"))try{const k=await ya.findByEmailInOtherEntities(g,1);k.length>0&&(F(k),f(!0))}catch(k){console.error("Erro ao verificar email em outras entidades:",k)}},l=async g=>{try{await ya.replicateUserToEntity(g,1);const k=A.find(Y=>Y.usuarioId===g);k&&(i({...n,pessoaId:k.pessoaId}),E.success("Usuário replicado com sucesso!")),f(!1)}catch(k){console.error("Erro ao replicar usuário:",k),E.error("Erro ao replicar usuário")}},R=async g=>{g.preventDefault(),j(!0);try{if(!n.pessoaId&&!n.pessoa){E.error("É obrigatório informar uma pessoa"),j(!1);return}console.log("🔍 UsuarioForm - formData antes de enviar:",n),await o(n),E.success(y?"Usuário criado com sucesso!":"Usuário atualizado com sucesso!"),a()}catch(k){console.error("Erro ao salvar usuário:",k),E.error("Erro ao salvar usuário")}finally{j(!1)}},M=g=>g==="PF"?ia:De,d=g=>g==="PF"?"000.000.000-00":"00.000.000/0000-00";return e.jsxs(e.Fragment,{children:[e.jsx(Ie,{open:s,onOpenChange:p,children:e.jsxs(we,{className:"min-w-[65vw] min-h-[35vw] max-h-[35vw] overflow-y-auto",children:[e.jsxs(Ee,{children:[e.jsx(Se,{children:y?"Cadastrar Usuário":"Editar Usuário"}),e.jsx(Te,{children:y?"Preencha os dados para cadastrar um novo usuário":"Atualize os dados do usuário"})]}),e.jsxs("form",{onSubmit:R,className:"space-y-6",children:[e.jsxs(ua,{defaultValue:"dados-usuario",className:"w-full",children:[e.jsxs(ma,{className:"grid w-full grid-cols-2",children:[e.jsx(ee,{value:"dados-usuario",children:"Dados do Usuário"}),e.jsx(ee,{value:"dados-pessoa",children:"Dados da Pessoa"})]}),e.jsxs(ae,{value:"dados-usuario",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"email",children:"E-mail *"}),e.jsx(b,{id:"email",type:"email",value:n.email,onChange:g=>C(g.target.value),placeholder:"usuario@exemplo.com",autoComplete:"email",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"ativo",children:"Status"}),e.jsxs(ge,{name:"ativo",value:n.ativo?"ativo":"inativo",onValueChange:g=>i({...n,ativo:g==="ativo"}),children:[e.jsx(je,{id:"ativo",children:e.jsx(fe,{})}),e.jsxs(be,{children:[e.jsx(Q,{value:"ativo",children:"Ativo"}),e.jsx(Q,{value:"inativo",children:"Inativo"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"tipoUsuario",children:"Tipo de Usuário"}),e.jsxs(ge,{name:"tipoUsuario",value:n.adm?"adm":"usuario",onValueChange:g=>i({...n,adm:g==="adm"}),children:[e.jsx(je,{id:"tipoUsuario",children:e.jsx(fe,{})}),e.jsxs(be,{children:[e.jsx(Q,{value:"usuario",children:"Usuário"}),e.jsx(Q,{value:"adm",children:"Administrador"})]})]})]}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-900",children:"Pessoa Vinculada"}),e.jsx("p",{className:"text-sm text-blue-700",children:n.pessoaId&&n.pessoa?.nome?n.pessoa.nome:"Selecione ou cadastre uma pessoa"})]})]}),e.jsxs("div",{className:"mt-3 flex space-x-2",children:[e.jsx(T,{type:"button",variant:"outline",onClick:()=>v(!0),children:"Buscar Pessoa"}),n.pessoaId&&e.jsx(T,{type:"button",variant:"destructive",onClick:K,children:"Remover"})]})]})]}),e.jsxs(ae,{value:"dados-pessoa",className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-yellow-50 rounded-lg",children:e.jsx("p",{className:"text-sm text-yellow-800",children:"Se não houver pessoa selecionada, você pode cadastrar uma nova pessoa aqui."})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"tipo",children:"Tipo *"}),e.jsxs(ge,{value:n.pessoa?.tipo||"PF",onValueChange:g=>i({...n,pessoa:{tipo:g,nome:n.pessoa?.nome||"",documento:n.pessoa?.documento||"",razao:n.pessoa?.razao||"",entidadeId:n.pessoa?.entidadeId||1}}),children:[e.jsx(je,{children:e.jsx(fe,{})}),e.jsx(be,{children:ds.map(g=>e.jsx(Q,{value:g.value,children:g.label},g.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"documento",children:"Documento *"}),e.jsx(b,{id:"documento",value:n.pessoa?.documento||"",onChange:g=>{const Y=M(n.pessoa?.tipo||"PF")(g.target.value);i({...n,pessoa:{tipo:n.pessoa?.tipo||"PF",nome:n.pessoa?.nome||"",documento:Y,razao:n.pessoa?.razao||"",entidadeId:n.pessoa?.entidadeId||1}})},placeholder:d(n.pessoa?.tipo||"PF"),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"nome",children:"Nome *"}),e.jsx(b,{id:"nome",value:n.pessoa?.nome||"",onChange:g=>i({...n,pessoa:{tipo:n.pessoa?.tipo||"PF",nome:g.target.value,documento:n.pessoa?.documento||"",razao:n.pessoa?.razao||"",entidadeId:n.pessoa?.entidadeId||1}}),placeholder:"Nome completo",required:!0})]}),(n.pessoa?.tipo||"PF")==="PJ"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"razao",children:"Razão Social"}),e.jsx(b,{id:"razao",value:n.pessoa?.razao||"",onChange:g=>i({...n,pessoa:{tipo:n.pessoa?.tipo||"PF",nome:n.pessoa?.nome||"",documento:n.pessoa?.documento||"",razao:g.target.value,entidadeId:n.pessoa?.entidadeId||1}}),placeholder:"Razão social"})]}),e.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Dica:"}),' Você também pode buscar uma pessoa existente clicando em "Buscar Pessoa" na aba "Dados do Usuário".']})}),e.jsx(T,{type:"button",variant:"outline",onClick:()=>v(!0),children:"Buscar Pessoa"})]})]})]})]}),e.jsxs(ze,{children:[e.jsx(T,{type:"button",variant:"outline",onClick:a,children:"Cancelar"}),e.jsx(T,{type:"submit",disabled:t,children:t?"Salvando...":y?"Cadastrar":"Atualizar"})]})]})]})}),e.jsx(wa,{isOpen:N,onClose:()=>v(!1),onSelectPerson:J}),e.jsx(Ie,{open:B,onOpenChange:f,children:e.jsxs(we,{children:[e.jsxs(Ee,{children:[e.jsx(Se,{children:"Usuário encontrado em outra entidade"}),e.jsx(Te,{children:"O e-mail informado está vinculado a outra entidade. Deseja replicar para esta?"})]}),e.jsx("div",{className:"space-y-4",children:A.map(g=>e.jsx("div",{className:"p-4 border rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:g.email}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Entidade: ",g.entidade?.nome]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Pessoa: ",g.pessoa?.nome]})]}),e.jsx(T,{onClick:()=>l(g.usuarioId),size:"sm",children:"Replicar"})]})},g.usuarioId))}),e.jsx(ze,{children:e.jsx(T,{variant:"outline",onClick:()=>f(!1),children:"Cancelar"})})]})}),e.jsx(Ie,{open:$,onOpenChange:x,children:e.jsxs(we,{children:[e.jsxs(Ee,{children:[e.jsx(Se,{children:"Mudanças não salvas"}),e.jsx(Te,{children:"Você tem mudanças não salvas. Tem certeza que deseja fechar sem salvar?"})]}),e.jsxs(ze,{children:[e.jsx(T,{variant:"outline",onClick:U,children:"Cancelar"}),e.jsx(T,{variant:"destructive",onClick:V,children:"Fechar sem salvar"})]})]})})]})}function mt({title:s="Gestão de Usuários"}){const[a,o]=r.useState([]),[n,i]=r.useState(!1),[y,t]=r.useState(""),[j,N]=r.useState(!1),[v,B]=r.useState(!1),[f,A]=r.useState(null),[F,P]=r.useState(ba);go(),r.useEffect(()=>{S()},[]);const S=async()=>{i(!0);try{const M=Ve.getEntidadeId();if(console.log("🔍 EntidadeId obtido:",M),!M){E.error("Não foi possível obter a entidade do usuário logado");return}console.log("🔍 Buscando usuários da entidade:",M);const d=await ya.findByEntidade(M);console.log("🔍 Usuários encontrados:",d),o(d)}catch(M){console.error("Erro ao carregar usuários:",M),E.error("Erro ao carregar usuários")}finally{i(!1)}},$=async M=>{try{await ya.create(M),await S(),P(ba)}catch(d){throw console.error("Erro ao criar usuário:",d),d}},x=async M=>{if(f)try{await ya.update(f.usuarioId,M),await S(),A(null),P(ba)}catch(d){throw console.error("Erro ao atualizar usuário:",d),d}},p=async M=>{if(window.confirm("Tem certeza que deseja excluir este usuário?"))try{await ya.delete(M),await S(),E.success("Usuário excluído com sucesso!")}catch(d){console.error("Erro ao excluir usuário:",d),E.error("Erro ao excluir usuário")}},V=()=>{P(ba),N(!0)},U=()=>{N(!1),P(ba)},J=M=>{A(M),P({email:M.email,ativo:M.ativo,adm:M.adm,pessoaId:M.pessoaId,pessoa:M.pessoa?{tipo:"PF",nome:M.pessoa.nome,documento:M.pessoa.documento,razao:"",entidadeId:Ve.getEntidadeId()||1}:void 0}),B(!0)},K=()=>{B(!1),A(null),P(ba)},C=a.filter(M=>M.email.toLowerCase().includes(y.toLowerCase())||M.pessoa?.nome.toLowerCase().includes(y.toLowerCase())||M.entidade?.nome.toLowerCase().includes(y.toLowerCase())),l=M=>M?e.jsx(Ae,{variant:"default",className:"bg-green-100 text-green-800",children:"Ativo"}):e.jsx(Ae,{variant:"secondary",className:"bg-red-100 text-red-800",children:"Inativo"}),R=M=>M?e.jsx(Ae,{variant:"default",className:"bg-blue-100 text-blue-800",children:"Administrador"}):e.jsx(Ae,{variant:"outline",children:"Usuário"});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:s}),e.jsx("p",{className:"text-white",children:"Gerencie os usuários do sistema"})]}),e.jsxs(T,{variant:"outline",onClick:V,className:"flex items-center gap-2",children:[e.jsx(da,{className:"h-4 w-4"}),"Novo Usuário"]})]}),e.jsxs(Z,{children:[e.jsx(ne,{children:e.jsxs(re,{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"h-5 w-5"}),"Lista de Usuários"]})}),e.jsxs(D,{children:[e.jsx("div",{className:"flex items-center space-x-2 mb-4",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(qe,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-400"}),e.jsx(b,{placeholder:"Buscar por email, nome ou entidade...",value:y,onChange:M=>t(M.target.value),className:"pl-8",id:"searchTerm"})]})}),n?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs(Ka,{children:[e.jsx(Wa,{children:e.jsxs(_e,{children:[e.jsx(Pe,{children:"E-mail"}),e.jsx(Pe,{children:"Pessoa"}),e.jsx(Pe,{children:"Entidade"}),e.jsx(Pe,{children:"Status"}),e.jsx(Pe,{children:"Tipo"}),e.jsx(Pe,{children:"Ações"})]})}),e.jsx(Xa,{children:C.length===0?e.jsx(_e,{children:e.jsx(ve,{colSpan:6,className:"text-center py-8",children:e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx(Oe,{className:"h-12 w-12 text-gray-400"}),e.jsx("p",{className:"text-gray-500",children:y?"Nenhum usuário encontrado":"Nenhum usuário cadastrado"})]})})}):C.map(M=>e.jsxs(_e,{children:[e.jsx(ve,{className:"font-medium",children:M.email}),e.jsx(ve,{children:M.pessoa?.nome||"N/A"}),e.jsx(ve,{children:M.entidade?.nome||"N/A"}),e.jsx(ve,{children:l(M.ativo)}),e.jsx(ve,{children:R(M.adm)}),e.jsx(ve,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(T,{variant:"outline",size:"sm",onClick:()=>J(M),children:e.jsx(ta,{className:"h-4 w-4"})}),e.jsx(T,{variant:"outline",size:"sm",onClick:()=>p(M.usuarioId),className:"text-red-600 hover:text-red-700",children:e.jsx(ga,{className:"h-4 w-4"})})]})})]},M.usuarioId))})]})]})]}),e.jsx(oo,{isOpen:j,onClose:U,onSubmit:$,formData:F,setFormData:P,isCreating:!0,isUpdating:!1}),e.jsx(oo,{isOpen:v,onClose:K,onSubmit:x,formData:F,setFormData:P,isCreating:!1,isUpdating:!0})]})}function ht({filters:s,setFilters:a,statusOptions:o,onSearch:n,onClear:i,onGerarMovimento:y,isLoading:t=!1}){const[j,N]=r.useState(!1),v=(f,A)=>{a({...s,[f]:A==="all"?void 0:A||void 0})},B=Object.values(s).some(f=>f!=null&&f!=="");return e.jsxs(Z,{className:"mb-6",children:[e.jsx(ne,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(re,{className:"text-lg",children:"Filtros"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>N(!j),children:[e.jsx(vr,{className:"h-4 w-4 mr-2"}),j?"Menos":"Mais"]}),B&&e.jsxs(T,{variant:"outline",size:"sm",onClick:i,children:[e.jsx(ps,{className:"h-4 w-4 mr-2"}),"Limpar"]})]})]})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"status",children:"Status"}),e.jsxs(ge,{value:s.status||"all",onValueChange:f=>v("status",f),children:[e.jsx(je,{id:"status",children:e.jsx(fe,{placeholder:"Selecione o status"})}),e.jsxs(be,{children:[e.jsx(Q,{value:"all",children:"Todos"}),o.map(f=>e.jsx(Q,{value:f,children:f},f))]})]})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"numeroContrato",children:"Número do Contrato"}),e.jsx(b,{id:"numeroContrato",placeholder:"Digite o número do contrato",value:s.numeroContrato||"",onChange:f=>v("numeroContrato",f.target.value)})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"nome",children:"Nome"}),e.jsx(b,{id:"nome",placeholder:"Digite o nome",value:s.nome||"",onChange:f=>v("nome",f.target.value)})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"documento",children:"Documento"}),e.jsx(b,{id:"documento",placeholder:"Digite o documento",value:s.documento||"",onChange:f=>v("documento",f.target.value)})]}),j&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"dataVencimentoInicio",children:"Data Vencimento (Início)"}),e.jsx(b,{id:"dataVencimentoInicio",type:"date",value:s.dataVencimentoInicio||"",onChange:f=>v("dataVencimentoInicio",f.target.value)})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"dataVencimentoFim",children:"Data Vencimento (Fim)"}),e.jsx(b,{id:"dataVencimentoFim",type:"date",value:s.dataVencimentoFim||"",onChange:f=>v("dataVencimentoFim",f.target.value)})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"dataPagamentoInicio",children:"Data Quitação (Início)"}),e.jsx(b,{id:"dataPagamentoInicio",type:"date",value:s.dataPagamentoInicio||"",onChange:f=>v("dataPagamentoInicio",f.target.value)})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"dataPagamentoFim",children:"Data Quitação (Fim)"}),e.jsx(b,{id:"dataPagamentoFim",type:"date",value:s.dataPagamentoFim||"",onChange:f=>v("dataPagamentoFim",f.target.value)})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"dataLancamentoInicio",children:"Data Lançamento (Início)"}),e.jsx(b,{id:"dataLancamentoInicio",type:"date",value:s.dataLancamentoInicio||"",onChange:f=>v("dataLancamentoInicio",f.target.value)})]}),e.jsxs("div",{className:"space-y-2 border border-gray-300 rounded-md p-2",children:[e.jsx(u,{htmlFor:"dataLancamentoFim",children:"Data Lançamento (Fim)"}),e.jsx(b,{id:"dataLancamentoFim",type:"date",value:s.dataLancamentoFim||"",onChange:f=>v("dataLancamentoFim",f.target.value)})]})]}),!j&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-2"}),e.jsx("div",{className:"space-y-2"})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[e.jsxs(T,{onClick:y,disabled:t,children:[e.jsx(da,{className:"h-4 w-4 mr-2"}),t?"Gerando...":"Gerar Movimento"]}),e.jsxs(T,{onClick:n,disabled:t,children:[e.jsx(qe,{className:"h-4 w-4 mr-2"}),t?"Buscando...":"Buscar"]})]})]})})]})}function pt({formData:s,setFormData:a,isLoading:o=!1,onSubmit:n,onCancel:i,movimento:y}){const[t,j]=r.useState(null),N=r.useRef(null),v=(P,S)=>{a({...s,[P]:S})},B=P=>{const S=P.target.files?.[0];if(S){if(S.size>5*1024*1024){alert("Arquivo muito grande. Tamanho máximo: 5MB");return}if(!["application/pdf","image/jpeg","image/jpg","image/png"].includes(S.type)){alert("Tipo de arquivo não permitido. Use PDF, JPG ou PNG");return}if(a({...s,comprovante:S}),S.type.startsWith("image/")){const x=URL.createObjectURL(S);j(x)}else j(null)}},f=()=>{a({...s,comprovante:void 0}),j(null),N.current&&(N.current.value="")},A=async P=>{P.preventDefault(),await n(s)},F=P=>{if(!P)return e.jsx(na,{className:"h-4 w-4"});switch(P.split(".").pop()?.toLowerCase()){case"pdf":return e.jsx(na,{className:"h-4 w-4 text-red-500"});case"jpg":case"jpeg":case"png":return e.jsx(na,{className:"h-4 w-4 text-blue-500"});default:return e.jsx(na,{className:"h-4 w-4"})}};return e.jsxs("form",{onSubmit:A,className:"space-y-6",children:[e.jsxs(Z,{children:[e.jsx(ne,{children:e.jsx(re,{children:"Informações do Pagamento"})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ua,{id:"pago",checked:s.pago,onCheckedChange:P=>{const S=P===!0,$={...s,pago:S,...S?{}:{valorEfetivo:0,dataPagamento:""}};a($)}}),e.jsx(u,{htmlFor:"pago",children:"Marcar como pago/recebido"})]}),s.pago&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"dataPagamento",children:"Data do Pagamento/Recebimento"}),e.jsx(b,{id:"dataPagamento",type:"date",value:s.dataPagamento,onChange:P=>v("dataPagamento",P.target.value),required:s.pago})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"valorEfetivo",children:"Valor Efetivo"}),e.jsx(b,{id:"valorEfetivo",type:"number",step:"0.01",min:"0",value:s.valorEfetivo,onChange:P=>{const S=P.target.value,$=S===""?0:parseFloat(S)||0;v("valorEfetivo",$)},placeholder:"0,00"})]})]})]})]}),e.jsxs(Z,{children:[e.jsx(ne,{children:e.jsx(re,{children:"Comprovante"})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"comprovante",children:"Arquivo do Comprovante"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{ref:N,id:"comprovante",type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:B,className:"flex-1"}),e.jsxs(T,{type:"button",variant:"outline",size:"sm",onClick:()=>N.current?.click(),children:[e.jsx(Fr,{className:"h-4 w-4 mr-2"}),"Selecionar"]})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Formatos aceitos: PDF, JPG, PNG. Tamanho máximo: 5MB"})]}),s.comprovante&&e.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[F(s.comprovante.name),e.jsx("span",{className:"text-sm font-medium",children:s.comprovante.name}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",(s.comprovante.size/1024/1024).toFixed(2)," MB)"]})]}),e.jsx(T,{type:"button",variant:"ghost",size:"sm",onClick:f,children:e.jsx(ps,{className:"h-4 w-4"})})]}),t&&e.jsx("div",{className:"mt-3",children:e.jsx("img",{src:t,alt:"Preview",className:"max-w-full h-32 object-contain border rounded"})})]}),y?.urlComprovante&&!s.comprovante&&e.jsxs(Hn,{children:[e.jsx(na,{className:"h-4 w-4"}),e.jsxs(Yn,{children:["Comprovante atual: ",y.urlComprovante.split("/").pop()]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(T,{type:"button",variant:"outline",onClick:i,disabled:o,children:"Cancelar"}),e.jsx(T,{type:"submit",disabled:o,children:o?e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"mr-2 h-4 w-4 animate-spin"}),"Salvando..."]}):"Salvar"})]})]})}class xt{async findReceitas(a={}){const o=new URLSearchParams;return Object.entries(a).forEach(([n,i])=>{i!=null&&i!==""&&o.append(n,i.toString())}),await q(`/movimento/receitas?${o.toString()}`)}async findDespesas(a={}){const o=new URLSearchParams;return Object.entries(a).forEach(([n,i])=>{i!=null&&i!==""&&o.append(n,i.toString())}),await q(`/movimento/despesas?${o.toString()}`)}async getReceitasStatus(){return await q("/movimento/receitas/status")}async getDespesasStatus(){return await q("/movimento/despesas/status")}async updatePagamento(a,o){return await q(`/movimento/${a}/pagamento`,{method:"PATCH",body:JSON.stringify(o)})}async uploadComprovante(a,o){return await q(`/movimento/${a}/comprovante`,{method:"POST",body:JSON.stringify(o)})}async downloadComprovante(a){const o=localStorage.getItem("ct_one_token"),n=await fetch(`/api/movimento/comprovante/${a}`,{headers:{Authorization:`Bearer ${o}`}});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.blob()}formatCurrency(a){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a)}formatDate(a){if(!a)return"";if(a.match(/^\d{4}-\d{2}-\d{2}$/)){const[n,i,y]=a.split("-");return new Date(parseInt(n),parseInt(i)-1,parseInt(y)).toLocaleDateString("pt-BR")}return new Date(a).toLocaleDateString("pt-BR")}getStatusColor(a){switch(a){case"RECEBIDO":case"PAGO":return"bg-green-100 text-green-800";case"EM ABERTO":return"bg-blue-100 text-blue-800";case"EM ATRASO":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}async verificarExistenciaMovimento(a,o,n){return await q(`/movimento/verificar-existencia/${a}/${o}/${n}`)}async gerarMovimento(a){return await q("/movimento/gerar",{method:"POST",body:JSON.stringify(a)})}}const te=new xt;function vt({isOpen:s,onClose:a,movimento:o,tipo:n}){if(!o)return null;const i=N=>{switch(N){case"S":return"Sócio";case"P":return"Parceiro";case"C":return"Cliente";default:return"Cliente"}},y=N=>{const v=te.getStatusColor(N);return e.jsx(Ae,{className:v,children:N})},t=N=>te.formatCurrency(N),j=N=>te.formatDate(N);return e.jsx(Ie,{open:s,onOpenChange:a,children:e.jsxs(we,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Ee,{children:e.jsxs(Se,{children:["Detalhes da ",n==="receita"?"Receita":"Despesa"]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Z,{children:[e.jsx(ne,{children:e.jsx(re,{className:"text-lg",children:"Informações Gerais"})}),e.jsx(D,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Status"}),e.jsx("div",{className:"mt-1",children:y(o.status)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"ID do Movimento"}),e.jsx("div",{className:"mt-1",children:o.movimentoId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Data de Vencimento"}),e.jsx("div",{className:"mt-1",children:j(o.dataVencimento)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Data da Quitação"}),e.jsx("div",{className:"mt-1",children:o.dataPagamento?j(o.dataPagamento):"Não pago"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Pago"}),e.jsx("div",{className:"mt-1",children:e.jsx(Ae,{variant:o.pago?"default":"secondary",children:o.pago?"Sim":"Não"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Dias de Atraso"}),e.jsxs("div",{className:"mt-1",children:[o.diasAtraso," dias"]})]})]})})]}),e.jsxs(Z,{children:[e.jsx(ne,{children:e.jsx(re,{className:"text-lg",children:"Valores"})}),e.jsx(D,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Valor Original"}),e.jsx("div",{className:"mt-1 text-lg font-semibold",children:t(o.valor)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Valor Efetivo"}),e.jsx("div",{className:"mt-1 text-lg font-semibold",children:o.valorEfetivo?t(o.valorEfetivo):"Não informado"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Juros"}),e.jsx("div",{className:"mt-1",children:o.juros?t(o.juros):"R$ 0,00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Mora"}),e.jsx("div",{className:"mt-1",children:o.mora?t(o.mora):"R$ 0,00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Valor dos Juros"}),e.jsx("div",{className:"mt-1",children:t(o.vrJuros)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Valor da Mora"}),e.jsx("div",{className:"mt-1",children:t(o.vrMora)})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Valor Total com Correções"}),e.jsx("div",{className:"mt-1 text-xl font-bold text-green-600",children:t(o.valorTotalComCorrecoes)})]})]})})]}),e.jsxs(Z,{children:[e.jsx(ne,{children:e.jsx(re,{className:"text-lg",children:i(o.tipoContrato)})}),e.jsx(D,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Nome"}),e.jsx("div",{className:"mt-1",children:o.nome})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Documento"}),e.jsx("div",{className:"mt-1",children:o.documento})]})]})})]}),e.jsxs(Z,{children:[e.jsx(ne,{children:e.jsx(re,{className:"text-lg",children:"Contrato"})}),e.jsx(D,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Número do Contrato"}),e.jsx("div",{className:"mt-1",children:o.numeroContrato})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"ID do Contrato"}),e.jsx("div",{className:"mt-1",children:o.contratoId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Descrição do Contrato"}),e.jsx("div",{className:"mt-1",children:o.contrato})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Tipo do Contrato"}),e.jsx("div",{className:"mt-1",children:o.tipoContrato})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Valor do Contrato"}),e.jsx("div",{className:"mt-1",children:t(o.valorContrato)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Contrato Ativo"}),e.jsx("div",{className:"mt-1",children:e.jsx(Ae,{variant:o.contratoAtivo?"default":"secondary",children:o.contratoAtivo?"Sim":"Não"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"ID do Item do Contrato"}),e.jsx("div",{className:"mt-1",children:o.contratoItemId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Gerar Boleto"}),e.jsx("div",{className:"mt-1",children:e.jsx(Ae,{variant:o.gerarBoleto?"default":"secondary",children:o.gerarBoleto?"Sim":"Não"})})]})]})})]}),e.jsxs(Z,{children:[e.jsx(ne,{children:e.jsx(re,{className:"text-lg",children:"Descrição"})}),e.jsx(D,{children:e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Descrição do Movimento"}),e.jsx("div",{className:"mt-1",children:o.descricao})]})})]}),o.urlComprovante&&e.jsxs(Z,{children:[e.jsx(ne,{children:e.jsx(re,{className:"text-lg",children:"Comprovante"})}),e.jsx(D,{children:e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Comprovante Disponível"}),e.jsx("div",{className:"mt-1",children:e.jsx(Ae,{variant:"default",children:"Sim"})})]})})]})]})]})})}const ts={pago:!1,dataPagamento:"",valorEfetivo:0,comprovante:void 0};class La{static async getFluxoCaixa(a,o){try{return await q(`/fluxo-caixa/${a}/${o}`,{method:"GET"})}catch(n){throw console.error("Erro ao buscar fluxo de caixa:",n),n}}static async gerarDividendos(a,o){try{return await q("/fluxo-caixa/gerar-dividendos",{method:"POST",body:JSON.stringify({mes:a,ano:o})})}catch(n){throw console.error("Erro ao gerar dividendos:",n),n}}static async deletarDividendos(a,o){try{return await q("/fluxo-caixa/deletar-dividendos",{method:"POST",body:JSON.stringify({mes:a,ano:o})})}catch(n){throw console.error("Erro ao deletar dividendos:",n),n}}static async verificarDividendos(a,o){try{return await q("/fluxo-caixa/verificar-dividendos",{method:"POST",body:JSON.stringify({mes:a,ano:o})})}catch(n){throw console.error("Erro ao verificar dividendos:",n),n}}}class va{static async getCaixaEntidade(a){try{return await q(`/financeiro/caixa-entidade/${a}`)}catch(o){throw console.error("Erro ao buscar caixa da entidade:",o),o}}static async getDividendos(a){try{return await q(`/financeiro/dividendos/${a}`)}catch(o){throw console.error("Erro ao buscar dividendos:",o),o}}static async getTotal(a,o){try{return await q(`/financeiro/total/${a}/${o}`)}catch(n){throw console.error("Erro ao buscar total:",n),n}}static async createDividendo(a){try{return await q("/financeiro/dividendos",{method:"POST",body:JSON.stringify(a)})}catch(o){throw console.error("Erro ao criar dividendo:",o),o}}static async verificarDividendoPago(a,o,n){try{return await q(`/financeiro/dividendo-pago/${a}/${o}/${n}`)}catch(i){throw console.error("Erro ao verificar dividendo pago:",i),i}}}function gt({title:s="Gestão Financeira"}){const[a,o]=r.useState("receitas"),[n,i]=r.useState([]),[y,t]=r.useState([]),[j,N]=r.useState(null),[v,B]=r.useState(null),[f,A]=r.useState(!1),[F,P]=r.useState({page:1,limit:15}),[S,$]=r.useState([]),[x,p]=r.useState(!1),[V,U]=r.useState(null),[J,K]=r.useState(!1),[C,l]=r.useState(null),[R,M]=r.useState(ts),[d,g]=r.useState(!1),[k,Y]=r.useState(1),[W,pe]=r.useState(1),[ye,Ce]=r.useState(!1),[X,se]=r.useState(!1),[z,I]=r.useState(""),[c,w]=r.useState(""),[O,H]=r.useState(null),[oe,ie]=r.useState([]),[Re,de]=r.useState(!1),[he,Me]=r.useState((new Date().getMonth()+1).toString()),[L,xe]=r.useState(new Date().getFullYear().toString()),[Fe,m]=r.useState(0),[le,ke]=r.useState(0),[Ge,aa]=r.useState(!1),[ks,Rs]=r.useState(!1),[as,dn]=r.useState([]),[Fs,un]=r.useState([]),[mn,Bs]=r.useState(!1),[hn,$a]=r.useState(!1),[Le,Sa]=r.useState({mes:"",ano:"",justificativa:"",valor:""}),[ss,As]=r.useState(!1),[ja,pn]=r.useState("caixa"),[os,xn]=r.useState(null);r.useEffect(()=>{ns(),gn();const h=Ve.getEntidadeId();H(h)},[a,F]),r.useEffect(()=>{const h=()=>{const _=Ve.getEntidadeId();H(_)};if(h(),!O){const _=setTimeout(h,100);return()=>clearTimeout(_)}},[]),r.useEffect(()=>{if(ye){const h=new Date,_=(h.getMonth()+1).toString(),G=h.getFullYear().toString();I(_),w(G)}},[ye,O]),r.useEffect(()=>{a==="caixa-dividendos"&&Ms()},[a]);const vn=h=>{const _=Object.keys(h).length===1&&h.status;return Object.keys(h).length===0||Object.keys(h).length===1&&h.status==="all"||_?{orderBy:"data_vencimento",orderDirection:"DESC"}:h.dataVencimentoInicio||h.dataVencimentoFim?{orderBy:"data_vencimento",orderDirection:"DESC"}:h.dataPagamentoInicio||h.dataPagamentoFim?{orderBy:"data_pagamento",orderDirection:"DESC"}:h.dataLancamentoInicio||h.dataLancamentoFim?{orderBy:"data_lancamento",orderDirection:"DESC"}:{orderBy:"data_vencimento",orderDirection:"DESC"}},ns=async()=>{A(!0);try{const h=vn(F),_={...F,...h};if(a==="receitas"){const G=await te.findReceitas(_);i(G.data),N(G.totalizadores),pe(Math.ceil(G.totalizadores.totalRegistros/(F.limit||15))),Y(F.page||1)}else{const G=await te.findDespesas(_);t(G.data),B(G.totalizadores),pe(Math.ceil(G.totalizadores.totalRegistros/(F.limit||15))),Y(F.page||1)}}catch(h){console.error("Erro ao carregar dados:",h),E.error("Erro ao carregar dados")}finally{A(!1)}},gn=async()=>{try{if(a==="receitas"){const h=await te.getReceitasStatus();$(h.status)}else{const h=await te.getDespesasStatus();$(h.status)}}catch(h){console.error("Erro ao carregar status:",h)}},jn=()=>{P({...F,page:1})},fn=()=>{P({page:1,limit:15})},fa=h=>{P({...F,page:h})},bn=()=>{Ce(!0)},rs=async()=>{if(!he||!L){E.error("Por favor, selecione o mês e ano");return}de(!0);try{const h=await La.getFluxoCaixa(parseInt(he),parseInt(L));if(ie(h.data),h.data.length>0){const _=h.data.find(ce=>ce.descricao.toLowerCase().includes("saldo anterior")),G=h.data[h.data.length-1];m(_?.saldoAcumulado||0),ke(G?.saldoAcumulado||0)}else m(0),ke(0);E.success("Fluxo de caixa carregado com sucesso")}catch(h){console.error("Erro ao carregar fluxo de caixa:",h),E.error("Erro ao carregar fluxo de caixa")}finally{de(!1)}},yn=async()=>{if(!he||!L){E.error("Por favor, selecione o mês e ano");return}const h=Ve.getEntidadeId();if(!h){E.error("Entidade não encontrada");return}if(window.confirm("Gerar dividendos para este período impedirá a geração de movimento. Deseja prosseguir?")){aa(!0);try{if((await va.verificarDividendoPago(h,parseInt(he),parseInt(L))).existeDividendoPago){E.error("Existe dividendo pago para este período ou futuro");return}const ce=await La.gerarDividendos(parseInt(he),parseInt(L));ce.sucesso?(E.success(ce.mensagem),await rs()):E.error(ce.mensagem)}catch(G){console.error("Erro ao gerar dividendos:",G),E.error("Erro ao gerar dividendos")}finally{aa(!1)}}},Cn=async()=>{if(!he||!L){E.error("Por favor, selecione o mês e ano");return}const h=Ve.getEntidadeId();if(!h){E.error("Entidade não encontrada");return}Rs(!0);try{if((await va.verificarDividendoPago(h,parseInt(he),parseInt(L))).existeDividendoPago){E.error("Existe dividendo pago para este período ou futuro");return}const G=await La.deletarDividendos(parseInt(he),parseInt(L));G.sucesso?(E.success(G.mensagem),await rs()):E.error(G.mensagem)}catch(_){console.error("Erro ao deletar dividendos:",_),E.error("Erro ao deletar dividendos")}finally{Rs(!1)}},Ms=async()=>{const h=Ve.getEntidadeId();if(!h){E.error("Entidade não encontrada");return}Bs(!0);try{const[_,G]=await Promise.all([va.getCaixaEntidade(h),va.getDividendos(h)]);dn(_.data),un(G.data)}catch(_){console.error("Erro ao carregar dados de caixa/dividendos:",_),E.error("Erro ao carregar dados de caixa/dividendos")}finally{Bs(!1)}},$s=(h,_)=>{pn(h),xn(_),Sa({mes:"",ano:"",justificativa:"",valor:""}),$a(!0)},Nn=async()=>{if(!Le.mes||!Le.ano||!Le.justificativa||!Le.valor){E.error("Todos os campos são obrigatórios");return}const h=Ve.getEntidadeId();if(!h||!os){E.error("Erro ao obter dados da entidade");return}As(!0);try{const _=parseFloat(Le.valor),G=parseInt(Le.mes),ce=parseInt(Le.ano),$e=ja==="caixa"?h:os,za=ja==="caixa"?"E":"S",Ta=await va.getTotal($e,za);if(_>Ta.total){E.error("Valor acima do disponível");return}if((await va.verificarDividendoPago(h,G,ce)).existeDividendoPago){E.error("Existe dividendo pago para este período ou futuro");return}const Gs={destino:ja==="caixa"?"E":"S",id:ja==="caixa"?h:os,mes:G,ano:ce,valor:-_,entidadeId:h,descricao:ja==="caixa"?`Retirada de caixa: ${Le.justificativa}`:`Pagamento de dividendo: ${Le.justificativa}`};await va.createDividendo(Gs),E.success("Retirada realizada com sucesso"),$a(!1),Ms()}catch(_){console.error("Erro ao realizar retirada:",_),E.error("Erro ao realizar retirada")}finally{As(!1)}},In=async()=>{const h=Ve.getEntidadeId();if(!z||!c||!h){E.error("Por favor, selecione mês e ano e verifique se está logado");return}const _=parseInt(z),G=parseInt(c),ce=new Date,$e=ce.getMonth()+1,za=ce.getFullYear();if(G>za||G===za&&_>$e){E.error("Não é possível gerar movimentos para datas futuras");return}try{se(!0);const{existe:Ta}=await La.verificarDividendos(_,G);if(Ta){E.error("Não é possível gerar movimentos. Existem dividendos a partir deste mês/ano."),se(!1);return}const{existe:qs}=await te.verificarExistenciaMovimento(h,_,G);if(qs&&!window.confirm(`Já existem movimentos para ${_}/${G}. Deseja refazer os movimentos?`)){se(!1);return}await te.gerarMovimento({entidadeId:h,mes:_,ano:G}),E.success(`Movimentos gerados com sucesso para ${_}/${G}`),Ce(!1),ns()}catch(Ta){console.error("Erro ao gerar movimento:",Ta),E.error("Erro ao gerar movimento")}finally{se(!1)}},zs=h=>{U(h),M({pago:h.pago,dataPagamento:h.pago&&h.dataPagamento||"",valorEfetivo:h.pago&&(h.valorEfetivo||h.valor)||0,comprovante:void 0}),p(!0)},Os=async h=>{try{const _=h.split("/").pop()?.split(".")[0];if(!_){E.error("UUID do comprovante não encontrado");return}const G=await te.downloadComprovante(_),ce=window.URL.createObjectURL(G),$e=document.createElement("a");$e.href=ce,$e.download=h.split("/").pop()||"comprovante",document.body.appendChild($e),$e.click(),window.URL.revokeObjectURL(ce),document.body.removeChild($e),E.success("Comprovante baixado com sucesso")}catch(_){console.error("Erro ao baixar comprovante:",_),E.error("Erro ao baixar comprovante")}},Ls=h=>{l(h),K(!0)},wn=async h=>{if(V){g(!0);try{if(await te.updatePagamento(V.movimentoId,{pago:h.pago,dataPagamento:h.pago&&h.dataPagamento||void 0,valorEfetivo:h.pago&&h.valorEfetivo||0}),h.comprovante){const _=await En(h.comprovante),G=h.comprovante.name.split(".").pop()?.toLowerCase();await te.uploadComprovante(V.movimentoId,{arquivo:_,nomeArquivo:h.comprovante.name,tipoArquivo:G})}E.success("Movimento atualizado com sucesso"),p(!1),U(null),M(ts),await ns()}catch(_){console.error("Erro ao atualizar movimento:",_),E.error("Erro ao atualizar movimento")}finally{g(!1)}}},En=h=>new Promise((_,G)=>{const ce=new FileReader;ce.readAsDataURL(h),ce.onload=()=>{const $e=ce.result;_($e.split(",")[1])},ce.onerror=$e=>G($e)}),_s=h=>{const _=te.getStatusColor(h);return e.jsx(Ae,{className:_,children:h})},Sn=[{key:"status",header:"Status",render:h=>_s(h.status)},{key:"dataVencimento",header:"Venc./Quitação",render:h=>{const _=h.status==="PAGO"?h.dataPagamento:h.dataVencimento;return te.formatDate(_||"")}},{key:"valor",header:"Valor",render:h=>te.formatCurrency(h.valor)},{key:"valorTotalComCorrecoes",header:"Vr. Atualizado",render:h=>te.formatCurrency(h.valorTotalComCorrecoes)},{key:"nome",header:"Nome"},{key:"numeroContrato",header:"Contrato"},{key:"descricao",header:"Descrição"},{key:"actions",header:"Ações",render:h=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(T,{variant:"outline",size:"sm",onClick:()=>Ls(h),children:e.jsx(Ks,{className:"h-4 w-4"})}),e.jsx(T,{variant:"outline",size:"sm",onClick:()=>zs(h),children:e.jsx(ta,{className:"h-4 w-4"})}),h.urlComprovante&&e.jsx(T,{variant:"outline",size:"sm",onClick:()=>Os(h.urlComprovante),title:"Baixar comprovante",children:e.jsx(Ys,{className:"h-4 w-4"})})]})}],Tn=[{key:"status",header:"Status",render:h=>_s(h.status)},{key:"dataVencimento",header:"Venc./Quitação",render:h=>{const _=h.status==="PAGO"?h.dataPagamento:h.dataVencimento;return te.formatDate(_||"")}},{key:"valor",header:"Valor",render:h=>te.formatCurrency(h.valor)},{key:"valorTotalComCorrecoes",header:"Vr. Atualizado",render:h=>te.formatCurrency(h.valorTotalComCorrecoes)},{key:"nome",header:"Fornecedor"},{key:"numeroContrato",header:"Contrato"},{key:"descricao",header:"Descrição"},{key:"actions",header:"Ações",render:h=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(T,{variant:"outline",size:"sm",onClick:()=>Ls(h),children:e.jsx(Ks,{className:"h-4 w-4"})}),e.jsx(T,{variant:"outline",size:"sm",onClick:()=>zs(h),children:e.jsx(ta,{className:"h-4 w-4"})}),h.urlComprovante&&e.jsx(T,{variant:"outline",size:"sm",onClick:()=>Os(h.urlComprovante),title:"Baixar comprovante",children:e.jsx(Ys,{className:"h-4 w-4"})})]})}],Vs=a==="receitas"?n:y,Us=a==="receitas"?Sn:Tn,Be=a==="receitas"?j:v;return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-3xl font-bold text-white",children:s})}),a!=="fluxo-caixa"&&a!=="caixa-dividendos"&&e.jsx(ht,{filters:F,setFilters:P,statusOptions:S,onSearch:jn,onClear:fn,onGerarMovimento:bn,isLoading:f}),e.jsxs(ua,{value:a,onValueChange:h=>o(h),children:[e.jsxs(ma,{className:"grid w-full grid-cols-4",children:[e.jsxs(ee,{value:"receitas",className:"flex items-center gap-2",children:[e.jsx(Va,{className:"h-4 w-4"}),"Receitas"]}),e.jsxs(ee,{value:"despesas",className:"flex items-center gap-2",children:[e.jsx(Pr,{className:"h-4 w-4"}),"Despesas"]}),e.jsxs(ee,{value:"fluxo-caixa",className:"flex items-center gap-2",children:[e.jsx(Hs,{className:"h-4 w-4"}),"Fluxo de Caixa"]}),e.jsxs(ee,{value:"caixa-dividendos",className:"flex items-center gap-2",children:[e.jsx(oa,{className:"h-4 w-4"}),"Caixa/Dividendos"]})]}),e.jsxs(ae,{value:"receitas",className:"space-y-4",children:[Be&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(Z,{children:[e.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(re,{className:"text-sm font-medium",children:"Total"}),e.jsx(oa,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:te.formatCurrency(Be.valorTotal)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Be.totalRegistros," registros"]})]})]}),e.jsxs(Z,{children:[e.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(re,{className:"text-sm font-medium",children:a==="receitas"?"Recebido":"Pago"}),e.jsx(Va,{className:"h-4 w-4 text-green-600"})]}),e.jsx(D,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:te.formatCurrency(Be.valorRecebido||Be.valorPago||0)})})]}),e.jsxs(Z,{children:[e.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(re,{className:"text-sm font-medium",children:"Em Aberto"}),e.jsx(_a,{className:"h-4 w-4 text-yellow-600"})]}),e.jsx(D,{children:e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:te.formatCurrency(Be.valorEmAberto)})})]}),e.jsxs(Z,{children:[e.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(re,{className:"text-sm font-medium",children:"Com Correções"}),e.jsx(oa,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:te.formatCurrency(Be.valorTotalComCorrecoes)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Juros:"," ",te.formatCurrency(Be.totalJuros)," ","| Mora:"," ",te.formatCurrency(Be.totalMora)]})]})]})]}),e.jsxs(Z,{children:[e.jsx(ne,{children:e.jsxs(re,{children:["Lista de ",a==="receitas"?"Receitas":"Despesas"]})}),e.jsx(D,{children:f?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(Ne,{className:"h-8 w-8 animate-spin"})}):e.jsx(Ba,{title:"",data:Vs,columns:Us,keyExtractor:h=>h.movimentoId})})]}),W>1&&e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>fa(k-1),disabled:k===1||f,children:[e.jsx(Ra,{className:"h-4 w-4"}),"Anterior"]}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,W)},(h,_)=>{let G;return W<=5||k<=3?G=_+1:k>=W-2?G=W-4+_:G=k-2+_,e.jsx(T,{variant:k===G?"default":"outline",size:"sm",onClick:()=>fa(G),disabled:f,className:"w-8 h-8 p-0",children:G},G)})}),e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>fa(k+1),disabled:k===W||f,children:["Próxima",e.jsx(Fa,{className:"h-4 w-4"})]})]})]}),e.jsxs(ae,{value:"despesas",className:"space-y-4",children:[Be&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(Z,{children:[e.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(re,{className:"text-sm font-medium",children:"Total"}),e.jsx(oa,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:te.formatCurrency(Be.valorTotal)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Be.totalRegistros," registros"]})]})]}),e.jsxs(Z,{children:[e.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(re,{className:"text-sm font-medium",children:"Pago"}),e.jsx(Va,{className:"h-4 w-4 text-green-600"})]}),e.jsx(D,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:te.formatCurrency(Be.valorPago||0)})})]}),e.jsxs(Z,{children:[e.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(re,{className:"text-sm font-medium",children:"Em Aberto"}),e.jsx(_a,{className:"h-4 w-4 text-yellow-600"})]}),e.jsx(D,{children:e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:te.formatCurrency(Be.valorEmAberto)})})]}),e.jsxs(Z,{children:[e.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(re,{className:"text-sm font-medium",children:"Com Correções"}),e.jsx(oa,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:te.formatCurrency(Be.valorTotalComCorrecoes)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Juros:"," ",te.formatCurrency(Be.totalJuros)," ","| Mora:"," ",te.formatCurrency(Be.totalMora)]})]})]})]}),e.jsxs(Z,{children:[e.jsx(ne,{children:e.jsx(re,{children:"Lista de Despesas"})}),e.jsx(D,{children:f?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(Ne,{className:"h-8 w-8 animate-spin"})}):e.jsx(Ba,{title:"",data:Vs,columns:Us,keyExtractor:h=>h.movimentoId})})]}),W>1&&e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>fa(k-1),disabled:k===1||f,children:[e.jsx(Ra,{className:"h-4 w-4"}),"Anterior"]}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,W)},(h,_)=>{let G;return W<=5||k<=3?G=_+1:k>=W-2?G=W-4+_:G=k-2+_,e.jsx(T,{variant:k===G?"default":"outline",size:"sm",onClick:()=>fa(G),disabled:f,className:"w-8 h-8 p-0",children:G},G)})}),e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>fa(k+1),disabled:k===W||f,children:["Próxima",e.jsx(Fa,{className:"h-4 w-4"})]})]})]}),e.jsxs(ae,{value:"fluxo-caixa",className:"space-y-4",children:[e.jsxs(Z,{children:[e.jsx(ne,{children:e.jsx(re,{children:"Consulta de Fluxo de Caixa"})}),e.jsx(D,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"mes-fluxo",children:"Mês"}),e.jsxs(ge,{value:he,onValueChange:Me,children:[e.jsx(je,{id:"mes-fluxo",children:e.jsx(fe,{placeholder:"Selecione o mês"})}),e.jsxs(be,{children:[e.jsx(Q,{value:"1",children:"Janeiro"}),e.jsx(Q,{value:"2",children:"Fevereiro"}),e.jsx(Q,{value:"3",children:"Março"}),e.jsx(Q,{value:"4",children:"Abril"}),e.jsx(Q,{value:"5",children:"Maio"}),e.jsx(Q,{value:"6",children:"Junho"}),e.jsx(Q,{value:"7",children:"Julho"}),e.jsx(Q,{value:"8",children:"Agosto"}),e.jsx(Q,{value:"9",children:"Setembro"}),e.jsx(Q,{value:"10",children:"Outubro"}),e.jsx(Q,{value:"11",children:"Novembro"}),e.jsx(Q,{value:"12",children:"Dezembro"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"ano-fluxo",children:"Ano"}),e.jsx(b,{id:"ano-fluxo",type:"number",value:L,onChange:h=>xe(h.target.value),min:"2020",max:"2030"})]}),e.jsx("div",{className:"space-y-2",children:e.jsx(T,{onClick:rs,disabled:Re||!he||!L,className:"w-full mt-4",children:Re?e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"h-4 w-4 animate-spin mr-2"}),"Carregando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Consultar"]})})}),e.jsxs(Z,{className:"bg-emerald-100 border-emerald-400 dark:bg-emerald-700 dark:border-green-900",children:[e.jsx(ne,{className:"pb-1 pt-1",children:e.jsx(re,{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:"Dividendos"})}),e.jsxs(D,{className:"pt-0 pb-1 space-y-2",children:[e.jsx(T,{onClick:yn,disabled:Ge||!he||!L,className:"w-full bg-green-600 hover:bg-green-700 text-xs h-8",children:Ge?e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"h-3 w-3 animate-spin mr-1"}),"Gerando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(oa,{className:"h-3 w-3 mr-1"}),"Gerar"]})}),e.jsx(T,{onClick:Cn,disabled:ks||!he||!L,className:"w-full bg-red-600 hover:bg-red-700 text-xs h-8",children:ks?e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"h-3 w-3 animate-spin mr-1"}),"Removendo..."]}):e.jsxs(e.Fragment,{children:[e.jsx(_a,{className:"h-3 w-3 mr-1"}),"Remover"]})})]})]}),e.jsxs(Z,{className:"bg-blue-100 border-blue-400 dark:bg-blue-700 dark:border-blue-900",children:[e.jsx(ne,{className:"pb-1 pt-1",children:e.jsx(re,{className:"text-xs font-medium text-blue-700 dark:text-blue-300",children:"Saldo Inicial"})}),e.jsx(D,{className:"pt-0 pb-1",children:e.jsxs("div",{className:`text-lg font-bold ${Fe>=0?"text-green-400":"text-red-600"}`,children:["R$"," ",Fe.toLocaleString("pt-BR",{minimumFractionDigits:2})]})})]}),e.jsxs(Z,{className:"bg-orange-200 border-red-400 dark:bg-purple-700 dark:border-purple-900",children:[e.jsx(ne,{className:"pb-1 pt-1",children:e.jsx(re,{className:"text-xs font-medium text-green-700 dark:text-green-300",children:"Saldo Final"})}),e.jsx(D,{className:"pt-0 pb-1",children:e.jsxs("div",{className:`text-lg font-bold ${le>=0?"text-green-400":"text-red-600"}`,children:["R$"," ",le.toLocaleString("pt-BR",{minimumFractionDigits:2})]})})]})]})})]}),oe.length>0&&e.jsxs(Z,{children:[e.jsx(ne,{children:e.jsxs(re,{children:["Fluxo de Caixa - ",he,"/",L]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:oe.map((h,_)=>{const G=h.descricao.toLowerCase().includes("saldo anterior"),ce=_===oe.length-1;return e.jsxs("div",{className:`p-4 rounded-lg border ${G||ce?"bg-blue-50 border-blue-200 dark:bg-blue-800 dark:border-blue-800":"bg-gray-50 border-gray-200 dark:bg-stone-800 dark:border-stone-700"}`,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 items-center",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("div",{className:"font-medium text-sm text-gray-900 dark:text-gray-100",children:h.descricao}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(h.dtMovimento).toLocaleDateString("pt-BR")})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-sm font-medium text-green-600",children:["R$"," ",h.entrada.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Entrada"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-sm font-medium text-red-600",children:["R$"," ",h.saida.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Saída"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:`text-sm font-medium ${h.saldoDia>=0?"text-green-600":"text-red-600"}`,children:["R$"," ",h.saldoDia.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Saldo Dia"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:`text-sm font-bold ${h.saldoAcumulado>=0?"text-green-600":"text-red-600"}`,children:["R$"," ",h.saldoAcumulado.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Saldo Acumulado"})]})]}),(G||ce)&&e.jsx("div",{className:"mt-2 text-xs text-blue-600 dark:text-blue-400 font-medium",children:G?"Saldo Anterior":"Saldo Atual"})]},_)})})})]})]}),e.jsx(ae,{value:"caixa-dividendos",className:"space-y-4",children:e.jsx(Z,{className:"bg-gray-600 border-gray-200 dark:bg-gray-500 dark:border-gray-700",children:e.jsx(D,{className:"bg-graye",children:mn?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(Ne,{className:"h-8 w-8 animate-spin mr-2"}),e.jsx("span",{children:"Carregando dados..."})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-white",children:"Caixa da Entidade"}),as.length>0?e.jsx("div",{className:"bg-white border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full min-h-[80px]",children:[e.jsx("thead",{className:"bg-gray-400",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left font-medium text-gray-900",children:"Data"}),e.jsx("th",{className:"px-4 py-3 text-left font-medium text-gray-900",children:"Descrição"}),e.jsx("th",{className:"px-4 py-3 text-right font-medium text-gray-900",children:"Valor"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:as.map((h,_)=>{const G=_===as.length-1,ce=h.dataMov==="Total",$e=G&&ce&&h.valor>0;return e.jsxs("tr",{className:`hover:bg-gray-50 ${ce?"bg-gray-400":""}`,children:[e.jsx("td",{className:`px-4 py-3 text-sm text-gray-900 ${ce?"font-bold":""}`,children:h.dataMov}),e.jsx("td",{className:`px-4 py-3 text-sm text-gray-900 whitespace-pre-wrap max-w-xs ${ce?"font-bold":""}`,children:h.descricao||"-"}),e.jsx("td",{className:`px-4 py-3 text-sm text-right font-medium text-green-900 ${ce?"font-bold":""}`,children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsxs("span",{className:`${ce?"font-bold":""}`,children:["R$"," ",h.valor.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),$e&&e.jsx(T,{size:"sm",className:"h-6 w-6 p-0 bg-red-500",onClick:()=>$s("caixa",h.entidadeId),title:"Retirada de caixa",children:e.jsx(Xs,{className:"h-3 w-3"})})]})})]},_)})})]})}):e.jsx("div",{className:"text-center py-8 text-gray-500 bg-white border rounded-lg",children:"Nenhum dado de caixa encontrado"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-white",children:"Dividendos por Sócios"}),Fs.length>0?e.jsx("div",{className:"bg-white border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full min-h-[80px]",children:[e.jsx("thead",{className:"bg-gray-400",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left font-medium text-gray-900",children:"Nome"}),e.jsx("th",{className:"px-4 py-3 text-left font-medium text-gray-900",children:"Data"}),e.jsx("th",{className:"px-4 py-3 text-left font-medium text-gray-900",children:"Descrição"}),e.jsx("th",{className:"px-4 py-3 text-right font-medium text-gray-900",children:"Valor"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Fs.map((h,_)=>{const G=h.dataMov==="Total",ce=G&&h.valor>0;return e.jsxs("tr",{className:`hover:bg-gray-50 ${G?"bg-gray-400":""}`,children:[e.jsx("td",{className:`px-4 py-3 text-sm text-gray-900 ${G?"font-bold":""}`,children:h.nome}),e.jsx("td",{className:`px-4 py-3 text-sm text-gray-900 ${G?"font-bold":""}`,children:h.dataMov}),e.jsx("td",{className:`px-4 py-3 text-sm text-gray-900 whitespace-pre-wrap max-w-xs ${G?"font-bold":""}`,children:h.descricao||"-"}),e.jsx("td",{className:`px-4 py-3 text-sm text-right font-medium text-green-900 ${G?"font-bold":""}`,children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsxs("span",{className:`${G?"font-bold":""}`,children:["R$"," ",h.valor.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),ce&&e.jsx(T,{size:"sm",className:"h-6 w-6 p-0 bg-red-500",onClick:()=>$s("dividendo",h.id),title:"Retirada de dividendo",children:e.jsx(Xs,{className:"h-3 w-3"})})]})})]},_)})})]})}):e.jsx("div",{className:"text-center py-8 text-gray-500 bg-white border rounded-lg",children:"Nenhum dado de dividendos encontrado"})]})]})})})})]}),e.jsx(Ie,{open:x,onOpenChange:p,children:e.jsxs(we,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Ee,{children:[e.jsx(Se,{children:"Editar Movimento"}),e.jsx(Te,{children:"Atualize as informações de pagamento e comprovante do movimento."})]}),e.jsx(pt,{formData:R,setFormData:M,isLoading:d,onSubmit:wn,onCancel:()=>{p(!1),U(null),M(ts)},movimento:V})]})}),e.jsx(Ie,{open:ye,onOpenChange:Ce,children:e.jsxs(we,{className:"max-w-md",children:[e.jsxs(Ee,{children:[e.jsx(Se,{children:"Gerar Movimento"}),e.jsx(Te,{children:"Selecione o mês e ano para gerar os movimentos financeiros."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"mes",children:"Mês"}),e.jsxs(ge,{value:z,onValueChange:I,children:[e.jsx(je,{children:e.jsx(fe,{placeholder:"Selecione o mês"})}),e.jsx(be,{children:Array.from({length:12},(h,_)=>_+1).map(h=>e.jsx(Q,{value:h.toString(),children:h.toString().padStart(2,"0")},h))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"ano",children:"Ano"}),e.jsx(b,{type:"number",value:c,onChange:h=>w(h.target.value),placeholder:"Ex: 2024",min:"2020",max:new Date().getFullYear()})]})]}),e.jsxs(ze,{children:[e.jsx(T,{variant:"outline",onClick:()=>Ce(!1),disabled:X,children:"Cancelar"}),e.jsx(T,{onClick:In,disabled:X||!z||!c,children:X?e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"mr-2 h-4 w-4 animate-spin"}),"Gerando..."]}):"Gerar Movimento"})]})]})}),e.jsx(Ie,{open:hn,onOpenChange:$a,children:e.jsxs(we,{className:"max-w-md",children:[e.jsxs(Ee,{children:[e.jsx(Se,{children:ja==="caixa"?"Retirada de Caixa":"Retirada de Dividendo"}),e.jsx(Te,{children:"Preencha os dados para realizar a retirada"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"mes-retirada",children:"Mês"}),e.jsxs(ge,{value:Le.mes,onValueChange:h=>Sa(_=>({..._,mes:h})),children:[e.jsx(je,{children:e.jsx(fe,{placeholder:"Selecione o mês"})}),e.jsx(be,{children:Array.from({length:12},(h,_)=>_+1).map(h=>e.jsx(Q,{value:h.toString(),children:h.toString().padStart(2,"0")},h))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"ano-retirada",children:"Ano"}),e.jsx(b,{id:"ano-retirada",type:"number",value:Le.ano,onChange:h=>Sa(_=>({..._,ano:h.target.value})),placeholder:"Ex: 2024",min:"2020",max:"2030"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"valor-retirada",children:"Valor"}),e.jsx(b,{id:"valor-retirada",type:"number",step:"0.01",value:Le.valor,onChange:h=>Sa(_=>({..._,valor:h.target.value})),placeholder:"0,00",min:"0.01"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"justificativa-retirada",children:"Justificativa"}),e.jsx(b,{id:"justificativa-retirada",value:Le.justificativa,onChange:h=>Sa(_=>({..._,justificativa:h.target.value})),placeholder:"Descreva o motivo da retirada"})]})]}),e.jsxs(ze,{children:[e.jsx(T,{variant:"outline",onClick:()=>$a(!1),disabled:ss,children:"Cancelar"}),e.jsx(T,{onClick:Nn,disabled:ss,children:ss?e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"h-4 w-4 animate-spin mr-2"}),"Processando..."]}):"Confirmar Retirada"})]})]})}),e.jsx(vt,{isOpen:J,onClose:()=>{K(!1),l(null)},movimento:C,tipo:a==="receitas"?"receita":"despesa"})]})}function Pt({activeTab:s}){const{userName:a,userEntidade:o,logout:n}=go(),i=qn(),y=Gn(),[t,j]=r.useState(s||"overview"),[N,v]=r.useState(!1),[B,f]=r.useState([]),[A,F]=r.useState(!1),[P,S]=r.useState([]),[$,x]=r.useState(!1),[p,V]=r.useState([]),[U,J]=r.useState(!1);r.useEffect(()=>{v(!0)},[]);const K=async()=>{F(!0);try{const z=await zr.getContratosAtivos();f(z.data)}catch(z){console.error("Erro ao carregar contratos ativos:",z)}finally{F(!1)}},C=async()=>{x(!0);try{const z=await Or.getDashboard();S(z.data)}catch(z){console.error("Erro ao carregar dados do dashboard:",z)}finally{x(!1)}},l=async()=>{J(!0);try{const z=await Lr.getReceitasDespesasAnual();V(z.data)}catch(z){console.error("Erro ao carregar dados de receitas e despesas:",z)}finally{J(!1)}};r.useEffect(()=>{t==="overview"&&(K(),C(),l())},[t]),r.useEffect(()=>{if(s){j(s);return}const z=y.pathname;if(z.includes("/customers")){j("customers");return}if(z==="/business-partners"){j("business-partners");return}if(z.includes("/reports")){j("reports");return}if(z.includes("/users")){j("users");return}if(z==="/partners"){j("Sócios");return}if(z.includes("/management")){j("Gestão Financeira");return}if(z.includes("/entity")){j("Entidades");return}if(z.includes("/contratos")){j("contratos");return}j("overview")},[s,y.pathname]);const R=B.reduce((z,I)=>z+I.contratos,0),M=()=>{const z=P.find(I=>I.tipo==="R"&&I.status==="A");return z?{valor:z.valorMesAtual,diferenca:z.diferencaPercentual,cont:z.cont}:{valor:0,diferenca:0,cont:0}},d=()=>{const z=P.find(I=>I.tipo==="R"&&I.status==="P");return z?{valor:z.valorMesAtual,diferenca:z.diferencaPercentual,cont:z.cont}:{valor:0,diferenca:0,cont:0}},g=()=>{const z=P.find(I=>I.tipo==="D"&&I.status==="A");return z?{valor:z.valorMesAtual,diferenca:z.diferencaPercentual,cont:z.cont}:{valor:0,diferenca:0,cont:0}},k=z=>z>=1e6?`R$ ${(z/1e6).toFixed(1)}M`:z>=1e3?`R$ ${(z/1e3).toFixed(1)}k`:`R$ ${z.toFixed(2)}`,Y=z=>`${z>=0?"+":""}${z.toFixed(1)}%`,pe=(()=>{const z={};return p.forEach(I=>{z[I.mesAno]||(z[I.mesAno]={mes:I.nomeMes,receitas:0,despesas:0}),I.tipo==="R"?z[I.mesAno].receitas+=I.valor:I.tipo==="D"&&(z[I.mesAno].despesas+=I.valor)}),Object.values(z).sort((I,c)=>{const w=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"];return w.indexOf(I.mes)-w.indexOf(c.mes)})})(),ye=M(),Ce=d(),X=g(),se=[{title:"Contratos Ativos",value:A?"...":R.toString(),description:A?"Carregando...":B.map(z=>`${z.tipo} ${z.contratos}`).join(", "),icon:na,trend:"up",color:"bg-blue-100 border-blue-200 dark:bg-blue-400 dark:border-blue-800",iconColor:"text-blue-600 dark:text-blue-400"},{title:"Recebimentos em aberto",value:$?"...":k(ye.valor),description:$?"Carregando...":`${Y(ye.diferenca)} em relação ao mês anterior`,icon:oa,trend:ye.diferenca>=0?"up":"down",color:"bg-orange-100 border-orange-200 dark:bg-orange-400 dark:border-orange-800",iconColor:"text-orange-600 dark:text-orange-400"},{title:"Recebimentos efetivados",value:$?"...":k(Ce.valor),description:$?"Carregando...":`${Y(Ce.diferenca)} em relação ao mês anterior`,icon:oa,trend:Ce.diferenca>=0?"up":"down",color:"bg-green-100 border-green-200 dark:bg-green-300 dark:border-green-800",iconColor:"text-green-600 dark:text-green-400"},{title:"Pagamentos em aberto",value:$?"...":`${k(X.valor)} (${X.cont} ${X.cont===1?"fatura":"faturas"})`,description:$?"Carregando...":`${Y(X.diferenca)} em relação ao mês anterior`,icon:Na,trend:X.diferenca>=0?"up":"down",color:"bg-red-100 border-red-200 dark:bg-red-300 dark:border-red-800",iconColor:"text-red-600 dark:text-red-400"}];return e.jsxs("div",{className:"min-h-screen bg-blue-500",children:[e.jsx("header",{className:"bg-blue-100 shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center py-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(Na,{className:"h-8 w-8 text-primary"}),e.jsx("h1",{className:"text-xl font-semibold font-nexa-bold",children:"CT One - Gestão ClinicaTech"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:[a," - ",o]}),e.jsxs(T,{variant:"default",size:"sm",onClick:n,children:[e.jsx(yr,{className:"h-4 w-4 mr-2"}),"Sair"]})]})]})})}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 bg-blue-900 mt-5",children:e.jsxs(ua,{value:t,onValueChange:z=>{j(z),i(`/main/${z}`)},children:[e.jsxs(ma,{className:`grid w-full h-18 ${N?"grid-cols-6":"grid-cols-5"}`,children:[e.jsx(ee,{value:"overview",children:"Visão Geral"}),e.jsx(ee,{value:"customers",children:"Clientes"}),e.jsx(ee,{value:"business-partners",children:"Parceiros"}),N&&e.jsx(ee,{value:"users",children:"Usuários"}),e.jsx(ee,{value:"partners",children:"Sócios"}),e.jsx(ee,{value:"entity",children:"Entidades"}),e.jsx(ee,{value:"management",children:"Gestão Financeira"}),e.jsx(ee,{value:"contratos",children:"Contratos"}),e.jsx(ee,{value:"reports",children:"Relatórios"})]}),e.jsx(ae,{value:"overview",className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-6 font-montserrat-medium text-white",children:"Visão Geral"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:se.map(z=>e.jsxs(Z,{className:z.color,children:[e.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(re,{className:"text-sm font-medium",children:z.title}),e.jsx(z.icon,{className:`h-4 w-4 ${z.iconColor}`})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:z.value}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[z.trend==="up"&&e.jsx(Va,{className:"h-3 w-3 text-green-500"}),e.jsx("span",{children:z.description})]})]})]},z.title))}),e.jsxs(Z,{children:[e.jsxs(ne,{children:[e.jsx(re,{children:"Receitas vs Despesas"}),e.jsx(Kn,{children:"Evolução mensal dos valores financeiros"})]}),e.jsx(D,{children:U?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Carregando dados..."})]})}):pe.length>0?e.jsx(Xn,{width:"100%",height:300,children:e.jsxs(Qn,{data:pe,style:{backgroundColor:"#2f404f",borderRadius:"8px",border:"2px solid #030b1a"},children:[e.jsx(Zn,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(Dn,{dataKey:"mes",tick:{fontSize:12,fill:"#d1d5db"},angle:-45,textAnchor:"end",height:60,axisLine:{stroke:"#6b7280"}}),e.jsx(er,{tick:{fontSize:12,fill:"#d1d5db"},tickFormatter:z=>`R$ ${(z/1e3).toFixed(0)}k`,axisLine:{stroke:"#6b7280"}}),e.jsx(ar,{contentStyle:{backgroundColor:"#374151",border:"1px solid #6b7280",borderRadius:"6px",color:"#f9fafb"},formatter:z=>[`R$ ${z.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,""],labelFormatter:z=>`Mês: ${z}`}),e.jsx(sr,{wrapperStyle:{color:"#d1d5db"}}),e.jsx(Js,{type:"monotone",dataKey:"receitas",stroke:"#22c55e",strokeWidth:2,name:"Receitas",dot:{fill:"#22c55e",strokeWidth:2,r:4}}),e.jsx(Js,{type:"monotone",dataKey:"despesas",stroke:"#ef4444",strokeWidth:2,name:"Despesas",dot:{fill:"#ef4444",strokeWidth:2,r:4}})]})}):e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Nenhum dado disponível"})})})})]})]})}),e.jsx(ae,{value:"customers",children:e.jsx(Wc,{title:"Cadastro de Clientes"})}),e.jsx(ae,{value:"business-partners",className:"space-y-6",children:e.jsx(Zc,{title:"Cadastro de Parceiros"})}),e.jsx(ae,{value:"reports",className:"space-y-6",children:e.jsx(Uc,{title:"Relatórios"})}),e.jsx(ae,{value:"partners",className:"space-y-6",children:e.jsx(Kc,{title:"Cadastro de Sócios"})}),e.jsx(ae,{value:"entity",className:"space-y-6",children:e.jsx(Vc,{title:"Cadastro de Entidades"})}),e.jsx(ae,{value:"management",className:"space-y-6",children:e.jsx(gt,{title:"Gestão Financeira"})}),e.jsx(ae,{value:"contratos",className:"space-y-6",children:e.jsx(ut,{})}),e.jsx(ae,{value:"users",className:"space-y-6",children:N?e.jsx(mt,{title:"Cadastro de Usuários"}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-red-600 mb-4",children:e.jsx("svg",{className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Acesso Negado"}),e.jsx("p",{className:"text-gray-600",children:"Apenas administradores podem acessar esta funcionalidade."})]})})]})})]})}export{Pt as MainPage};
//# sourceMappingURL=Main-Y7_J9h2k.js.map
